<html data-bs-theme="dark" class="dark-mode w-100 html-scroll">

<head>
    <title>"placeholder_dashboard_title"</title>
    <!-- ChartJs import -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>

    <!-- ChartJs Datalabel plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>

    <!-- ChartJs timeline plugin (helps create time axis) -->
    <script
        src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

    <!-- ChartJs boxplot plugin (for time deviation graph) -->
    <script type="text/javascript"
        src="https://unpkg.com/@sgratzl/chartjs-chart-boxplot@3.6.0/build/index.umd.min.js"></script>

    <!-- Gridstack CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@12.2.1/dist/gridstack.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/gridstack@12.2.1/dist/gridstack-all.min.js"></script>

    <!-- ChartJs heatmap/matrix plugin -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-matrix@2.0.1/dist/chartjs-chart-matrix.min.js"></script>

    <!-- DataTables and Bootstrap imports -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css"
        rel="stylesheet" />
    <link href="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.1.8/datatables.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.1.8/datatables.min.js"></script>

    <!-- Pako that is used to decompress the initial data -->
    <script src="https://cdn.jsdelivr.net/npm/pako@2.1.0/dist/pako.min.js"></script>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon"
        href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKcAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAAqAAAAAAAAAAAAAAAAAAAALIAAAD/AAAA4AAAANwAAADcAAAA3AAAANwAAADcAAAA3AAAANwAAADcAAAA4AAAAP8AAACxAAAAAAAAAKYAAAD/AAAAuwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/AAAA/wAAAKkAAAD6AAAAzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN8AAAD/AAAA+gAAAMMAAAAAAAAAAgAAAGsAAABrAAAAawAAAGsAAABrAAAAawAAAGsAAABrAAAADAAAAAAAAADaAAAA/wAAAPoAAADDAAAAAAAAAIsAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAANEAAAAAAAAA2gAAAP8AAAD6AAAAwwAAAAAAAAAAAAAAMgAAADIAAAAyAAAAMgAAADIAAAAyAAAAMgAAADIAAAAFAAAAAAAAANoAAAD/AAAA+gAAAMMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADaAAAA/wAAAPoAAADDAAAAAAAAADwAAAB8AAAAAAAAAGAAAABcAAAAAAAAAH8AAABKAAAAAAAAAAAAAAAAAAAA2gAAAP8AAAD6AAAAwwAAAAAAAADCAAAA/wAAACkAAADqAAAA4QAAAAAAAAD7AAAA/wAAALAAAAAGAAAAAAAAANoAAAD/AAAA+gAAAMMAAAAAAAAAIwAAAP4AAAD/AAAA/wAAAGAAAAAAAAAAAAAAAMkAAAD/AAAAigAAAAAAAADaAAAA/wAAAPoAAADDAAAAAAAAAAAAAAAIAAAAcAAAABkAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAA2gAAAP8AAAD7AAAAywAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN4AAAD/AAAAqwAAAP8AAACvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALIAAAD/AAAAsgAAAAAAAAC5AAAA/wAAAMoAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMkAAAD/AAAAvAAAAAAAAAAAAAAAAAAAAKwAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAArQAAAAAAAAAAwAMAAIABAAAf+AAAP/wAAD/8AAAgBAAAP/wAAD/8AAA//AAAJIwAADHEAAA//AAAP/wAAB/4AACAAQAAwAMAAA==" />

    <style>
        /* LIGHT MODE STYLING */
        body {
            background-color: #eee;
        }

        .border-bottom {
            border-color: rgba(0, 0, 0, 0.175) !important;
        }

        .fullscreen,
        .sticky-top,
        body {
            background-color: #eee;
        }

        .grid-stack {
            max-height: 2400px;
        }

        .grid-stack-item-content {
            background-color: white;
        }

        .form-switch .form-check-input:not(:checked) {
            background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='black'/></svg>");
            border-color: black;
        }

        .stat-label {
            font-size: 1rem;
            color: darkgrey;
        }

        .white-text {
            color: black;
        }

        /* DARK MODE STYLING */
        .dark-mode :root {
            color-scheme: dark;
        }

        .dark-mode .grid-stack-item-content,
        .dark-mode .overview-card .card {
            background: rgba(30, 41, 59, 0.9);
        }

        .dark-mode .fullscreen {
            background: rgba(30, 41, 59, 1);
        }

        .dark-mode .modal-content {
            background: #0f172a;
        }

        .dark-mode .border-bottom {
            border-color: rgba(255, 255, 255, 0.15) !important;
        }

        .dark-mode .sticky-top,
        .dark-mode .card,
        .dark-mode body,
        .dark-mode .modal-dialog {
            background: #0f172a;
            color: #eee;
        }

        .dark-mode .list-group-item:not(.disabled),
        .dark-mode .form-label,
        .dark-mode .form-control,
        .dark-mode .form-select {
            color: #eee;
        }

        .dark-mode .list-group-item .disabled {
            color: rgba(173, 181, 189, 0.75);
        }

        .dark-mode .form-switch .form-check-input:not(:checked) {
            background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='white'/></svg>");
            border-color: #eee;
        }

        .dark-mode .table>:not(caption)>*>* {
            color: #eee;
        }

        .dark-mode .collapse-icon {
            color: #eee;
        }

        .dark-mode .stat-label {
            font-size: 0.85rem;
            color: #9ca3af;
        }

        .dark-mode .white-text {
            color: #eee;
        }

        /* GENERAL STYLING */
        :root {
            font-family: Helvetica, sans-serif;
        }

        .html-scroll {
            overflow-y: scroll;
        }

        .modal-open {
            padding-right: 0px !important;
        }

        h4,
        h5,
        h6 {
            margin-bottom: 0rem;
        }

        body.lock-scroll {
            overflow: hidden;
        }

        #settings,
        #database,
        .nav-item,
        .information-icon,
        .bar-graph,
        .line-graph,
        .fullscreen-graph,
        .close-graph,
        .timeline-graph,
        .radar-graph,
        .heatmap-graph,
        .pie-graph,
        .percentage-graph,
        .stats-graph,
        .boxplot-graph,
        .shown-graph,
        .hidden-graph,
        .shown-section,
        .hidden-section,
        .move-up-table,
        .move-down-table,
        .move-up-section,
        .move-down-section {
            cursor: pointer;
        }

        .navbar-disabled {
            opacity: 0.5;
            user-select: none;
        }

        .navbar-disabled a {
            pointer-events: none;
        }

        .navbar-disabled a:hover {
            pointer-events: auto;
        }

        .tooltip-popup {
            position: fixed;
            max-width: 360px;
            padding: 8px 12px;
            border-radius: 8px;
            background-color: white;
            color: black;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            font-size: 0.95rem;
            white-space: pre-line;
            pointer-events: none;
            z-index: 9999;
            box-sizing: border-box;
        }

        .dark-mode .tooltip-popup {
            background-color: #0f172a;
            color: #eee;
        }

        .navbar {
            margin-bottom: 1rem;
        }

        .card {
            margin-bottom: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .stats {
            float: right;
            text-align: right;
            font-size: 0.9em;
            white-space: nowrap;
        }

        .fullscreen {
            position: fixed !important;
            width: 100% !important;
            height: 100% !important;
            left: 0 !important;
            top: 0 !important;
            z-index: 10 !important;
            padding: 20px 20px 20px 20px !important;
            border-radius: 0px !important;
        }

        .selectBox {
            position: relative;
        }

        .selectBox select {
            width: 100%;
        }

        .overSelect {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
        }

        #checkboxes {
            display: none;
            position: absolute;
            z-index: 2;
        }

        #checkboxes label {
            display: block;
        }

        .border {
            min-height: 42px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .fullscreen .stat-value {
            font-size: 4rem;
        }

        .fullscreen .stat-label {
            font-size: 2rem;
        }

        .green-text,
        .text-passed {
            color: rgba(151, 189, 97, 0.9);
        }

        .border-passed {
            border-color: rgba(151, 189, 97, 0.9);
        }

        .red-text,
        .text-failed {
            color: rgba(206, 62, 1, 0.9);
        }

        .border-failed {
            border-color: rgba(206, 62, 1, 0.9);
        }

        .yellow-text {
            color: rgba(254, 216, 79, 0.9);
        }

        .border-skipped {
            border-color: rgba(254, 216, 79, 0.9);
        }

        .blue-text {
            color: dodgerblue;
        }

        .overview-canvas {
            height: 200px;
        }

        .overview-card {
            cursor: pointer;
            min-width: 300px;
        }

        .overview-card .card {
            border-radius: 1rem
        }

        .grid-stack-item-content {
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .graph-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .graph-header h6 {
            margin: 0;
            font-weight: 600;
        }

        .graph-controls {
            display: flex;
            gap: 8px;
        }

        .grid-stack-item-content .graph-body {
            flex: 1 1 auto;
            display: flex;
            overflow-x: hidden;
            overflow-y: auto;
            width: 100%;
        }

        .graph-body .row {
            flex-wrap: wrap;
            margin-left: 0;
            margin-right: 0;
        }

        .grid-stack-item-content .graph-body .vertical {
            overflow-y: auto;
        }

        canvas {
            display: block;
        }

        #alertContainer {
            z-index: 1100;
            top: 7rem;
            max-width: 80%
        }

        .alert-dismissible {
            padding-right: 16px !important;
        }

        .grid-stack-item-content:has(.hidden-graph:not([hidden])),
        .table-section:has(.hidden-graph:not([hidden])),
        .card:has(.hidden-section:not([hidden])) {
            opacity: 0.5;
        }

        .modal.dimmed {
            pointer-events: none;
            filter: brightness(0.5);
        }

        #runTag {
            max-height: 400px;
            overflow: auto;
        }

        @media print {
            table {
                width: 100%;
                page-break-inside: auto;
            }

            .grid-stack-item-contentvas {
                width: 100%;
                overflow: hidden;
                page-break-inside: avoid;
                break-inside: avoid;
                display: block;
            }

            canvas {
                height: auto !important;
                max-width: 100% !important;
            }
        }
    </style>
</head>

<body>
    <div class="position-relative alert-container">
        <div class="position-fixed top-20 start-50 translate-middle" id="alertContainer"></div>
    </div>
    <nav class="navbar navbar-expand-sm sticky-top navbar-dark ps-4 pe-4 border-bottom pb-1" id="navigation">
        <div class="navbar-nav ms-4">
            <a class="nav-link p-2 information" id="rflogo" href="https://robotframework.org/" target="_blank"></a>
            <a class="nav-item nav-link" id="menuOverview">Overview</span></a>
            <a class="nav-item nav-link active" id="menuDashboard">Dashboard</a>
            <a class="nav-item nav-link" id="runStatisticsSectionNav"><i>Runs</i></a>
            <a class="nav-item nav-link" id="suiteStatisticsSectionNav"><i>Suites</i></a>
            <a class="nav-item nav-link" id="testStatisticsSectionNav"><i>Tests</i></a>
            <a class="nav-item nav-link" id="keywordStatisticsSectionNav"><i>Keywords</i></a>
            <a class="nav-item nav-link" id="menuCompare">Compare</a>
            <a class="nav-item nav-link" id="menuTables">Tables</a>
            <a class="nav-item nav-link" id="openDashboard" href="/" hidden>Admin</a>
        </div>
        <ul class="navbar-nav flex-row flex-wrap ms-md-auto me-4">
            <li class="nav-item">
                <a class="nav-link p-2 information" id="filters" data-bs-toggle="modal"
                    data-bs-target="#filtersModal"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="customizeLayout"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="saveLayout" hidden></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="settings" data-bs-toggle="modal"
                    data-bs-target="#settingsModal"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="themeDark"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="themeLight"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="database" data-bs-toggle="modal"
                    data-bs-target="#databaseModal"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information information-icon" id="versionInformation"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" target="_blank" id="bug"
                    href="https://github.com/timdegroot1996/robotframework-dashboard/issues"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" target="_blank" id="github"
                    href="https://github.com/timdegroot1996/robotframework-dashboard"></a>
            </li>
        </ul>
    </nav>

    <div class="container-fluid">
        <div class="text-center mt-5" id="loading">
            <div class="spinner-border" style="width: 5rem; height: 5rem;" role="status">
                <span class="sr-only"></span>
            </div>
        </div>

        <div id="overview" hidden>
            <div class="card" id="overviewStatisticsSection">
                <div class="card-header">
                    <div class="row">
                        <div class="col-auto align-self-center">
                            <div class="btn btn-sm collapse-icon" id="collapsegridOverview"></div>
                        </div>
                        <div class="col-4">
                            <h4 id="overviewTitle"></h4>
                        </div>
                        <div class="d-flex flex-wrap align-items-start col align-items-center">
                            <div class="col-auto">
                                <div class="btn-group">
                                    <label class="form-check-label" for="switchShowAllRuns">Display All Runs</label>
                                </div>
                                <div class="btn-group form-switch ms-1">
                                    <input class="form-check-input" type="checkbox" role="switch"
                                        id="switchShowAllRuns" />
                                </div>
                            </div>
                            <div class="col-auto" id="overviewName" hidden>
                                <div class="btn-group">
                                    <label class="form-check-label" for="overviewSelectName">Name</label>
                                </div>
                                <div class="btn-group">
                                    <select class="form-select form-select-sm mt-1" id="overviewSelectName"></select>
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="btn-group">
                                    <label class="form-check-label ms-2" for="switchRunTags">Use Run Tags</label>
                                </div>
                                <div class="btn-group form-switch ms-1">
                                    <input class="form-check-input" type="checkbox" role="switch" id="switchRunTags" />
                                </div>
                            </div>
                            <div class="col-auto">
                                <div class="btn-group">
                                    <label class="form-check-label" for="overviewDurationPercentage">Percentage</label>
                                </div>
                                <div class="btn-group">
                                    <select class="form-select form-select-sm mt-1" id="overviewDurationPercentage">
                                        <option value="10">10</option>
                                        <option value="20" selected>20</option>
                                        <option value="30">30</option>
                                        <option value="40">40</option>
                                        <option value="50">50</option>
                                        <option value="60">60</option>
                                        <option value="70">70</option>
                                        <option value="80">80</option>
                                        <option value="90">90</option>
                                        <option value="100">100</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-auto">
                                <a type="button" class="information information-icon ms-2"
                                    id="overviewStatisticsInformation"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Placeholder DIV to keep the graphs, they will be moved based on the config to the card overviewData -->
                <div id="overviewDataHidden" hidden></div>
                <div class="card-body" id="gridOverview"></div>
            </div>
        </div>

        <div id="dashboard" hidden>
            <div id="topSection" hidden></div>
            <div class="card" id="runStatisticsSection">
                <div class="card-header">
                    <div class="row">
                        <div class="col-auto align-self-center">
                            <div class="btn btn-sm collapse-icon" id="collapsegridRun"></div>
                        </div>
                        <div class="col">
                            <h4 id="runTitle"></h4>
                        </div>
                        <div class="col-auto ms-auto">
                            <a class="move-up-section information" id="runSectionMoveUp" hidden></a>
                            <a class="move-down-section information" id="runSectionMoveDown" hidden></a>
                            <a class="shown-section information" id="runSectionShown" hidden></a>
                            <a class="hidden-section information" id="runSectionHidden" hidden></a>
                        </div>
                    </div>
                </div>
                <!-- Placeholder DIV to keep the graphs, they will be moved based on the config to the card runData -->
                <div id="runDataHidden" hidden></div>
                <div class="card-body grid-stack" id="gridRun"></div>
            </div>

            <div class="card" id="suiteStatisticsSection">
                <div class="card-header">
                    <div class="row">
                        <div class="col-auto align-self-center">
                            <div class="btn btn-sm collapse-icon" id="collapsegridSuite"></div>
                        </div>
                        <div class="col-3">
                            <h4 id="suiteTitle"></h4>
                        </div>
                        <div class="col d-flex align-items-center" id="suiteSectionFiltersContainer">
                            <div class="d-flex flex-wrap align-items-start col align-items-center"
                                id="suiteSectionFilters">
                                <div class="col-auto d-flex me-2">
                                    <label class="form-label mb-0" for="suiteFolder">Folder:</label>
                                    <p class="form-label mb-0 ms-1" id="suiteFolder">All</p>
                                </div>
                                <div class="col-auto d-flex me-2">
                                    <button class="btn btn-outline-light btn-sm" id="resetSuiteFolder">Reset
                                        Folder</button>
                                </div>
                                <div class="col-auto d-flex me-2">
                                    <label class="form-label me-2 mt-1" for="suiteSelectSuites">Suite:</label>
                                    <select class="form-select form-select-sm" id="suiteSelectSuites"></select>
                                </div>
                                <div class="col-auto d-flex me-2">
                                    <label class="form-check-label mb-0 me-2" for="switchSuitePathsSuiteSection">Use
                                        Suite
                                        Paths</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="switchSuitePathsSuiteSection" />
                                    </div>
                                </div>
                            </div>
                            <div class="col-auto ms-auto">
                                <a class="move-up-section information" id="suiteSectionMoveUp" hidden></a>
                                <a class="move-down-section information" id="suiteSectionMoveDown" hidden></a>
                                <a class="shown-section information" id="suiteSectionShown" hidden></a>
                                <a class="hidden-section information" id="suiteSectionHidden" hidden></a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Placeholder DIV to keep the graphs, they will be moved based on the config to the card suiteData -->
                <div id="suiteDataHidden" hidden></div>
                <div class="card-body grid-stack" id="gridSuite"></div>
            </div>

            <div class="card" id="testStatisticsSection">
                <div class="card-header">
                    <div class="row">
                        <div class="col-auto align-self-center">
                            <div class="btn btn-sm collapse-icon" id="collapsegridTest"></div>
                        </div>
                        <div class="col-3">
                            <h4 id="testTitle"></h4>
                        </div>
                        <div class="col d-flex align-items-center" id="testSectionFiltersContainer">
                            <div class="d-flex flex-wrap align-items-start col align-items-center"
                                id="testSectionFilters">
                                <div class="col-auto d-flex me-2">
                                    <label class="form-label mb-0 me-2 mt-1" for="suiteSelectTests">Suite:</label>
                                    <select class="form-select form-select-sm" id="suiteSelectTests"></select>
                                </div>
                                <div class="col-auto d-flex me-2">
                                    <label class="form-check-label mb-0 me-2" for="switchSuitePathsTestSection">Use
                                        Suite
                                        Paths</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="switchSuitePathsTestSection" />
                                    </div>
                                </div>
                                <div class="col-auto d-flex me-2">
                                    <label class="form-label mb-0 me-2 mt-1" for="testSelect">Test:</label>
                                    <select class="form-select form-select-sm" id="testSelect"></select>
                                </div>
                                <div class="col-auto d-flex flex-nowrap align-items-center me-2">
                                    <label class="form-label mb-0 me-2 text-nowrap" for="testTagsSelect">Test
                                        Tags:</label>
                                    <select class="form-select form-select-sm w-auto" id="testTagsSelect"></select>
                                </div>
                            </div>
                            <div class="col-auto ms-auto">
                                <a class="move-up-section information" id="testSectionMoveUp" hidden></a>
                                <a class="move-down-section information" id="testSectionMoveDown" hidden></a>
                                <a class="shown-section information" id="testSectionShown" hidden></a>
                                <a class="hidden-section information" id="testSectionHidden" hidden></a>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Placeholder DIV to keep the graphs, they will be moved based on the config to the card keywordData -->
                <div id="testDataHidden" hidden></div>
                <div class="card-body grid-stack" id="gridTest"></div>
            </div>

            <div class="card" id="keywordStatisticsSection">
                <div class="card-header">
                    <div class="row">
                        <div class="col-auto align-self-center">
                            <div class="btn btn-sm collapse-icon" id="collapsegridKeyword"></div>
                        </div>
                        <div class="col-3">
                            <h4 id="keywordTitle"></h4>
                        </div>
                        <div class="col d-flex align-items-center" id="keywordSectionFiltersContainer">
                            <div class="d-flex flex-wrap align-items-start col align-items-center"
                                id="keywordSectionFilters">
                                <div class="col-auto me-2">
                                    <div class="btn-group">
                                        <label class="form-label mt-2" for="keywordSelect">Keyword</label>
                                    </div>
                                    <div class="btn-group">
                                        <select class="form-select form-select-sm" id="keywordSelect"></select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto ms-auto">
                            <a class="move-up-section information" id="keywordSectionMoveUp" hidden></a>
                            <a class="move-down-section information" id="keywordSectionMoveDown" hidden></a>
                            <a class="shown-section information" id="keywordSectionShown" hidden></a>
                            <a class="hidden-section information" id="keywordSectionHidden" hidden></a>
                        </div>
                    </div>
                </div>
                <!-- Placeholder DIV to keep the graphs, they will be moved based on the config to the card keywordData -->
                <div id="keywordDataHidden" hidden></div>
                <div class="card-body grid-stack" id="gridKeyword"></div>
            </div>
        </div>

        <div id="compare" hidden>
            <div class="card" id="compareStatisticsSection">
                <div class="card-header">
                    <div class="row">
                        <div class="col-auto align-self-center">
                            <div class="btn btn-sm collapse-icon" id="collapsegridCompare"></div>
                        </div>
                        <div class="col-3">
                            <h4 id="compareTitle"></h4>
                        </div>
                        <div class="col d-flex align-items-center" id="compareSectionFiltersContainer">
                            <div class="d-flex flex-wrap align-items-start col align-items-center"
                                id="compareSectionFilters">
                                <div class="col-auto">
                                    <div class="btn-group">
                                        <label class="form-label ms-1 mt-2" for="compareRun1">Run 1</label>
                                    </div>
                                    <div class="btn-group">
                                        <select class="form-select form-select-sm" id="compareRun1"></select>
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="btn-group">
                                        <label class="form-label ms-1 mt-2" for="compareRun2">Run 2</label>
                                    </div>
                                    <div class="btn-group">
                                        <select class="form-select form-select-sm" id="compareRun2"></select>
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <div class="btn-group">
                                        <label class="form-label ms-1 mt-2" for="compareRun3">Run 3</label>
                                    </div>
                                    <div class="btn-group">
                                        <select class="form-select form-select-sm" id="compareRun3"></select>
                                    </div>
                                </div>
                                <div class="col-auto me-2">
                                    <div class="btn-group">
                                        <label class="form-label ms-1 mt-2" for="compareRun4">Run 4</label>
                                    </div>
                                    <div class="btn-group">
                                        <select class="form-select form-select-sm" id="compareRun4"></select>
                                    </div>
                                </div>
                                <div class="col-auto d-flex me-2">
                                    <label class="form-check-label mb-0 me-2" for="switchSuitePathsCompareSection">Use
                                        Suite
                                        Paths</label>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" role="switch"
                                            id="switchSuitePathsCompareSection" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Placeholder DIV to keep the graphs, they will be moved based on the config to the card compareData -->
                <div id="compareDataHidden" hidden></div>
                <div class="card-body grid-stack" id="gridCompare"></div>
            </div>
        </div>

        <div id="tables" hidden>
            <div class="card" id="tablesStatisticsSection">
                <div class="card-header">
                    <div class="row">
                        <div class="col-auto align-self-center">
                            <div class="btn btn-sm collapse-icon" id="collapsegridTable"></div>
                        </div>
                        <div class="col-3">
                            <h4 id="tablesTitle"></h4>
                        </div>
                    </div>
                </div>
                <!-- Placeholder DIV to keep the graphs, they will be moved based on the config to the card tablesData -->
                <div id="tableDataHidden" hidden></div>
                <div class="card-body" id="gridTable"></div>
            </div>
        </div>
    </div>

    <div id="modals">
        <!-- Modal for the filter -->
        <div class="modal fade" id="filtersModal" tabindex="-1" aria-labelledby="filtersModalLabel">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title" id="filtersModalLabel">Filters</h1>
                        <div>
                            <button type="button" class="btn btn-outline-light btn-sm mt-auto ms-3"
                                id="resetFilters">Reset Filters</button>
                            <button type="button" class="btn btn-outline-light btn-sm mt-auto ms-3"
                                data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    <div class="modal-body">
                        <div class="col-auto mt-1 ps-2 pe-2">
                            <label class="form-label form-label-sm mb-0" for="runs" id="runsLabel">Runs</label>
                            <select class="form-select form-select-sm" id="runs"></select>
                        </div>
                        <div class="col-auto mt-1 ps-2 pe-2" id="runTagFilter">
                            <div class="selectBox" id="selectRunTags">
                                <label class="form-label form-label-sm mb-0" for="runTag" id="runTagLabel">Run
                                    Tags</label>
                                <select class="form-select form-select-sm">
                                    <option>Select Tags</option>
                                </select>
                                <div class="overSelect"></div>
                            </div>
                            <div id="checkboxes">
                                <ul class="list-group" id="runTag"></ul>
                            </div>
                        </div>
                        <div class="col-auto mt-1 ps-2 pe-2">
                            <label class="form-label form-label-sm mb-0" for="fromDate" id="fromDateLabel">From
                                Date</label>
                            <input class="form-control form-control-sm" id="fromDate" type="date" />
                        </div>
                        <div class="col-auto mt-1 ps-2 pe-2">
                            <label class="form-label form-label-sm mb-0" for="fromTime" id="fromTimeLabel">From
                                Time</label>
                            <input class="form-control form-control-sm" id="fromTime" type="time" />
                        </div>
                        <div class="col-auto mt-1 ps-2 pe-2">
                            <label class="form-label form-label-sm mb-0" for="toDate" id="toDateLabel">To
                                Date</label>
                            <input class="form-control form-control-sm" id="toDate" type="date" />
                        </div>
                        <div class="col-auto mt-1 ps-2 pe-2">
                            <label class="form-label form-label-sm mb-0" for="toTime" id="toTimeLabel">To
                                Time</label>
                            <input class="form-control form-control-sm" id="toTime" type="time" />
                        </div>
                        <div class="col-auto mt-1 ps-2 pe-2">
                            <label class="form-label form-label-sm mb-0 information" for="amount" id="amountLabel">
                                Amount
                            </label>
                            <div class="d-flex align-items-center mt-1">
                                <input class="form-control form-control-sm flex-grow-1 information" type="number"
                                    min="0" id="amount" value="10">
                                <button type="button" class="btn btn-outline-light btn-sm ms-2 text-nowrap"
                                    id="allRuns">All Runs</button>
                            </div>
                        </div>
                        <div class="col-auto mt-1 ps-2 pe-2" id="metadataFilter" hidden>
                            <label class="form-label form-label-sm mb-0" for="metadata"
                                id="metadataLabel">Metadata</label>
                            <select class="form-select form-select-sm" id="metadata"></select>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Database Details Modal -->
        <div class="modal fade" id="databaseModal" tabindex="-1" aria-labelledby="databaseModalLabel">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title" id="databaseModalLabel">Database Summary</h1>
                        <div>
                            <button type="button" class="btn btn-outline-light btn-sm mt-auto ms-5"
                                data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    <div class="modal-body">
                        <span id="stats"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title" id="settingsModalLabel">Settings</h1>
                        <button type="button" class="btn btn-outline-light btn-sm mt-auto ms-5"
                            data-bs-dismiss="modal">Close</button>
                    </div>
                    <div class="modal-body">
                        <ul class="nav nav-tabs" id="settingsTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="general-tab" data-bs-toggle="tab"
                                    data-bs-target="#general" type="button" role="tab" aria-controls="general"
                                    aria-selected="true">Graphs</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="json-tab" data-bs-toggle="tab" data-bs-target="#json"
                                    type="button" role="tab" aria-controls="json" aria-selected="false">JSON</button>
                            </li>
                        </ul>
                        <div class="tab-content pt-3" id="settingsTabContent">
                            <div class="tab-pane fade show active" id="general" role="tabpanel"
                                aria-labelledby="general-tab">
                                <p><i>Press "Close" or click next to the modal to save the graph settings</i></p>
                                <div class="row">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleLegends">Display
                                            Legends</label>
                                    </div>
                                    <div class="col btn-group form-switch ms-2">
                                        <input class="form-check-input mt-2" type="checkbox" role="switch"
                                            id="toggleLegends" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleAxisTitles">Display Axis
                                            Titles</label>
                                    </div>
                                    <div class="col btn-group form-switch ms-2">
                                        <input class="form-check-input mt-2" type="checkbox" role="switch"
                                            id="toggleAxisTitles" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleLabels">Display Run
                                            Start/Alias Labels On Axes</label>
                                    </div>
                                    <div class="col btn-group form-switch ms-2">
                                        <input class="form-check-input mt-2" type="checkbox" role="switch"
                                            id="toggleLabels" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleAliases">Display Alias
                                            Labels (Defaults to Run Start Labels)</label>
                                    </div>
                                    <div class="col btn-group form-switch ms-2">
                                        <input class="form-check-input mt-2" type="checkbox" role="switch"
                                            id="toggleAliases" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleMilliseconds">Display
                                            Milliseconds Run Start Labels</label>
                                    </div>
                                    <div class="col btn-group form-switch ms-2">
                                        <input class="form-check-input mt-2" type="checkbox" role="switch"
                                            id="toggleMilliseconds" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleAnimations">Display Drawing
                                            Animations</label>
                                    </div>
                                    <div class="col btn-group form-switch ms-2">
                                        <input class="form-check-input mt-2" type="checkbox" role="switch"
                                            id="toggleAnimations" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleAnimationDuration">Animation
                                            Duration (Milliseconds)</label>
                                    </div>
                                    <div class="col-2 ps-0 mt-1">
                                        <input class="form-control form-control-sm" type="number"
                                            id="toggleAnimationDuration" />
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-8 btn-group ms-1">
                                        <label class="form-check-label mt-1" for="toggleBarRounding">Bar Graph Edge
                                            Rounding (Pixels)</label>
                                    </div>
                                    <div class="col-2 ps-0 mt-1">
                                        <select class="form-select form-select-sm" id="toggleBarRounding">
                                            <option value="0">0</option>
                                            <option value="2">2</option>
                                            <option value="4">4</option>
                                            <option value="6">6</option>
                                            <option value="8">8</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane fade" id="json" role="tabpanel" aria-labelledby="json-tab">
                                <p><i>Press "Apply Settings JSON" or "Reset Settings JSON" to change your Settings JSON,
                                        "Close" will not apply changes!</i></p>
                                <div class="row mb-3">
                                    <div class="col-auto">
                                        <button class="btn btn-outline-light btn-sm mt-auto" id="copySettings">Copy
                                            Settings JSON</button>
                                    </div>
                                    <div class="col-auto">
                                        <button class="btn btn-outline-light btn-sm mt-auto" id="resetSettings">Reset
                                            Settings JSON</button>
                                    </div>
                                    <div class="col-auto">
                                        <button class="btn btn-outline-light btn-sm mt-auto" id="applySettings">Apply
                                            Settings JSON</button>
                                    </div>
                                </div>
                                <div class="row mb-2">
                                    <div class="col">
                                        <label for="settingsTextArea" class="form-label">Current Settings JSON</label>
                                        <textarea id="settingsTextArea" class="form-control" rows="20"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel">
            <div class="modal-dialog">
                <div class="modal-content mt-5">
                    <div class="modal-header">
                        <h5 class="modal-title" id="confirmModalLabel">Please Confirm</h5>
                        <div>
                            <button type="button" class="btn btn-outline-light btn-sm mt-auto ms-5"
                                data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    <div class="modal-body" id="confirmModalMessage">
                        Are you sure you want to proceed?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-light btn-sm" id="confirmCancel">Cancel</button>
                        <button type="button" class="btn btn-outline-light btn-sm" id="confirmOk">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /////////////////////////////
        // GLOBAL VARIABLE SECTION //
        /////////////////////////////

        // svgs
        const arrowRight = '<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" viewBox="0 0 52 52"><g><path fill="currentColor" d="M17.9,4.4l20.7,20.5c0.6,0.6,0.6,1.6,0,2.2L17.9,47.6c-0.6,0.6-1.6,0.6-2.2,0l-2.2-2.2c-0.6-0.6-0.6-1.6,0-2.2l16.3-16.1c0.6-0.6,0.6-1.6,0-2.2L13.6,8.8c-0.6-0.6-0.6-1.6,0-2.2l2.2-2.2C16.4,3.9,17.3,3.9,17.9,4.4z"></path></g></svg>';
        const arrowDown = '<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" viewBox="0 0 52 52"><path fill="currentColor" d="M47.6,17.8L27.1,38.5c-0.6,0.6-1.6,0.6-2.2,0L4.4,17.8c-0.6-0.6-0.6-1.6,0-2.2l2.2-2.2c0.6-0.6,1.6-0.6,2.2,0l16.1,16.3c0.6,0.6,1.6,0.6,2.2,0l16.1-16.2c0.6-0.6,1.6-0.6,2.2,0l2.2,2.2C48.1,16.3,48.1,17.2,47.6,17.8z"/></svg>';
        const githubDarkSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg>';
        const githubLightSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg>';
        const settingsDarkSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-1.5 0a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path><path fill="white" d="M12 1c.266 0 .532.009.797.028.763.055 1.345.617 1.512 1.304l.352 1.45c.019.078.09.171.225.221.247.089.49.19.728.302.13.061.246.044.315.002l1.275-.776c.603-.368 1.411-.353 1.99.147.402.349.78.726 1.128 1.129.501.578.515 1.386.147 1.99l-.776 1.274c-.042.069-.058.185.002.315.112.238.213.481.303.728.048.135.142.205.22.225l1.45.352c.687.167 1.249.749 1.303 1.512.038.531.038 1.063 0 1.594-.054.763-.616 1.345-1.303 1.512l-1.45.352c-.078.019-.171.09-.221.225-.089.248-.19.491-.302.728-.061.13-.044.246-.002.315l.776 1.275c.368.603.353 1.411-.147 1.99-.349.402-.726.78-1.129 1.128-.578.501-1.386.515-1.99.147l-1.274-.776c-.069-.042-.185-.058-.314.002a8.606 8.606 0 0 1-.729.303c-.135.048-.205.142-.225.22l-.352 1.45c-.167.687-.749 1.249-1.512 1.303-.531.038-1.063.038-1.594 0-.763-.054-1.345-.616-1.512-1.303l-.352-1.45c-.019-.078-.09-.171-.225-.221a8.138 8.138 0 0 1-.728-.302c-.13-.061-.246-.044-.315-.002l-1.275.776c-.603.368-1.411.353-1.99-.147-.402-.349-.78-.726-1.128-1.129-.501-.578-.515-1.386-.147-1.99l.776-1.274c.042-.069.058-.185-.002-.314a8.606 8.606 0 0 1-.303-.729c-.048-.135-.142-.205-.22-.225l-1.45-.352c-.687-.167-1.249-.749-1.304-1.512a11.158 11.158 0 0 1 0-1.594c.055-.763.617-1.345 1.304-1.512l1.45-.352c.078-.019.171-.09.221-.225.089-.248.19-.491.302-.728.061-.13.044-.246.002-.315l-.776-1.275c-.368-.603-.353-1.411.147-1.99.349-.402.726-.78 1.129-1.128.578-.501 1.386-.515 1.99-.147l1.274.776c.069.042.185.058.315-.002.238-.112.481-.213.728-.303.135-.048.205-.142.225-.22l.352-1.45c.167-.687.749-1.249 1.512-1.304C11.466 1.01 11.732 1 12 1Zm-.69 1.525c-.055.004-.135.05-.161.161l-.353 1.45a1.832 1.832 0 0 1-1.172 1.277 7.147 7.147 0 0 0-.6.249 1.833 1.833 0 0 1-1.734-.074l-1.274-.776c-.098-.06-.186-.036-.228 0a9.774 9.774 0 0 0-.976.976c-.036.042-.06.131 0 .228l.776 1.274c.314.529.342 1.18.074 1.734a7.147 7.147 0 0 0-.249.6 1.831 1.831 0 0 1-1.278 1.173l-1.45.351c-.11.027-.156.107-.16.162a9.63 9.63 0 0 0 0 1.38c.004.055.05.135.161.161l1.45.353a1.832 1.832 0 0 1 1.277 1.172c.074.204.157.404.249.6.268.553.24 1.204-.074 1.733l-.776 1.275c-.06.098-.036.186 0 .228.301.348.628.675.976.976.042.036.131.06.228 0l1.274-.776a1.83 1.83 0 0 1 1.734-.075c.196.093.396.176.6.25a1.831 1.831 0 0 1 1.173 1.278l.351 1.45c.027.11.107.156.162.16a9.63 9.63 0 0 0 1.38 0c.055-.004.135-.05.161-.161l.353-1.45a1.834 1.834 0 0 1 1.172-1.278 6.82 6.82 0 0 0 .6-.248 1.831 1.831 0 0 1 1.733.074l1.275.776c.098.06.186.036.228 0 .348-.301.675-.628.976-.976.036-.042.06-.131 0-.228l-.776-1.275a1.834 1.834 0 0 1-.075-1.733c.093-.196.176-.396.25-.6a1.831 1.831 0 0 1 1.278-1.173l1.45-.351c.11-.027.156-.107.16-.162a9.63 9.63 0 0 0 0-1.38c-.004-.055-.05-.135-.161-.161l-1.45-.353c-.626-.152-1.08-.625-1.278-1.172a6.576 6.576 0 0 0-.248-.6 1.833 1.833 0 0 1 .074-1.734l.776-1.274c.06-.098.036-.186 0-.228a9.774 9.774 0 0 0-.976-.976c-.042-.036-.131-.06-.228 0l-1.275.776a1.831 1.831 0 0 1-1.733.074 6.88 6.88 0 0 0-.6-.249 1.835 1.835 0 0 1-1.173-1.278l-.351-1.45c-.027-.11-.107-.156-.162-.16a9.63 9.63 0 0 0-1.38 0Z"></path></svg>'
        const settingsLightSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-1.5 0a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path><path d="M12 1c.266 0 .532.009.797.028.763.055 1.345.617 1.512 1.304l.352 1.45c.019.078.09.171.225.221.247.089.49.19.728.302.13.061.246.044.315.002l1.275-.776c.603-.368 1.411-.353 1.99.147.402.349.78.726 1.128 1.129.501.578.515 1.386.147 1.99l-.776 1.274c-.042.069-.058.185.002.315.112.238.213.481.303.728.048.135.142.205.22.225l1.45.352c.687.167 1.249.749 1.303 1.512.038.531.038 1.063 0 1.594-.054.763-.616 1.345-1.303 1.512l-1.45.352c-.078.019-.171.09-.221.225-.089.248-.19.491-.302.728-.061.13-.044.246-.002.315l.776 1.275c.368.603.353 1.411-.147 1.99-.349.402-.726.78-1.129 1.128-.578.501-1.386.515-1.99.147l-1.274-.776c-.069-.042-.185-.058-.314.002a8.606 8.606 0 0 1-.729.303c-.135.048-.205.142-.225.22l-.352 1.45c-.167.687-.749 1.249-1.512 1.303-.531.038-1.063.038-1.594 0-.763-.054-1.345-.616-1.512-1.303l-.352-1.45c-.019-.078-.09-.171-.225-.221a8.138 8.138 0 0 1-.728-.302c-.13-.061-.246-.044-.315-.002l-1.275.776c-.603.368-1.411.353-1.99-.147-.402-.349-.78-.726-1.128-1.129-.501-.578-.515-1.386-.147-1.99l.776-1.274c.042-.069.058-.185-.002-.314a8.606 8.606 0 0 1-.303-.729c-.048-.135-.142-.205-.22-.225l-1.45-.352c-.687-.167-1.249-.749-1.304-1.512a11.158 11.158 0 0 1 0-1.594c.055-.763.617-1.345 1.304-1.512l1.45-.352c.078-.019.171-.09.221-.225.089-.248.19-.491.302-.728.061-.13.044-.246.002-.315l-.776-1.275c-.368-.603-.353-1.411.147-1.99.349-.402.726-.78 1.129-1.128.578-.501 1.386-.515 1.99-.147l1.274.776c.069.042.185.058.315-.002.238-.112.481-.213.728-.303.135-.048.205-.142.225-.22l.352-1.45c.167-.687.749-1.249 1.512-1.304C11.466 1.01 11.732 1 12 1Zm-.69 1.525c-.055.004-.135.05-.161.161l-.353 1.45a1.832 1.832 0 0 1-1.172 1.277 7.147 7.147 0 0 0-.6.249 1.833 1.833 0 0 1-1.734-.074l-1.274-.776c-.098-.06-.186-.036-.228 0a9.774 9.774 0 0 0-.976.976c-.036.042-.06.131 0 .228l.776 1.274c.314.529.342 1.18.074 1.734a7.147 7.147 0 0 0-.249.6 1.831 1.831 0 0 1-1.278 1.173l-1.45.351c-.11.027-.156.107-.16.162a9.63 9.63 0 0 0 0 1.38c.004.055.05.135.161.161l1.45.353a1.832 1.832 0 0 1 1.277 1.172c.074.204.157.404.249.6.268.553.24 1.204-.074 1.733l-.776 1.275c-.06.098-.036.186 0 .228.301.348.628.675.976.976.042.036.131.06.228 0l1.274-.776a1.83 1.83 0 0 1 1.734-.075c.196.093.396.176.6.25a1.831 1.831 0 0 1 1.173 1.278l.351 1.45c.027.11.107.156.162.16a9.63 9.63 0 0 0 1.38 0c.055-.004.135-.05.161-.161l.353-1.45a1.834 1.834 0 0 1 1.172-1.278 6.82 6.82 0 0 0 .6-.248 1.831 1.831 0 0 1 1.733.074l1.275.776c.098.06.186.036.228 0 .348-.301.675-.628.976-.976.036-.042.06-.131 0-.228l-.776-1.275a1.834 1.834 0 0 1-.075-1.733c.093-.196.176-.396.25-.6a1.831 1.831 0 0 1 1.278-1.173l1.45-.351c.11-.027.156-.107.16-.162a9.63 9.63 0 0 0 0-1.38c-.004-.055-.05-.135-.161-.161l-1.45-.353c-.626-.152-1.08-.625-1.278-1.172a6.576 6.576 0 0 0-.248-.6 1.833 1.833 0 0 1 .074-1.734l.776-1.274c.06-.098.036-.186 0-.228a9.774 9.774 0 0 0-.976-.976c-.042-.036-.131-.06-.228 0l-1.275.776a1.831 1.831 0 0 1-1.733.074 6.88 6.88 0 0 0-.6-.249 1.835 1.835 0 0 1-1.173-1.278l-.351-1.45c-.027-.11-.107-.156-.162-.16a9.63 9.63 0 0 0-1.38 0Z"></path></svg>'
        const databaseDarkSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M12 1.25c2.487 0 4.773.402 6.466 1.079.844.337 1.577.758 2.112 1.264.536.507.922 1.151.922 1.907v12.987l-.026.013h.026c0 .756-.386 1.4-.922 1.907-.535.506-1.268.927-2.112 1.264-1.693.677-3.979 1.079-6.466 1.079s-4.774-.402-6.466-1.079c-.844-.337-1.577-.758-2.112-1.264C2.886 19.9 2.5 19.256 2.5 18.5h.026l-.026-.013V5.5c0-.756.386-1.4.922-1.907.535-.506 1.268-.927 2.112-1.264C7.226 1.652 9.513 1.25 12 1.25ZM4 14.371v4.116l-.013.013H4c0 .211.103.487.453.817.351.332.898.666 1.638.962 1.475.589 3.564.971 5.909.971 2.345 0 4.434-.381 5.909-.971.739-.296 1.288-.63 1.638-.962.349-.33.453-.607.453-.817h.013L20 18.487v-4.116a7.85 7.85 0 0 1-1.534.8c-1.693.677-3.979 1.079-6.466 1.079s-4.774-.402-6.466-1.079a7.843 7.843 0 0 1-1.534-.8ZM20 12V7.871a7.85 7.85 0 0 1-1.534.8C16.773 9.348 14.487 9.75 12 9.75s-4.774-.402-6.466-1.079A7.85 7.85 0 0 1 4 7.871V12c0 .21.104.487.453.817.35.332.899.666 1.638.961 1.475.59 3.564.972 5.909.972 2.345 0 4.434-.382 5.909-.972.74-.295 1.287-.629 1.638-.96.35-.33.453-.607.453-.818ZM4 5.5c0 .211.103.487.453.817.351.332.898.666 1.638.962 1.475.589 3.564.971 5.909.971 2.345 0 4.434-.381 5.909-.971.739-.296 1.288-.63 1.638-.962.349-.33.453-.607.453-.817 0-.211-.103-.487-.453-.817-.351-.332-.898-.666-1.638-.962-1.475-.589-3.564-.971-5.909-.971-2.345 0-4.434.381-5.909.971-.739.296-1.288.63-1.638.962C4.104 5.013 4 5.29 4 5.5Z"></path></svg>'
        const databaseLightSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12 1.25c2.487 0 4.773.402 6.466 1.079.844.337 1.577.758 2.112 1.264.536.507.922 1.151.922 1.907v12.987l-.026.013h.026c0 .756-.386 1.4-.922 1.907-.535.506-1.268.927-2.112 1.264-1.693.677-3.979 1.079-6.466 1.079s-4.774-.402-6.466-1.079c-.844-.337-1.577-.758-2.112-1.264C2.886 19.9 2.5 19.256 2.5 18.5h.026l-.026-.013V5.5c0-.756.386-1.4.922-1.907.535-.506 1.268-.927 2.112-1.264C7.226 1.652 9.513 1.25 12 1.25ZM4 14.371v4.116l-.013.013H4c0 .211.103.487.453.817.351.332.898.666 1.638.962 1.475.589 3.564.971 5.909.971 2.345 0 4.434-.381 5.909-.971.739-.296 1.288-.63 1.638-.962.349-.33.453-.607.453-.817h.013L20 18.487v-4.116a7.85 7.85 0 0 1-1.534.8c-1.693.677-3.979 1.079-6.466 1.079s-4.774-.402-6.466-1.079a7.843 7.843 0 0 1-1.534-.8ZM20 12V7.871a7.85 7.85 0 0 1-1.534.8C16.773 9.348 14.487 9.75 12 9.75s-4.774-.402-6.466-1.079A7.85 7.85 0 0 1 4 7.871V12c0 .21.104.487.453.817.35.332.899.666 1.638.961 1.475.59 3.564.972 5.909.972 2.345 0 4.434-.382 5.909-.972.74-.295 1.287-.629 1.638-.96.35-.33.453-.607.453-.818ZM4 5.5c0 .211.103.487.453.817.351.332.898.666 1.638.962 1.475.589 3.564.971 5.909.971 2.345 0 4.434-.381 5.909-.971.739-.296 1.288-.63 1.638-.962.349-.33.453-.607.453-.817 0-.211-.103-.487-.453-.817-.351-.332-.898-.666-1.638-.962-1.475-.589-3.564-.971-5.909-.971-2.345 0-4.434.381-5.909.971-.739.296-1.288.63-1.638.962C4.104 5.013 4 5.29 4 5.5Z"></path></svg>'
        const filterDarkSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M11 18.25a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75Zm-8-12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 6.25Zm13 6a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75ZM8.75 16a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75Z"></path><path fill="white" d="M3 18.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75ZM16.75 10a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75ZM14 6.25a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM11.25 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75Z"></path></svg>'
        const filterLightSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M11 18.25a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75Zm-8-12a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 6.25Zm13 6a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75ZM8.75 16a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75Z"></path><path d="M3 18.25a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75Zm0-6a.75.75 0 0 1 .75-.75h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1-.75-.75ZM16.75 10a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75ZM14 6.25a.75.75 0 0 1 .75-.75h5.5a.75.75 0 0 1 0 1.5h-5.5a.75.75 0 0 1-.75-.75ZM11.25 4a.75.75 0 0 1 .75.75v3a.75.75 0 0 1-1.5 0v-3a.75.75 0 0 1 .75-.75Z"></path></svg>'
        const rflogoDarkSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="fill-white"><path fill="white" data-v-266d6681="" id="path" d="M5,10.2c0-1.9,1.5-3.4,3.4-3.4c1.9,0,3.4,1.5,3.4,3.4c0,0.7-0.6,1.2-1.2,1.2c-0.7,0-1.2-0.6-1.2-1.2 c0-0.5-0.4-0.9-0.9-0.9c-0.5,0-0.9,0.4-0.9,0.9c0,0.7-0.6,1.2-1.2,1.2S5,10.9,5,10.2 M19,15.9c0,0.7-0.6,1.2-1.2,1.2H6.4 c-0.7,0-1.2-0.6-1.2-1.2c0-0.7,0.6-1.2,1.2-1.2h11.5C18.5,14.7,19,15.3,19,15.9 M13.7,10.9c-0.4-0.6-0.2-1.3,0.3-1.7l2.9-1.9 c0.6-0.4,1.3-0.2,1.7,0.3c0.4,0.6,0.2,1.3-0.3,1.7l-2.9,1.9c-0.2,0.1-0.5,0.2-0.7,0.2C14.3,11.5,13.9,11.3,13.7,10.9 M21.5,18.5 c0,0.2-0.1,0.5-0.3,0.6l-2.1,2.1c-0.2,0.2-0.4,0.3-0.6,0.3h-13c-0.2,0-0.5-0.1-0.6-0.3l-2.1-2.1c-0.2-0.2-0.3-0.4-0.3-0.6v-13 c0-0.2,0.1-0.5,0.3-0.6l2.1-2.1C5,2.6,5.2,2.5,5.5,2.5h13c0.2,0,0.5,0.1,0.6,0.3l2.1,2.1c0.2,0.2,0.3,0.4,0.3,0.6V18.5z M23.3,3.4 l-2.8-2.8C20.1,0.2,19.6,0,19,0H5C4.4,0,3.9,0.2,3.4,0.7L0.7,3.4C0.2,3.9,0,4.4,0,5v14c0,0.6,0.2,1.2,0.7,1.6l2.8,2.8 C3.9,23.8,4.4,24,5,24h14c0.6,0,1.2-0.2,1.6-0.7l2.8-2.8c0.4-0.4,0.7-1,0.7-1.6V5C24,4.4,23.8,3.9,23.3,3.4"></path></svg>'
        const rflogoLightSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="fill-white"><path data-v-266d6681="" id="path" d="M5,10.2c0-1.9,1.5-3.4,3.4-3.4c1.9,0,3.4,1.5,3.4,3.4c0,0.7-0.6,1.2-1.2,1.2c-0.7,0-1.2-0.6-1.2-1.2 c0-0.5-0.4-0.9-0.9-0.9c-0.5,0-0.9,0.4-0.9,0.9c0,0.7-0.6,1.2-1.2,1.2S5,10.9,5,10.2 M19,15.9c0,0.7-0.6,1.2-1.2,1.2H6.4 c-0.7,0-1.2-0.6-1.2-1.2c0-0.7,0.6-1.2,1.2-1.2h11.5C18.5,14.7,19,15.3,19,15.9 M13.7,10.9c-0.4-0.6-0.2-1.3,0.3-1.7l2.9-1.9 c0.6-0.4,1.3-0.2,1.7,0.3c0.4,0.6,0.2,1.3-0.3,1.7l-2.9,1.9c-0.2,0.1-0.5,0.2-0.7,0.2C14.3,11.5,13.9,11.3,13.7,10.9 M21.5,18.5 c0,0.2-0.1,0.5-0.3,0.6l-2.1,2.1c-0.2,0.2-0.4,0.3-0.6,0.3h-13c-0.2,0-0.5-0.1-0.6-0.3l-2.1-2.1c-0.2-0.2-0.3-0.4-0.3-0.6v-13 c0-0.2,0.1-0.5,0.3-0.6l2.1-2.1C5,2.6,5.2,2.5,5.5,2.5h13c0.2,0,0.5,0.1,0.6,0.3l2.1,2.1c0.2,0.2,0.3,0.4,0.3,0.6V18.5z M23.3,3.4 l-2.8-2.8C20.1,0.2,19.6,0,19,0H5C4.4,0,3.9,0.2,3.4,0.7L0.7,3.4C0.2,3.9,0,4.4,0,5v14c0,0.6,0.2,1.2,0.7,1.6l2.8,2.8 C3.9,23.8,4.4,24,5,24h14c0.6,0,1.2-0.2,1.6-0.7l2.8-2.8c0.4-0.4,0.7-1,0.7-1.6V5C24,4.4,23.8,3.9,23.3,3.4"></path></svg>'
        const clockDarkSVG = `<svg class="mb-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path fill="white" d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"></path></svg>`
        const clockLightSVG = `<svg class="mb-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" width="16" height="16"><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"></path></svg>`
        const sunSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14Zm0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 1 0 0 11Zm-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0ZM3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06ZM12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0ZM4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12Zm8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20Zm12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12Zm-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061Zm2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0Z"></path></svg>`
        const moonSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M14.768 3.96v.001l-.002-.005a9.08 9.08 0 0 0-.218-.779c-.13-.394.21-.8.602-.67.29.096.575.205.855.328l.01.005A10.002 10.002 0 0 1 12 22a10.002 10.002 0 0 1-9.162-5.985l-.004-.01a9.722 9.722 0 0 1-.329-.855c-.13-.392.277-.732.67-.602.257.084.517.157.78.218l.004.002A9 9 0 0 0 14.999 6a9.09 9.09 0 0 0-.231-2.04ZM16.5 6c0 5.799-4.701 10.5-10.5 10.5-.426 0-.847-.026-1.26-.075A8.5 8.5 0 1 0 16.425 4.74c.05.413.075.833.075 1.259Z"></path></svg>`
        const customizeViewDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-dashboard-icon lucide-layout-dashboard"><rect style="stroke: white;" width="7" height="9" x="3" y="3" rx="1"/><rect style="stroke: white;" width="7" height="5" x="14" y="3" rx="1"/><rect style="stroke: white;" width="7" height="9" x="14" y="12" rx="    1"/><rect style="stroke: white;" width="7" height="5" x="3" y="16" rx="1"/></svg>`
        const customizeViewLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-layout-dashboard-icon lucide-layout-dashboard"><rect style="stroke: black;" width="7" height="9" x="3" y="3" rx="1"/><rect style="stroke: black;" width="7" height="5" x="14" y="3" rx="1"/><rect style="stroke: black;" width="7" height="9" x="14" y="12" rx="1"/><rect style="stroke: black;" width="7" height="5" x="3" y="16" rx="1"/></svg>`
        const saveDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save-icon lucide-save"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"/><path d="M7 3v4a1 1 0 0 0 1 1h7"/></svg>`
        const saveLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-save-icon lucide-save"><path d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z"/><path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7"/><path d="M7 3v4a1 1 0 0 0 1 1h7"/></svg>`
        const bugDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M7.72.22a.75.75 0 0 1 1.06 0l1.204 1.203A4.98 4.98 0 0 1 12 1c.717 0 1.4.151 2.016.423L15.22.22a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-.971.972A4.991 4.991 0 0 1 17 6v1.104a2.755 2.755 0 0 1 1.917 1.974l1.998-.999a.75.75 0 0 1 .67 1.342L19 10.714V13.5l3.25.003a.75.75 0 0 1 0 1.5L19 15.001V16c0 .568-.068 1.134-.204 1.686l.04.018 2.75 1.375a.75.75 0 1 1-.671 1.342l-2.638-1.319A6.998 6.998 0 0 1 12 23a6.998 6.998 0 0 1-6.197-3.742l-2.758 1.181a.752.752 0 0 1-1.064-.776.752.752 0 0 1 .474-.602l2.795-1.199A6.976 6.976 0 0 1 5 16v-.996H1.75a.75.75 0 0 1 0-1.5H5v-2.79L2.415 9.42a.75.75 0 0 1 .67-1.342l1.998.999A2.756 2.756 0 0 1 7 7.104V6a4.99 4.99 0 0 1 1.69-3.748l-.97-.972a.75.75 0 0 1 0-1.06ZM6.5 9.75V16a5.5 5.5 0 1 0 11 0V9.75c0-.69-.56-1.25-1.25-1.25h-8.5c-.69 0-1.25.56-1.25 1.25ZM8.5 7h7V6a3.5 3.5 0 1 0-7 0Z"></path></svg>`
        const bugLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="black" d="M7.72.22a.75.75 0 0 1 1.06 0l1.204 1.203A4.98 4.98 0 0 1 12 1c.717 0 1.4.151 2.016.423L15.22.22a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-.971.972A4.991 4.991 0 0 1 17 6v1.104a2.755 2.755 0 0 1 1.917 1.974l1.998-.999a.75.75 0 0 1 .67 1.342L19 10.714V13.5l3.25.003a.75.75 0 0 1 0 1.5L19 15.001V16c0 .568-.068 1.134-.204 1.686l.04.018 2.75 1.375a.75.75 0 1 1-.671 1.342l-2.638-1.319A6.998 6.998 0 0 1 12 23a6.998 6.998 0 0 1-6.197-3.742l-2.758 1.181a.752.752 0 0 1-1.064-.776.752.752 0 0 1 .474-.602l2.795-1.199A6.976 6.976 0 0 1 5 16v-.996H1.75a.75.75 0 0 1 0-1.5H5v-2.79L2.415 9.42a.75.75 0 0 1 .67-1.342l1.998.999A2.756 2.756 0 0 1 7 7.104V6a4.99 4.99 0 0 1 1.69-3.748l-.97-.972a.75.75 0 0 1 0-1.06ZM6.5 9.75V16a5.5 5.5 0 1 0 11 0V9.75c0-.69-.56-1.25-1.25-1.25h-8.5c-.69 0-1.25.56-1.25 1.25ZM8.5 7h7V6a3.5 3.5 0 1 0-7 0Z"></path></svg>`
        const informationDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M13 7.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-3 3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v4.25h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75V12h-.75a.75.75 0 0 1-.75-.75Z"></path><path fill="white" d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"></path></svg>`
        const informationLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M13 7.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-3 3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v4.25h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75V12h-.75a.75.75 0 0 1-.75-.75Z"></path><path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"></path></svg>`
        const percentageDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-percent-icon lucide-square-percent"><rect width="18" height="18" x="3" y="3" rx="2" /><path d="m15 9-6 6" /><path d="M9 9h.01" /><path d="M15 15h.01" /></svg>`;
        const percentageLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-square-percent-icon lucide-square-percent"><rect width="18" height="18" x="3" y="3" rx="2" /><path d="m15 9-6 6" /><path d="M9 9h.01" /><path d="M15 15h.01" /></svg>`;
        const barDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-column-big-icon lucide-chart-column-big"><path d="M3 3v16a2 2 0 0 0 2 2h16" /><rect x="15" y="5" width="4" height="12" rx="1" /><rect x="7" y="8" width="4" height="9" rx="1" /></svg>`;
        const barLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-column-big-icon lucide-chart-column-big"><path d="M3 3v16a2 2 0 0 0 2 2h16" /><rect x="15" y="5" width="4" height="12" rx="1" /><rect x="7" y="8" width="4" height="9" rx="1" /></svg>`;
        const lineDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-line-icon lucide-chart-line"><path d="M3 3v16a2 2 0 0 0 2 2h16" /><path d="m19 9-5 5-4-4-3 3" /></svg>`;
        const lineLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-line-icon lucide-chart-line"><path d="M3 3v16a2 2 0 0 0 2 2h16" /><path d="m19 9-5 5-4-4-3 3" /></svg>`;
        const pieDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-pie-icon lucide-chart-pie"><path d="M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z" /><path d="M21.21 15.89A10 10 0 1 1 8 2.83" /></svg>`;
        const pieLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-pie-icon lucide-chart-pie"><path d="M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z" /><path d="M21.21 15.89A10 10 0 1 1 8 2.83" /></svg>`;
        const statsDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-ordered-icon lucide-list-ordered"><path d="M10 12h11" /><path d="M10 18h11" /><path d="M10 6h11" /><path d="M4 10h2" /><path d="M4 6h1v4" /><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1" /></svg>`;
        const statsLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list-ordered-icon lucide-list-ordered"><path d="M10 12h11" /><path d="M10 18h11" /><path d="M10 6h11" /><path d="M4 10h2" /><path d="M4 6h1v4" /><path d="M6 18H4c0-1 2-2 2-3s-1-1.5-2-1" /></svg>`;
        const boxplotDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-candlestick-icon lucide-chart-candlestick"><path d="M9 5v4"/><rect width="4" height="6" x="7" y="9" rx="1"/><path d="M9 15v2"/><path d="M17 3v2"/><rect width="4" height="8" x="15" y="5" rx="1"/><path d="M17 13v3"/><path d="M3 3v16a2 2 0 0 0 2 2h16"/></svg>`;
        const boxplotLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-candlestick-icon lucide-chart-candlestick"><path d="M9 5v4"/><rect width="4" height="6" x="7" y="9" rx="1"/><path d="M9 15v2"/><path d="M17 3v2"/><rect width="4" height="8" x="15" y="5" rx="1"/><path d="M17 13v3"/><path d="M3 3v16a2 2 0 0 0 2 2h16"/></svg>`;
        const heatmapDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-scatter-icon lucide-chart-scatter"><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"/><circle cx="18.5" cy="5.5" r=".5" fill="currentColor"/><circle cx="11.5" cy="11.5" r=".5" fill="currentColor"/><circle cx="7.5" cy="16.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="14.5" r=".5" fill="currentColor"/><path d="M3 3v16a2 2 0 0 0 2 2h16"/></svg>`;
        const heatmapLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-scatter-icon lucide-chart-scatter"><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"/><circle cx="18.5" cy="5.5" r=".5" fill="currentColor"/><circle cx="11.5" cy="11.5" r=".5" fill="currentColor"/><circle cx="7.5" cy="16.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="14.5" r=".5" fill="currentColor"/><path d="M3 3v16a2 2 0 0 0 2 2h16"/></svg>`;
        const timelineDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-bar-stacked-icon lucide-chart-bar-stacked"><path d="M11 13v4"/><path d="M15 5v4"/><path d="M3 3v16a2 2 0 0 0 2 2h16"/><rect x="7" y="13" width="9" height="4" rx="1"/><rect x="7" y="5" width="12" height="4" rx="1"/></svg>`;
        const timelineLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chart-bar-stacked-icon lucide-chart-bar-stacked"><path d="M11 13v4"/><path d="M15 5v4"/><path d="M3 3v16a2 2 0 0 0 2 2h16"/><rect x="7" y="13" width="9" height="4" rx="1"/><rect x="7" y="5" width="12" height="4" rx="1"/></svg>`;
        const radarDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-radar-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2v10l6 6"/></svg>`;
        const radarLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" class="lucide lucide-radar-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M12 2v10l6 6"/></svg>`;
        const fullscreenDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize-icon lucide-maximize"><path d="M8 3H5a2 2 0 0 0-2 2v3" /><path d="M21 8V5a2 2 0 0 0-2-2h-3" /><path d="M3 16v3a2 2 0 0 0 2 2h3" /><path d="M16 21h3a2 2 0 0 0 2-2v-3" /></svg>`;
        const fullscreenLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-maximize-icon lucide-maximize"><path d="M8 3H5a2 2 0 0 0-2 2v3" /><path d="M21 8V5a2 2 0 0 0-2-2h-3" /><path d="M3 16v3a2 2 0 0 0 2 2h3" /><path d="M16 21h3a2 2 0 0 0 2-2v-3" /></svg>`;
        const closeDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-minimize-icon lucide-minimize"><path d="M8 3v3a2 2 0 0 1-2 2H3"/><path d="M21 8h-3a2 2 0 0 1-2-2V3"/><path d="M3 16h3a2 2 0 0 1 2 2v3"/><path d="M16 21v-3a2 2 0 0 1 2-2h3"/></svg>`;
        const closeLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-minimize-icon lucide-minimize"><path d="M8 3v3a2 2 0 0 1-2 2H3"/><path d="M21 8h-3a2 2 0 0 1-2-2V3"/><path d="M3 16h3a2 2 0 0 1 2 2v3"/><path d="M16 21v-3a2 2 0 0 1 2-2h3"/></svg>`;
        const eyeDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye-icon lucide-eye"><path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"/><circle cx="12" cy="12" r="3"/></svg>`
        const eyeLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye-icon lucide-eye"><path d="M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"/><circle cx="12" cy="12" r="3"/></svg>`
        const eyeOffDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye-off-icon lucide-eye-off"><path d="M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"/><path d="M14.084 14.158a3 3 0 0 1-4.242-4.242"/><path d="M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"/><path d="m2 2 20 20"/></svg>`
        const eyeOffLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-eye-off-icon lucide-eye-off"><path d="M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"/><path d="M14.084 14.158a3 3 0 0 1-4.242-4.242"/><path d="M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"/><path d="m2 2 20 20"/></svg>`
        const moveDownDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down-icon lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>`
        const moveDownLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down-icon lucide-chevron-down"><path d="m6 9 6 6 6-6"/></svg>`
        const moveUpDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up-icon lucide-chevron-up"><path d="m18 15-6-6-6 6"/></svg>`
        const moveUpLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-up-icon lucide-chevron-up"><path d="m18 15-6-6-6 6"/></svg>`

        // colors
        const passedBackgroundBorderColor = "#97bd61";
        const passedBackgroundColor = "rgba(151, 189, 97, 0.7)";
        const skippedBackgroundBorderColor = "#fed84f";
        const skippedBackgroundColor = "rgba(254, 216, 79, 0.7)";
        const failedBackgroundBorderColor = "#ce3e01";
        const failedBackgroundColor = "rgba(206, 62, 1, 0.7)";
        const greyBackgroundBorderColor = "#0f172a";
        const greyBackgroundColor = "rgba(33, 37, 41, 0.7)";
        const graphFontSize = 12;

        // base bar config
        const barConfig = {
            borderSkipped: false,
            borderRadius: (context) => {
                const { chart, parsed, index, dataset } = context;
                const barHeight = chart.scales.y.getPixelForValue(0) - chart.scales.y.getPixelForValue(parsed.y);
                const radius = Math.min(settings.show.rounding, Math.abs(barHeight / 2));
                return {
                    topLeft: radius,
                    topRight: radius,
                    bottomLeft: radius,
                    bottomRight: radius
                };
            }
        };
        const passedConfig = {
            backgroundColor: passedBackgroundColor,
            borderColor: passedBackgroundBorderColor,
            ...barConfig,
        }
        const failedConfig = {
            backgroundColor: failedBackgroundColor,
            borderColor: failedBackgroundBorderColor,
            ...barConfig,
        }
        const skippedConfig = {
            backgroundColor: skippedBackgroundColor,
            borderColor: skippedBackgroundBorderColor,
            ...barConfig,
        }
        // base line config
        const lineConfig = {
            tension: 0.1,
            pointRadius: 4,
            pointHoverRadius: 6
        }
        // data label background rectangle config
        const dataLabelConfig = {
            color: "#eee",
            backgroundColor: function (context) {
                return "rgba(0, 0, 0, 0.6)";
            },
            borderRadius: 4,
            padding: 3,
            align: "center",
            anchor: "center",
            font: {
                size: graphFontSize,
            },
        }

        // prepare input data
        const runs = decode_and_decompress("placeholder_runs").sort((a, b) => new Date(a.run_start).getTime() - new Date(b.run_start).getTime());
        const suites = decode_and_decompress("placeholder_suites").sort((a, b) => new Date(a.run_start).getTime() - new Date(b.run_start).getTime());
        const tests = decode_and_decompress("placeholder_tests").sort((a, b) => new Date(a.run_start).getTime() - new Date(b.run_start).getTime());
        const keywords = decode_and_decompress("placeholder_keywords").sort((a, b) => new Date(a.run_start).getTime() - new Date(b.run_start).getTime());

        function decode_and_decompress(base64Str) {
            const compressedData = Uint8Array.from(atob(base64Str), c => c.charCodeAt(0));
            const decompressedData = pako.inflate(compressedData, { to: 'string' });
            return JSON.parse(decompressedData);
        }

        var message_config = '"placeholder_message_config"'
        var json_config = "placeholder_json_config"
        var admin_json_config = "placeholder_admin_json_config"
        var filteredAmount = "placeholder_amount"
        var filteredAmountDefault = 0
        const use_logs = "placeholder_use_logs"
        const server = "placeholder_server"
        if (!message_config.includes("placeholder_message_config")) { message_config = JSON.parse(message_config) }

        // filtered data vars
        var filteredRuns;
        var filteredSuites;
        var filteredTests;
        var filteredKeywords;

        // vars to keep track of grids
        var gridRun
        var gridSuite
        var gridTest
        var gridKeyword
        var gridCompare
        var gridEditMode = false; // used to check how the graphs should be shown when rendered

        // global vars for switching between overview and dashboard
        var overviewGraphs = [];
        var selectedRunSetting = '';
        var selectedTagSetting = '';

        // some global vars for various functionalities
        var showingRunTags = false; // used to keep track if the runtags popup is showing and determine if it should be closed when clicked outside
        var inFullscreen = false; // used to keep track if fullscreen view is being shown
        var inFullscreenGraph = ""; // used to keep track of the graph being shown in fullscreen
        var heatMapHourAll = true; // used to keep track of the heatmap setting, is it set to an hour or all
        var previousFolder = ""; // used to update the suite folder donut to the previous folder with the button
        var lastScrollY = 0; // used to scroll back to where you were previously
        var ignoreSkips = false; // test most flaky graph
        var ignoreSkipsRecent = false; // test recent most flaky graph
        var onlyFailedFolders = false; // suite folder donut

        // add datalabels plugin
        Chart.register(ChartDataLabels);

        const graphMetadata = [
            {
                key: "runStatistics",
                label: "Run Statistics",
                defaultType: "percentages",
                viewOptions: ["Percentages", "Line", "Amount"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Statistics</h6>
                    <div class="graph-controls">
                        <a class="percentage-graph information" id="runStatisticsGraphPercentages"></a>
                        <a class="bar-graph information" id="runStatisticsGraphAmount"></a>
                        <a class="line-graph information" id="runStatisticsGraphLine"></a>
                        <a class="fullscreen-graph information" id="runStatisticsFullscreen"></a>
                        <a class="close-graph information" id="runStatisticsClose" hidden></a>
                        <a class="shown-graph information" id="runStatisticsShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="runStatisticsHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="runStatisticsGraph"></canvas>
                </div>`,
            },
            {
                key: "runDonut",
                label: "Run Donut",
                defaultType: "donut",
                viewOptions: ["Donut"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Donut</h6>
                    <div class="graph-controls">
                        <a class="pie-graph information" id="runDonutGraphDonut"></a>
                        <a class="fullscreen-graph information" id="runDonutFullscreen"></a>
                        <a class="close-graph information" id="runDonutClose" hidden></a>
                        <a class="shown-graph information" id="runDonutShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="runDonutHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body" style="height:90%;">
                    <div class="row w-100 h-100">
                        <div class="col-md-6 w-50 h-100">
                            <canvas id="runDonutGraph"></canvas>
                        </div>
                        <div class="col-md-6 w-50 h-100">
                            <canvas id="runDonutTotalGraph"></canvas>
                        </div>
                    </div>
                </div>`,
            },
            {
                key: "runDonutTotal",
                label: "Run Donut Total",
                defaultType: "donut",
                viewOptions: ["Donut"],
                hasFullscreenButton: false,
                information: null,
            },
            {
                key: "runStats",
                label: "Run Stats",
                defaultType: "stats",
                viewOptions: ["Stats"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Stats</h6>
                    <div class="graph-controls">
                        <a class="stats-graph information" id="runStatsGraphStats"></a>
                        <a class="fullscreen-graph information" id="runStatsFullscreen"></a>
                        <a class="close-graph information" id="runStatsClose" hidden></a>
                        <a class="shown-graph information" id="runStatsShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="runStatsHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div class="w-100 h-100">
                        <div class="d-flex flex-column justify-content-between h-100">
                            <div class="row text-center mb-4">
                                <div class="col">
                                    <div class="stat-label">Executed Runs</div>
                                    <div class="stat-value blue-text" id="totalRuns"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Executed Suites</div>
                                    <div class="stat-value blue-text" id="totalSuites"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Executed Tests</div>
                                    <div class="stat-value blue-text" id="totalTests"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Executed Keywords</div>
                                    <div class="stat-value blue-text" id="totalKeywords"></div>
                                </div>
                            </div>
                            <div class="row text-center mb-4">
                                <div class="col">
                                    <div class="stat-label">Unique Tests</div>
                                    <div class="stat-value white-text" id="totalUniqueTests"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Passed</div>
                                    <div class="stat-value green-text" id="totalPassed"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Failed</div>
                                    <div class="stat-value red-text" id="totalFailed"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Skipped</div>
                                    <div class="stat-value yellow-text" id="totalSkipped"></div>
                                </div>
                            </div>
                            <div class="row text-center">
                                <div class="col">
                                    <div class="stat-label">Total Run Time</div>
                                    <div class="stat-value white-text" id="totalRunTime"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Avg Run Time</div>
                                    <div class="stat-value white-text" id="averageRunTime"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Avg Test Time</div>
                                    <div class="stat-value white-text" id="averageTestTime"></div>
                                </div>
                                <div class="col">
                                    <div class="stat-label">Avg Run Pass Rate</div>
                                    <div class="stat-value green-text" id="averagePassRate"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`,
            },
            {
                key: "runDuration",
                label: "Run Duration",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: ` <div class="graph-header">
                    <h6>Duration</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="runDurationGraphBar"></a>
                        <a class="line-graph information" id="runDurationGraphLine"></a>
                        <a class="fullscreen-graph information" id="runDurationFullscreen"></a>
                        <a class="close-graph information" id="runDurationClose" hidden></a>
                        <a class="shown-graph information" id="runDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="runDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="runDurationGraph"></canvas>
                </div>`,
            },
            {
                key: "runHeatmap",
                label: "Run Heatmap",
                defaultType: "heatmap",
                viewOptions: ["Heatmap"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Heatmap</h6>
                    <div class="graph-controls">
                        <div class="btn-group">
                            <label class="form-check-label" for="heatMapTestType">Status</label>
                        </div>
                        <div class="btn-group">
                            <select class="form-select form-select-sm" id="heatMapTestType">
                                <option value="All">All</option>
                                <option value="Passed">Passed</option>
                                <option value="Failed">Failed</option>
                                <option value="Skipped">Skipped</option>
                            </select>
                        </div>
                        <div class="btn-group">
                            <label class="form-check-label" for="heatMapHour">Hour</label>
                        </div>
                        <div class="btn-group">
                            <select class="form-select form-select-sm" id="heatMapHour">
                                <option value="All">All</option>
                                <option value="0">00:00</option>
                                <option value="1">01:00</option>
                                <option value="2">02:00</option>
                                <option value="3">03:00</option>
                                <option value="4">04:00</option>
                                <option value="5">05:00</option>
                                <option value="6">06:00</option>
                                <option value="7">07:00</option>
                                <option value="8">08:00</option>
                                <option value="9">09:00</option>
                                <option value="10">10:00</option>
                                <option value="11">11:00</option>
                                <option value="12">12:00</option>
                                <option value="13">13:00</option>
                                <option value="14">14:00</option>
                                <option value="15">15:00</option>
                                <option value="16">16:00</option>
                                <option value="17">17:00</option>
                                <option value="18">18:00</option>
                                <option value="19">19:00</option>
                                <option value="20">20:00</option>
                                <option value="21">21:00</option>
                                <option value="22">22:00</option>
                                <option value="23">23:00</option>
                            </select>
                        </div>
                        <a class="heatmap-graph information" id="runHeatmapGraphHeatmap"></a>
                        <a class="fullscreen-graph information" id="runHeatmapFullscreen"></a>
                        <a class="close-graph information" id="runHeatmapClose" hidden></a>
                        <a class="shown-graph information" id="runHeatmapShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="runHeatmapHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="runHeatmapGraph"></canvas>
                </div>`,
            },
            {
                key: "suiteFolderDonut",
                label: "Suite Folder Donut",
                defaultType: "donut",
                viewOptions: ["Donut"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Folders</h6>
                    <div class="graph-controls">
                        <div class="btn-group">
                            <label class="form-check-label" for="onlyFailedFolders">Only Failed</label>
                        </div>
                        <div class="btn-group form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="onlyFailedFolders">
                        </div>
                        <button class="btn btn-outline-light btn-sm" id="suiteFolderDonutGoUp">Go Up</button>
                        <a class="pie-graph information" id="suiteFolderDonutGraphDonut"></a>
                        <a class="fullscreen-graph information" id="suiteFolderDonutFullscreen"></a>
                        <a class="close-graph information" id="suiteFolderDonutClose" hidden></a>
                        <a class="shown-graph information" id="suiteFolderDonutShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="suiteFolderDonutHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div class="row w-100 h-100">
                        <div class="col-md-6 w-50 h-100">
                            <canvas id="suiteFolderDonutGraph" class="w-100 h-100"></canvas>
                        </div>
                        <div class="col-md-6 w-50 h-100">
                            <canvas id="suiteFolderFailDonutGraph" class="w-100 h-100"></canvas>
                        </div>
                    </div>
                </div>`,
            },
            {
                key: "suiteFolderFailDonut",
                label: "Suite Folder Fail Donut",
                defaultType: "donut",
                viewOptions: ["Donut"],
                hasFullscreenButton: false,
                information: null,
            },
            {
                key: "suiteStatistics",
                label: "Suite Statistics",
                defaultType: "percentages",
                viewOptions: ["Percentages", "Line", "Amount"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Statistics</h6>
                    <div class="graph-controls">
                        <a class="percentage-graph information" id="suiteStatisticsGraphPercentages"></a>
                        <a class="bar-graph information" id="suiteStatisticsGraphAmount"></a>
                        <a class="line-graph information" id="suiteStatisticsGraphLine"></a>
                        <a class="fullscreen-graph information" id="suiteStatisticsFullscreen"></a>
                        <a class="close-graph information" id="suiteStatisticsClose" hidden></a>
                        <a class="shown-graph information" id="suiteStatisticsShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="suiteStatisticsHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="suiteStatisticsGraph"></canvas>
                </div>`,
            },
            {
                key: "suiteDuration",
                label: "Suite Duration",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Duration</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="suiteDurationGraphBar"></a>
                        <a class="line-graph information" id="suiteDurationGraphLine"></a>
                        <a class="fullscreen-graph information" id="suiteDurationFullscreen"></a>
                        <a class="close-graph information" id="suiteDurationClose" hidden></a>
                        <a class="shown-graph information" id="suiteDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="suiteDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="suiteDurationGraph"></canvas>
                </div>`,
            },
            {
                key: "suiteMostFailed",
                label: "Suite Most Failed",
                defaultType: "bar",
                viewOptions: ["Bar", "Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Most Failed</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="suiteMostFailedGraphBar"></a>
                        <a class="timeline-graph information" id="suiteMostFailedGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="suiteMostFailedFullscreen"></a>
                        <a class="close-graph information" id="suiteMostFailedClose" hidden></a>
                        <a class="shown-graph information" id="suiteMostFailedShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="suiteMostFailedHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="suiteMostFailedVertical" class="w-100 vertical">
                        <canvas id="suiteMostFailedGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "testStatistics",
                label: "Test Statistics",
                defaultType: "timeline",
                viewOptions: ["Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Statistics</h6>
                    <div class="graph-controls">
                        <div class="btn-group">
                            <label class="form-check-label" for="testOnlyChanges">Only Changes</label>
                        </div>
                        <div class="btn-group form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="testOnlyChanges">
                        </div>
                        <a class="timeline-graph information" id="testStatisticsGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="testStatisticsFullscreen"></a>
                        <a class="close-graph information" id="testStatisticsClose" hidden></a>
                        <a class="shown-graph information" id="testStatisticsShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testStatisticsHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="testStatisticsVertical" class="w-100 vertical">
                        <canvas id="testStatisticsGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "testDuration",
                label: "Test Duration",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Duration</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="testDurationGraphBar"></a>
                        <a class="line-graph information" id="testDurationGraphLine"></a>
                        <a class="fullscreen-graph information" id="testDurationFullscreen"></a>
                        <a class="close-graph information" id="testDurationClose" hidden></a>
                        <a class="shown-graph information" id="testDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="testDurationGraph"></canvas>
                </div>`,
            },
            {
                key: "testDurationDeviation",
                label: "Test Duration Deviation",
                defaultType: "bar",
                viewOptions: ["Bar"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Duration Deviation</h6>
                    <div class="graph-controls">
                        <a class="boxplot-graph information" id="testDurationDeviationGraphBar"></a>
                        <a class="fullscreen-graph information" id="testDurationDeviationFullscreen"></a>
                        <a class="close-graph information" id="testDurationDeviationClose" hidden></a>
                        <a class="shown-graph information" id="testDurationDeviationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testDurationDeviationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="testDurationDeviationGraph"></canvas>
                </div>`,
            },
            {
                key: "testMessages",
                label: "Test Messages",
                defaultType: "timeline",
                viewOptions: ["Bar", "Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Messages</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="testMessagesGraphBar"></a>
                        <a class="timeline-graph information" id="testMessagesGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="testMessagesFullscreen"></a>
                        <a class="close-graph information" id="testMessagesClose" hidden></a>
                        <a class="shown-graph information" id="testMessagesShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testMessagesHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="testMessagesVertical" class="w-100 vertical">
                        <canvas id="testMessagesGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "testMostFlaky",
                label: "Test Most Flaky",
                defaultType: "timeline",
                viewOptions: ["Bar", "Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Most Flaky</h6>
                    <div class="graph-controls">
                        <div class="btn-group">
                            <label class="form-check-label" for="ignoreSkips">Ignore Skips</label>
                        </div>
                        <div class="btn-group form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="ignoreSkips">
                        </div>
                        <a class="bar-graph information" id="testMostFlakyGraphBar"></a>
                        <a class="timeline-graph information" id="testMostFlakyGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="testMostFlakyFullscreen"></a>
                        <a class="close-graph information" id="testMostFlakyClose" hidden></a>
                        <a class="shown-graph information" id="testMostFlakyShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testMostFlakyHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="testMostFlakyVertical" class="w-100 vertical">
                        <canvas id="testMostFlakyGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "testRecentMostFlaky",
                label: "Test Recent Most Flaky",
                defaultType: "timeline",
                viewOptions: ["Bar", "Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Recent Most Flaky</h6>
                    <div class="graph-controls">
                        <div class="btn-group">
                            <label class="form-check-label" for="ignoreSkipsRecent">Ignore Skips</label>
                        </div>
                        <div class="btn-group form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="ignoreSkipsRecent">
                        </div>
                        <a class="bar-graph information" id="testRecentMostFlakyGraphBar"></a>
                        <a class="timeline-graph information" id="testRecentMostFlakyGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="testRecentMostFlakyFullscreen"></a>
                        <a class="close-graph information" id="testRecentMostFlakyClose" hidden></a>
                        <a class="shown-graph information" id="testRecentMostFlakyShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testRecentMostFlakyHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="testRecentMostFlakyVertical" class="w-100 vertical">
                        <canvas id="testRecentMostFlakyGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "testMostFailed",
                label: "Test Most Failed",
                defaultType: "timeline",
                viewOptions: ["Bar", "Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Most Failed</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="testMostFailedGraphBar"></a>
                        <a class="timeline-graph information" id="testMostFailedGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="testMostFailedFullscreen"></a>
                        <a class="close-graph information" id="testMostFailedClose" hidden></a>
                        <a class="shown-graph information" id="testMostFailedShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testMostFailedHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="testMostFailedVertical" class="w-100 vertical">
                        <canvas id="testMostFailedGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "testRecentMostFailed",
                label: "Test Recent Most Failed",
                defaultType: "timeline",
                viewOptions: ["Bar", "Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Recent Most Failed</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="testRecentMostFailedGraphBar"></a>
                        <a class="timeline-graph information" id="testRecentMostFailedGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="testRecentMostFailedFullscreen"></a>
                        <a class="close-graph information" id="testRecentMostFailedClose" hidden></a>
                        <a class="shown-graph information" id="testRecentMostFailedShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="testRecentMostFailedHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="testRecentMostFailedVertical" class="w-100 vertical">
                        <canvas id="testRecentMostFailedGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "keywordStatistics",
                label: "Keyword Statistics",
                defaultType: "percentages",
                viewOptions: ["Percentages", "Line", "Amount"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Statistics</h6>
                    <div class="graph-controls">
                        <a class="percentage-graph information" id="keywordStatisticsGraphPercentages"></a>
                        <a class="bar-graph information" id="keywordStatisticsGraphAmount"></a>
                        <a class="line-graph information" id="keywordStatisticsGraphLine"></a>
                        <a class="fullscreen-graph information" id="keywordStatisticsFullscreen"></a>
                        <a class="close-graph information" id="keywordStatisticsClose" hidden></a>
                        <a class="shown-graph information" id="keywordStatisticsShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="keywordStatisticsHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="keywordStatisticsGraph"></canvas>
                </div>`,
            },
            {
                key: "keywordTimesRun",
                label: "Keyword Times Run",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Times Run</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="keywordTimesRunGraphBar"></a>
                        <a class="line-graph information" id="keywordTimesRunGraphLine"></a>
                        <a class="fullscreen-graph information" id="keywordTimesRunFullscreen"></a>
                        <a class="close-graph information" id="keywordTimesRunClose" hidden></a>
                        <a class="shown-graph information" id="keywordTimesRunShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="keywordTimesRunHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="keywordTimesRunGraph"></canvas>
                </div>`,
            },
            {
                key: "keywordTotalDuration",
                label: "Keyword Total Duration",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Total Duration</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="keywordTotalDurationGraphBar"></a>
                        <a class="line-graph information" id="keywordTotalDurationGraphLine"></a>
                        <a class="fullscreen-graph information" id="keywordTotalDurationFullscreen"></a>
                        <a class="close-graph information" id="keywordTotalDurationClose" hidden></a>
                        <a class="shown-graph information" id="keywordTotalDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="keywordTotalDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="keywordTotalDurationGraph"></canvas>
                </div>`,
            },
            {
                key: "keywordAverageDuration",
                label: "Keyword Average Duration",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Average Duration</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="keywordAverageDurationGraphBar"></a>
                        <a class="line-graph information" id="keywordAverageDurationGraphLine"></a>
                        <a class="fullscreen-graph information" id="keywordAverageDurationFullscreen"></a>
                        <a class="close-graph information" id="keywordAverageDurationClose" hidden></a>
                        <a class="shown-graph information" id="keywordAverageDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="keywordAverageDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="keywordAverageDurationGraph"></canvas>
                </div>`,
            },
            {
                key: "keywordMinDuration",
                label: "Keyword Min Duration",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Min Duration</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="keywordMinDurationGraphBar"></a>
                        <a class="line-graph information" id="keywordMinDurationGraphLine"></a>
                        <a class="fullscreen-graph information" id="keywordMinDurationFullscreen"></a>
                        <a class="close-graph information" id="keywordMinDurationClose" hidden></a>
                        <a class="shown-graph information" id="keywordMinDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="keywordMinDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="keywordMinDurationGraph"></canvas>
                </div>`,
            },
            {
                key: "keywordMaxDuration",
                label: "Keyword Max Duration",
                defaultType: "line",
                viewOptions: ["Bar", "Line"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Max Duration</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="keywordMaxDurationGraphBar"></a>
                        <a class="line-graph information" id="keywordMaxDurationGraphLine"></a>
                        <a class="fullscreen-graph information" id="keywordMaxDurationFullscreen"></a>
                        <a class="close-graph information" id="keywordMaxDurationClose" hidden></a>
                        <a class="shown-graph information" id="keywordMaxDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="keywordMaxDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="keywordMaxDurationGraph"></canvas>
                </div>>`,
            },
            {
                key: "keywordMostFailed",
                label: "Keyword Most Failed",
                defaultType: "timeline",
                viewOptions: ["Bar", "Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Most Failed</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="keywordMostFailedGraphBar"></a>
                        <a class="timeline-graph information" id="keywordMostFailedGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="keywordMostFailedFullscreen"></a>
                        <a class="close-graph information" id="keywordMostFailedClose" hidden></a>
                        <a class="shown-graph information" id="keywordMostFailedShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="keywordMostFailedHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="keywordMostFailedVertical" class="w-100 vertical">
                        <canvas id="keywordMostFailedGraph"></canvas>
                    </div
                </div>`,
            },
            {
                key: "compareStatistics",
                label: "Compare Statistics",
                defaultType: "bar",
                viewOptions: ["Bar"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Statistics</h6>
                    <div class="graph-controls">
                        <a class="bar-graph information" id="compareStatisticsGraphBar"></a>
                        <a class="fullscreen-graph information" id="compareStatisticsFullscreen"></a>
                        <a class="close-graph information" id="compareStatisticsClose" hidden></a>
                        <a class="shown-graph information" id="compareStatisticsShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="compareStatisticsHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="compareStatisticsGraph"></canvas>
                </div>`,
            },
            {
                key: "compareSuiteDuration",
                label: "Compare Suite Duration",
                defaultType: "radar",
                viewOptions: ["Radar"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Suite Duration</h6>
                    <div class="graph-controls">
                        <a class="radar-graph information" id="compareSuiteDurationGraphRadar"></a>
                        <a class="fullscreen-graph information" id="compareSuiteDurationFullscreen"></a>
                        <a class="close-graph information" id="compareSuiteDurationClose" hidden></a>
                        <a class="shown-graph information" id="compareSuiteDurationShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="compareSuiteDurationHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <canvas id="compareSuiteDurationGraph"></canvas>
                </div>`,
            },
            {
                key: "compareTests",
                label: "Compare Tests",
                defaultType: "timeline",
                viewOptions: ["Timeline"],
                hasFullscreenButton: true,
                html: `<div class="graph-header">
                    <h6>Tests</h6>
                    <div class="graph-controls">
                        <div class="btn-group">
                            <label class="form-check-label" for="compareOnlyChanges">Only Changes</label>
                        </div>
                        <div class="btn-group form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="compareOnlyChanges">
                        </div>
                        <a class="timeline-graph information" id="compareTestsGraphTimeline"></a>
                        <a class="fullscreen-graph information" id="compareTestsFullscreen"></a>
                        <a class="close-graph information" id="compareTestsClose" hidden></a>
                        <a class="shown-graph information" id="compareTestsShown" showGraphHidden></a>
                        <a class="hidden-graph information" id="compareTestsHidden" hideGraphHidden></a>
                    </div>
                </div>
                <div class="graph-body">
                    <div id="compareTestsVertical" class="w-100 vertical">
                        <canvas id="compareTestsGraph"></canvas>
                    </div>
                </div>`,
            },
            {
                key: "runTable",
                label: "Table Run",
                defaultType: "table",
                viewOptions: ["Table"],
                hasFullscreenButton: false,
                information: null,
                html: `<div class="col table-section" id="runTableCanvas">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="mb-0">Run Table</h6>
                        <div>
                            <a class="move-up-table information" id="runTableMoveUp" moveUpHidden></a>
                            <a class="move-down-table information" id="runTableMoveDown" moveDownHidden></a>
                            <a class="shown-graph information" id="runTableShown" showGraphHidden></a>
                            <a class="hidden-graph information" id="runTableHidden" hideGraphHidden></a>
                        </div>
                    </div>
                    <table class="table table-striped" id="runTable"></table>
                </div>`,
            },
            {
                key: "suiteTable",
                label: "Table Suite",
                defaultType: "table",
                viewOptions: ["Table"],
                hasFullscreenButton: false,
                information: null,
                html: `<div class="col table-section" id="suiteTableCanvas">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="mb-0">Suite Table</h6>
                        <div>
                            <a class="move-up-table information" id="suiteTableMoveUp" moveUpHidden></a>
                            <a class="move-down-table information" id="suiteTableMoveDown" moveDownHidden></a>
                            <a class="shown-graph information" id="suiteTableShown" showGraphHidden></a>
                            <a class="hidden-graph information" id="suiteTableHidden" hideGraphHidden></a>
                        </div>
                    </div>
                    <table class="table table-striped" id="suiteTable"></table>
                </div>`,
            },
            {
                key: "testTable",
                label: "Table Test",
                defaultType: "table",
                viewOptions: ["Table"],
                hasFullscreenButton: false,
                information: null,
                html: `<div class="col table-section" id="testTableCanvas">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="mb-0">Test Table</h6>
                        <div>
                            <a class="move-up-table information" id="testTableMoveUp" moveUpHidden></a>
                            <a class="move-down-table information" id="testTableMoveDown" moveDownHidden></a>
                            <a class="shown-graph information" id="testTableShown" showGraphHidden></a>
                            <a class="hidden-graph information" id="testTableHidden" hideGraphHidden></a>
                        </div>
                    </div>
                    <table class="table table-striped" id="testTable"></table>
                </div>`,
            },
            {
                key: "keywordTable",
                label: "Table Keyword",
                defaultType: "table",
                viewOptions: ["Table"],
                hasFullscreenButton: false,
                information: null,
                html: `<div class="col table-section" id="keywordTableCanvas">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h6 class="mb-0">Keyword Table</h6>
                        <div>
                            <a class="move-up-table information" id="keywordTableMoveUp" moveUpHidden></a>
                            <a class="move-down-table information" id="keywordTableMoveDown" moveDownHidden></a>
                            <a class="shown-graph information" id="keywordTableShown" showGraphHidden></a>
                            <a class="hidden-graph information" id="keywordTableHidden" hideGraphHidden></a>
                        </div>
                    </div>
                    <table class="table table-striped" id="keywordTable"></table>
                </div>`,
            },
        ];

        const informationMap = {
            "rflogo": "Robot Framework",
            "filters": "Filters",
            "customizeLayout": "Customize Layout",
            "saveLayout": "Save Layout",
            "settings": "Settings",
            "themeLight": "Theme",
            "themeDark": "Theme",
            "database": "Database Summary",
            "versionInformation": '"placeholder_version"',
            "bug": "Report a bug or request a feature",
            "github": "Github",
            "amount": "Amount of runs that are shown. Only the most recent x runs are shown after applying the other filters.",
            "amountLabel": "Amount of runs that are shown. Only the most recent x runs are shown after applying the other filters.",
            "overviewStatisticsInformation": `This section shows the projects and their associated runs:
- Duration color indicates performance relative to the average: green if more than x% faster, red if more than x% slower. You can adjust this threshold using the Percentage toggle.
- Passed runs represent the percentage of runs with zero failures.
- You can define your own projects or groupings by appending '-o path/to/output.xml:project_yourprojectname' when generating results.
- If runs don't include custom 'project_' tags, they will be grouped by their run name by default. You can change this behavior using the Use Run Tags toggle.
- The All Runs toggle controls whether only the latest run of each project is shown, or all past runs are displayed in reverse order (newest first). When enabled, you can also filter which project's runs are shown using the selection box.`,
            "runStatisticsGraphPercentages": "Percentages: Displays the distribution of passed, failed, skipped tests per run, where 100% equals all tests combined",
            "runStatisticsGraphAmount": "Amount: Displays the actual number of passed, failed, skipped tests per run",
            "runStatisticsGraphLine": "Line: Displays the same data but over a time axis, useful for spotting failure patterns on specific dates or times",
            "runStatisticsFullscreen": "Fullscreen",
            "runStatisticsClose": "Close",
            "runStatisticsShown": "Hide Graph",
            "runStatisticsHidden": "Show Graph",
            "runDonutGraphDonut": `This graph contains two donut charts:
- The first donut displays the percentage of passed, failed, and skipped tests for the most recent run..
- The second donut displays the total percentage of passed, failed, and skipped tests across all runs`,
            "runDonutFullscreen": "Fullscreen",
            "runDonutClose": "Close",
            "runDonutShown": "Hide Graph",
            "runDonutHidden": "Show Graph",
            "runStatsGraphStats": `This section provides key statistics:
- Executed: Total counts of Runs, Suites, Tests, and Keywords that have been executed.
- Unique Tests: Displays the number of distinct test cases across all runs.
- Outcomes: Total Passed, Failed, and Skipped tests, including their percentages relative to the full test set.
- Duration: Displays the cumulative runtime of all runs, the average runtime per run, and the average duration of individual tests.
- Pass Rate: Displays the average run-level pass rate, helping evaluate overall reliability over time.`,
            "runStatsFullscreen": "Fullscreen",
            "runStatsClose": "Close",
            "runStatsShown": "Hide Graph",
            "runStatsHidden": "Show Graph",
            "runDurationGraphBar": "Bar: Displays total run durations represented as vertical bars",
            "runDurationGraphLine": "Displays the same data but over a time axis for clearer trend analysis",
            "runDurationFullscreen": "Fullscreen",
            "runDurationClose": "Close",
            "runDurationShown": "Hide Graph",
            "runDurationHidden": "Show Graph",
            "runHeatmapGraphHeatmap": `This graph visualizes a heatmap of when tests are executed the most:
- All: Displays how many tests ran during the hours or minutes of the week days.
- Status: Displays only tests of the selected status.
- Hour: Displays only that hour so you get insights per minute.`,
            "runHeatmapFullscreen": "Fullscreen",
            "runHeatmapClose": "Close",
            "runHeatmapShown": "Hide Graph",
            "runHeatmapHidden": "Show Graph",
            "suiteFolderDonutGraphDonut": `This graph contains two donut charts:
- The first donut displays the top-level folders of the suites and the amount of tests each folder contains.
- The second donut displays the same folder structure but only for the most recent run and only includes failed tests.
- Clicking on a folder updates the chart with the subfolders/suites it contains.
- Navigating folders also updates Suite Statistics and Suite Duration.
- Go Up: navigates to the parent folder level.
- Only Failed: filters to show only folders with failing tests.`,
            "suiteFolderDonutFullscreen": "Fullscreen",
            "suiteFolderDonutClose": "Close",
            "suiteFolderDonutShown": "Hide Graph",
            "suiteFolderDonutHidden": "Show Graph",
            "suiteStatisticsGraphPercentages": "Percentages: Displays the passed, failed, skipped rate of test suites per run",
            "suiteStatisticsGraphAmount": "Amount: Displays the actual number of passed, failed, skipped suites per run",
            "suiteStatisticsGraphLine": "Line: Displays the same data but over a time axis, useful for spotting failure patterns on specific dates or times",
            "suiteStatisticsFullscreen": "Fullscreen",
            "suiteStatisticsClose": "Close",
            "suiteStatisticsShown": "Hide Graph",
            "suiteStatisticsHidden": "Show Graph",
            "suiteDurationGraphBar": "Bar: Displays total suite durations represented as vertical bars",
            "suiteDurationGraphLine": "Line: Displays the same data but over a time axis for clearer trend analysis",
            "suiteDurationFullscreen": "Fullscreen",
            "suiteDurationClose": "Close",
            "suiteDurationShown": "Hide Graph",
            "suiteDurationHidden": "Show Graph",
            "suiteMostFailedGraphBar": "Bar: Displays suites ranked by number of failures represented as vertical bars. The default view shows the Top 10 most failed suites; fullscreen expands this to the Top 50.",
            "suiteMostFailedGraphTimeline": "Timeline: Displays when failures occurred to identify clustering over time. The default view shows the Top 10 most failed suites; fullscreen expands this to the Top 50",
            "suiteMostFailedFullscreen": "Fullscreen",
            "suiteMostFailedClose": "Close",
            "suiteMostFailedShown": "Hide Graph",
            "suiteMostFailedHidden": "Show Graph",
            "testStatisticsGraphTimeline": `This graph displays the statistics of the tests in a timeline format
Only Changes: Displays only tests that have changed statuses at some point in time`,
            "testStatisticsFullscreen": "Fullscreen",
            "testStatisticsClose": "Close",
            "testStatisticsShown": "Hide Graph",
            "testStatisticsHidden": "Show Graph",
            "testDurationGraphBar": "Bar: Displays test durations represented as vertical bars",
            "testDurationGraphLine": "Line: Displays the same data but over a time axis for clearer trend analysis",
            "testDurationFullscreen": "Fullscreen",
            "testDurationClose": "Close",
            "testDurationShown": "Hide Graph",
            "testDurationHidden": "Show Graph",
            "testDurationDeviationGraphBar": `This boxplot chart displays how much test durations deviate from the average, represented as vertical bars.
It helps identify tests with inconsistent execution times, which might be flaky or worth investigating`,
            "testDurationDeviationFullscreen": "Fullscreen",
            "testDurationDeviationClose": "Close",
            "testDurationDeviationShown": "Hide Graph",
            "testDurationDeviationHidden": "Show Graph",
            "testMessagesGraphBar": `Bar: Displays messages ranked by number of occurrences represented as vertical bars
- The regular view shows the Top 10 most frequent messages; fullscreen mode expands this to the Top 50.
- To generalize messages (e.g., group similar messages), use the -m/--messageconfig option in the CLI (--help or README).`,
            "testMessagesGraphTimeline": `Timeline: Displays when those messages occurred to reveal problem spikes
- The regular view shows the Top 10 most frequent messages; fullscreen mode expands this to the Top 50.
- To generalize messages (e.g., group similar messages), use the -m/--messageconfig option in the CLI (--help or README).`,
            "testMessagesFullscreen": "Fullscreen",
            "testMessagesClose": "Close",
            "testMessagesShown": "Hide Graph",
            "testMessagesHidden": "Show Graph",
            "testMostFlakyGraphBar": `Bar: Displays tests ranked by frequency of status changes represented as vertical bars
- The regular view shows the Top 10 flaky tests; fullscreen mode expands the list to the Top 50.
- Ignore Skips: filters to only count passed/failed as status flips and not skips.`,
            "testMostFlakyGraphTimeline": `Timeline: Displays when the status changes occurred across runs
- The regular view shows the Top 10 flaky tests; fullscreen mode expands the list to the Top 50.
- Ignore Skips: filters to only count passed/failed as status flips and not skips.`,
            "testMostFlakyFullscreen": "Fullscreen",
            "testMostFlakyClose": "Close",
            "testMostFlakyShown": "Hide Graph",
            "testMostFlakyHidden": "Show Graph",
            "testRecentMostFlakyGraphBar": `Bar: Displays tests ranked by frequency of recent status changes represented as vertical bars
- The regular view shows the Top 10 flaky tests; fullscreen mode expands the list to the Top 50.
- Ignore Skips: filters to only count passed/failed as status flips and not skips.`,
            "testRecentMostFlakyGraphTimeline": `Timeline: Displays when the status changes occurred across runs
- The regular view shows the Top 10 flaky tests; fullscreen mode expands the list to the Top 50.
- Ignore Skips: filters to only count passed/failed as status flips and not skips.`,
            "testRecentMostFlakyFullscreen": "Fullscreen",
            "testRecentMostFlakyClose": "Close",
            "testRecentMostFlakyShown": "Hide Graph",
            "testRecentMostFlakyHidden": "Show Graph",
            "testMostFailedGraphBar": `Bar: Displays tests ranked by total number of failures represented as vertical bars. The regular view shows the Top 10 most failed tests; fullscreen mode expands the list to the Top 50.`,
            "testMostFailedGraphTimeline": `Displays when failures occurred across runs. The regular view shows the Top 10 most failed tests; fullscreen mode expands the list to the Top 50.`,
            "testMostFailedFullscreen": "Fullscreen",
            "testMostFailedClose": "Close",
            "testMostFailedShown": "Hide Graph",
            "testMostFailedHidden": "Show Graph",
            "testRecentMostFailedGraphBar": `Bar: Displays recent tests ranked by total number of failures represented as vertical bars. The regular view shows the Top 10 most failed tests; fullscreen mode expands the list to the Top 50.`,
            "testRecentMostFailedGraphTimeline": `Displays when most recent failures occurred across runs. The regular view shows the Top 10 most failed tests; fullscreen mode expands the list to the Top 50.`,
            "testRecentMostFailedFullscreen": "Fullscreen",
            "testRecentMostFailedClose": "Close",
            "testRecentMostFailedShown": "Hide Graph",
            "testRecentMostFailedHidden": "Show Graph",
            "keywordStatisticsGraphPercentages": "Percentages: Displays the distribution of passed, failed, skipped statuses for each keyword per run",
            "keywordStatisticsGraphAmount": "Amount: Displays raw counts of each status per run",
            "keywordStatisticsGraphLine": "Line: Displays the same data but over a time axis",
            "keywordStatisticsFullscreen": "Fullscreen",
            "keywordStatisticsClose": "Close",
            "keywordStatisticsShown": "Hide Graph",
            "keywordStatisticsHidden": "Show Graph",
            "keywordTimesRunGraphBar": "Bar: Displays times run per keyword represented as vertical bars",
            "keywordTimesRunGraphLine": "Line: Displays the same data but over a time axis",
            "keywordTimesRunFullscreen": "Fullscreen",
            "keywordTimesRunClose": "Close",
            "keywordTimesRunShown": "Hide Graph",
            "keywordTimesRunHidden": "Show Graph",
            "keywordTotalDurationGraphBar": "Bar: Displays the cumulative time each keyword ran during each run represented as vertical bars",
            "keywordTotalDurationGraphLine": "Line: Displays the same data but over a time axis",
            "keywordTotalDurationFullscreen": "Fullscreen",
            "keywordTotalDurationClose": "Close",
            "keywordTotalDurationShown": "Hide Graph",
            "keywordTotalDurationHidden": "Show Graph",
            "keywordAverageDurationGraphBar": "Bar: Displays the average duration for each keyword represented as vertical bars",
            "keywordAverageDurationGraphLine": "Line: Displays the same data but over a time axis",
            "keywordAverageDurationFullscreen": "Fullscreen",
            "keywordAverageDurationClose": "Close",
            "keywordAverageDurationShown": "Hide Graph",
            "keywordAverageDurationHidden": "Show Graph",
            "keywordMinDurationGraphBar": "Bar: Displays minimum durations represented as vertical bars",
            "keywordMinDurationGraphLine": "Line: Displays the same data but over a time axis",
            "keywordMinDurationFullscreen": "Fullscreen",
            "keywordMinDurationClose": "Close",
            "keywordMinDurationShown": "Hide Graph",
            "keywordMinDurationHidden": "Show Graph",
            "keywordMaxDurationGraphBar": "Bar: Displays maximum durations represented as vertical bars",
            "keywordMaxDurationGraphLine": "Line: Displays the same data but over a time axis",
            "keywordMaxDurationFullscreen": "Fullscreen",
            "keywordMaxDurationClose": "Close",
            "keywordMaxDurationShown": "Hide Graph",
            "keywordMaxDurationHidden": "Show Graph",
            "keywordMostFailedGraphBar": "Bar: Displays keywords ranked by total number of failures represented as vertical bars. The regular view shows the Top 10 most failed keywords; fullscreen mode expands the list to the Top 50.",
            "keywordMostFailedGraphTimeline": "Timeline: Displays when failures occurred across runs. The regular view shows the Top 10 most failed keywords; fullscreen mode expands the list to the Top 50.",
            "keywordMostFailedFullscreen": "Fullscreen",
            "keywordMostFailedClose": "Close",
            "keywordMostFailedShown": "Hide Graph",
            "keywordMostFailedHidden": "Show Graph",
            "compareStatisticsGraphBar": "This graph displays the overall statistics of the selected runs",
            "compareStatisticsFullscreen": "Fullscreen",
            "compareStatisticsClose": "Close",
            "compareStatisticsShown": "Hide Graph",
            "compareStatisticsHidden": "Show Graph",
            "compareSuiteDurationGraphRadar": "This graph displays the duration per suite in a radar format",
            "compareSuiteDurationFullscreen": "Fullscreen",
            "compareSuiteDurationClose": "Close",
            "compareSuiteDurationShown": "Hide Graph",
            "compareSuiteDurationHidden": "Show Graph",
            "compareTestsGraphTimeline": `This graph displays the statistics of the tests in a timeline format
Only Changes: Displays only tests that have changed statuses at some point in time`,
            "compareTestsFullscreen": "Fullscreen",
            "compareTestsClose": "Close",
            "compareTestsShown": "Hide Graph",
            "compareTestsHidden": "Show Graph",
            "runTableMoveUp": "Move Up",
            "runTableMoveDown": "Move Down",
            "runTableShown": "Hide Table",
            "runTableHidden": "Show Table",
            "suiteTableMoveUp": "Move Up",
            "suiteTableMoveDown": "Move Down",
            "suiteTableShown": "Hide Table",
            "suiteTableHidden": "Show Table",
            "testTableMoveUp": "Move Up",
            "testTableMoveDown": "Move Down",
            "testTableShown": "Hide Table",
            "testTableHidden": "Show Table",
            "keywordTableMoveUp": "Move Up",
            "keywordTableMoveDown": "Move Down",
            "keywordTableShown": "Hide Table",
            "keywordTableHidden": "Show Table",
            "runSectionMoveUp": "Move Up",
            "runSectionMoveDown": "Move Down",
            "runSectionShown": "Hide Section",
            "runSectionHidden": "Show Section",
            "suiteSectionMoveUp": "Move Up",
            "suiteSectionMoveDown": "Move Down",
            "suiteSectionShown": "Hide Section",
            "suiteSectionHidden": "Show Section",
            "testSectionMoveUp": "Move Up",
            "testSectionMoveDown": "Move Down",
            "testSectionShown": "Hide Section",
            "testSectionHidden": "Show Section",
            "keywordSectionMoveUp": "Move Up",
            "keywordSectionMoveDown": "Move Down",
            "keywordSectionShown": "Hide Section",
            "keywordSectionHidden": "Show Section",
        }

        const tables = graphMetadata.filter(graph => graph.label.includes('Table'))
        // hideGraphs (contains all graphs that can be hidden or shown)
        const hideGraphs = graphMetadata
            .map(graph => graph.label)
            .filter(label => label !== "Run Donut Total" && label !== "Suite Folder Fail Donut");
        // fullscreenButtons (contains all graphs that have a fullscreen/close button)
        const fullscreenButtons = graphMetadata
            .filter(graph => graph.hasFullscreenButton)
            .map(graph => graph.key);
        // defaultGraphTypes (stored in localstorge like percentage, bar etc.)
        const defaultGraphTypes = {};
        graphMetadata.forEach(graph => {
            defaultGraphTypes[`${graph.key}GraphType`] = graph.defaultType;
        });
        // graphChangeButtons (adds the eventlisteners to the buttons ike percentage, bar, etc.)
        const excludeKeys = ["runDonutTotal", "suiteFolderFailDonut"];
        const graphChangeButtons = {};
        graphMetadata.forEach(graph => {
            if (!excludeKeys.includes(graph.key) && graph.type !== "Table") {
                const snakeKey = camelcase_to_underscore(graph.key);
                graphChangeButtons[snakeKey] = graph.viewOptions.join(',');
            }
        });
        // graphVars
        const graphVars = graphMetadata.map(g => g.defaultType === "table" ? g.key : `${g.key}Graph`);
        graphVars.forEach(name => {
            window[name] = undefined;
        });

        // Run compare filter Id's
        const compareRunIds = ['compareRun1', 'compareRun2', 'compareRun3', 'compareRun4']

        // customize view lists
        const overviewSections = ["Overview"]
        const dashboardSections = ["Run Statistics", "Suite Statistics", "Test Statistics", "Keyword Statistics",]
        const compareSections = ["Compare Statistics"]
        const tableSections = ["Table Statistics"]
        const dashboardGraphs = graphMetadata
            .filter(graph => !graph.label.startsWith("Compare")
                && !graph.label.startsWith("Table")
                && graph.label !== "Run Donut Total"
                && graph.label !== "Suite Folder Fail Donut")
            .map(graph => graph.label);
        const compareGraphs = graphMetadata
            .filter(graph => graph.label.startsWith("Compare"))
            .map(graph => graph.label)
        const tableGraphs = graphMetadata
            .filter(graph => graph.label.startsWith("Table"))
            .map(graph => graph.label)

        // settings var
        var settings = {
            switch: {
                showAllRuns: false,
                runTags: false,
                suitePathsSuiteSection: false,
                suitePathsTestSection: false,
                suitePathsCompareSection: false,
            },
            show: {
                dateLabels: true,
                legends: true,
                aliases: false,
                milliseconds: false,
                axisTitles: true,
                animation: true,
                duration: 1500,
                rounding: 6,
            },
            menu: {
                overview: false,
                dashboard: true,
                compare: false,
                tables: false,
            },
            graphTypes: defaultGraphTypes,
            view: {
                overview: {
                    sections: {
                        show: overviewSections,
                        hide: [],
                    },
                    graphs: {
                        show: [],
                        hide: [],
                    }
                },
                dashboard: {
                    sections: {
                        show: dashboardSections,
                        hide: [],
                    },
                    graphs: {
                        show: dashboardGraphs,
                        hide: [],
                    },
                },
                compare: {
                    sections: {
                        show: compareSections,
                        hide: [],
                    },
                    graphs: {
                        show: compareGraphs,
                        hide: [],
                    },
                },
                tables: {
                    sections: {
                        show: tableSections,
                        hide: [],
                    },
                    graphs: {
                        show: tableGraphs,
                        hide: [],
                    },
                },
            }
        };

        /////////////////////////////
        // GENERIC SETUP FUNCTIONS //
        /////////////////////////////

        // function to update the theme when the button is clicked
        function toggle_theme() {
            if (document.documentElement.classList.contains("dark-mode")) {
                set_local_storage_item("theme", "light");
            } else {
                set_local_storage_item("theme", "dark");
            }
            setup_theme()
            setup_dasbhoard_graphs()
        }

        // theme function based on browser/machine color scheme
        function setup_theme() {
            Chart.defaults.font.size = graphFontSize;
            const html = document.documentElement;

            function swap_button_classes(from1, to1, from2, to2) {
                // bootstrap buttons theme swap (outline and regular)
                document.querySelectorAll(from1).forEach(btn => {
                    btn.classList.remove(from1.replace(".", ""));
                    btn.classList.add(to1);
                });
                document.querySelectorAll(from2).forEach(btn => {
                    btn.classList.remove(from2.replace(".", ""));
                    btn.classList.add(to2);
                });
            }

            function set_light_mode() {
                // menu theme
                document.getElementById("navigation").classList.remove("navbar-dark")
                document.getElementById("navigation").classList.add("navbar-light")
                document.getElementById("themeLight").hidden = false;
                document.getElementById("themeDark").hidden = true;
                // bootstrap related settings
                document.getElementsByTagName("html")[0].setAttribute("data-bs-theme", "light");
                html.style.setProperty("--bs-body-bg", "#fff");
                swap_button_classes(".btn-outline-light", "btn-outline-dark", ".btn-light", "btn-dark");
                // chartjs default graph settings
                Chart.defaults.color = "#666";
                Chart.defaults.borderColor = "rgba(0,0,0,0.1)";
                Chart.defaults.backgroundColor = "rgba(0,0,0,0.1)";
                Chart.defaults.elements.line.borderColor = "rgba(0,0,0,0.1)";
                // svgs
                const svgMap = {
                    ids: {
                        "github": githubLightSVG,
                        "settings": settingsLightSVG,
                        "database": databaseLightSVG,
                        "filters": filterLightSVG,
                        "rflogo": rflogoLightSVG,
                        "themeLight": moonSVG,
                        "bug": bugLightSVG,
                        "customizeLayout": customizeViewLightSVG,
                        "saveLayout": saveLightSVG,
                    },
                    classes: {
                        ".percentage-graph": percentageLightSVG,
                        ".bar-graph": barLightSVG,
                        ".line-graph": lineLightSVG,
                        ".pie-graph": pieLightSVG,
                        ".boxplot-graph": boxplotLightSVG,
                        ".heatmap-graph": heatmapLightSVG,
                        ".stats-graph": statsLightSVG,
                        ".timeline-graph": timelineLightSVG,
                        ".radar-graph": radarLightSVG,
                        ".fullscreen-graph": fullscreenLightSVG,
                        ".close-graph": closeLightSVG,
                        ".information-icon": informationLightSVG,
                        ".shown-graph": eyeLightSVG,
                        ".hidden-graph": eyeOffLightSVG,
                        ".shown-section": eyeLightSVG,
                        ".hidden-section": eyeOffLightSVG,
                        ".move-up-table": moveUpLightSVG,
                        ".move-down-table": moveDownLightSVG,
                        ".move-up-section": moveUpLightSVG,
                        ".move-down-section": moveDownLightSVG,
                    }
                };
                for (const [id, svg] of Object.entries(svgMap.ids)) {
                    const el = document.getElementById(id);
                    if (el) el.innerHTML = svg;
                }
                for (const [selector, svg] of Object.entries(svgMap.classes)) {
                    document.querySelectorAll(selector).forEach(el => {
                        el.innerHTML = svg;
                    });
                }
            }

            function set_dark_mode() {
                // menu theme
                document.getElementById("themeLight").hidden = true;
                document.getElementById("themeDark").hidden = false;
                document.getElementById("navigation").classList.remove("navbar-light")
                document.getElementById("navigation").classList.add("navbar-dark")
                // bootstrap related settings
                document.getElementsByTagName("html")[0].setAttribute("data-bs-theme", "dark");
                html.style.setProperty("--bs-body-bg", "rgba(30, 41, 59, 0.9)");
                swap_button_classes(".btn-outline-dark", "btn-outline-light", ".btn-dark", "btn-light");
                // chartjs default graph settings
                Chart.defaults.color = "#eee";
                Chart.defaults.borderColor = "rgba(255,255,255,0.1)";
                Chart.defaults.backgroundColor = "rgba(255,255,0,0.1)";
                Chart.defaults.elements.line.borderColor = "rgba(255,255,0,0.4)";
                // svgs
                const svgMap = {
                    ids: {
                        "github": githubDarkSVG,
                        "settings": settingsDarkSVG,
                        "database": databaseDarkSVG,
                        "filters": filterDarkSVG,
                        "rflogo": rflogoDarkSVG,
                        "themeDark": sunSVG,
                        "bug": bugDarkSVG,
                        "customizeLayout": customizeViewDarkSVG,
                        "saveLayout": saveDarkSVG,
                    },
                    classes: {
                        ".percentage-graph": percentageDarkSVG,
                        ".bar-graph": barDarkSVG,
                        ".line-graph": lineDarkSVG,
                        ".pie-graph": pieDarkSVG,
                        ".boxplot-graph": boxplotDarkSVG,
                        ".heatmap-graph": heatmapDarkSVG,
                        ".stats-graph": statsDarkSVG,
                        ".timeline-graph": timelineDarkSVG,
                        ".radar-graph": radarDarkSVG,
                        ".fullscreen-graph": fullscreenDarkSVG,
                        ".close-graph": closeDarkSVG,
                        ".information-icon": informationDarkSVG,
                        ".shown-graph": eyeDarkSVG,
                        ".hidden-graph": eyeOffDarkSVG,
                        ".shown-section": eyeDarkSVG,
                        ".hidden-section": eyeOffDarkSVG,
                        ".move-up-table": moveUpDarkSVG,
                        ".move-down-table": moveDownDarkSVG,
                        ".move-up-section": moveUpDarkSVG,
                        ".move-down-section": moveDownDarkSVG,
                    }
                };
                for (const [id, svg] of Object.entries(svgMap.ids)) {
                    const el = document.getElementById(id);
                    if (el) el.innerHTML = svg;
                }
                for (const [selector, svg] of Object.entries(svgMap.classes)) {
                    document.querySelectorAll(selector).forEach(el => {
                        el.innerHTML = svg;
                    });
                }
            }

            // detect theme preference
            const isDark = html.classList.contains("dark-mode");

            if (settings.theme === "light") {
                if (isDark) html.classList.remove("dark-mode");
                set_light_mode();
            } else if (settings.theme === "dark") {
                if (!isDark) html.classList.add("dark-mode");
                set_dark_mode();
            } else {
                // No theme in localStorage, fall back to system preference
                if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                    html.classList.add("dark-mode");
                    set_dark_mode();
                } else {
                    html.classList.remove("dark-mode");
                    set_light_mode();
                }
            }
        }

        // set default values
        function setup_database_stats() {
            document.getElementById("stats").innerHTML = `<table class='table table-striped'>
                <tr><td>Runs</td><td>${runs.length}</td></tr>
                <tr><td>Suites</td><td>${suites.length}</td></tr>
                <tr><td>Tests</td><td>${tests.length}</td></tr>
                <tr><td>Keywords</td><td>${keywords.length}</td></tr>
            </table>`

            window.onbeforeprint = () => {
                return new Promise(res => setTimeout(res, settings.show.duration + 500)); // allow rendering time
            };
        }

        function customize_layout() {
            document.getElementById("customizeLayout").hidden = true;
            document.getElementById("saveLayout").hidden = false;
            add_alert("You can now change your layout. Don't forget to save!", "info")
        }

        function save_layout() {
            document.getElementById("customizeLayout").hidden = false;
            document.getElementById("saveLayout").hidden = true;
            const shownDashboardItems = [];
            const hiddenDashboardItems = [];
            const shownCompareItems = [];
            const hiddenCompareItems = [];
            // save dashboard/compare graph layout
            const grids = document.querySelectorAll(".grid-stack");
            grids.forEach(grid => {
                const layout = window[`${grid.id}`].engine.nodes.map(w => {
                    const id = w.el?.getAttribute('data-gs-id');
                    return {
                        x: w.x,
                        y: w.y,
                        w: w.w,
                        h: w.h,
                        id
                    };
                }).filter(w => w.id);
                if (layout.length > 0) {
                    set_local_storage_item(`layouts.${grid.id}`, JSON.stringify(layout));
                }
                const shown = document.querySelectorAll(`#${grid.id} .shown-graph:not([hidden])`);
                const hidden = document.querySelectorAll(`#${grid.id} .hidden-graph:not([hidden])`);
                shown.forEach(btn => {
                    if (grid.id.includes("Compare")) {
                        shownCompareItems.push(graphMetadata.find(graph => graph.key == btn.id.replace("Shown", "")).label)
                    } else {
                        shownDashboardItems.push(graphMetadata.find(graph => graph.key == btn.id.replace("Shown", "")).label)
                    }
                })
                hidden.forEach(btn => {
                    if (grid.id.includes("Compare")) {
                        hiddenCompareItems.push(graphMetadata.find(graph => graph.key == btn.id.replace("Hidden", "")).label)
                    } else {
                        hiddenDashboardItems.push(graphMetadata.find(graph => graph.key == btn.id.replace("Hidden", "")).label)
                    }
                })
                if (shownDashboardItems.length + hiddenDashboardItems.length > 0) {
                    set_local_storage_item("view.dashboard.graphs.show", shownDashboardItems)
                    set_local_storage_item("view.dashboard.graphs.hide", hiddenDashboardItems)
                }
                if (shownCompareItems.length + hiddenCompareItems.length > 0) {
                    set_local_storage_item("view.compare.graphs.show", shownCompareItems)
                    set_local_storage_item("view.compare.graphs.hide", hiddenCompareItems)
                }
            });
            // save table section layout
            const shownTables = [...document.querySelectorAll("#gridTable .shown-graph:not([hidden])")]
                .map(el => {
                    const key = el.id.replace("Shown", "");
                    return graphMetadata.find(graph => graph.key === key)?.label;
                });

            const hiddenTables = [...document.querySelectorAll("#gridTable .hidden-graph:not([hidden])")]
                .map(el => {
                    const key = el.id.replace("Hidden", "");
                    return graphMetadata.find(graph => graph.key === key)?.label;
                });
            if (shownTables.length + hiddenTables.length > 0) {
                set_local_storage_item("view.tables.graphs.show", shownTables)
                set_local_storage_item("view.tables.graphs.hide", hiddenTables)
            }
            // save dashboard section layout
            const shownDashboardSections = [...document.querySelectorAll(".shown-section:not([hidden])")]
                .map(el => {
                    var key = el.id.replace("SectionShown", "");
                    key = String(key).charAt(0).toUpperCase() + String(key).slice(1);
                    return `${key} Statistics`
                });
            const hiddenDashboardSections = [...document.querySelectorAll(".hidden-section:not([hidden])")]
                .map(el => {
                    var key = el.id.replace("SectionHidden", "");
                    key = String(key).charAt(0).toUpperCase() + String(key).slice(1);
                    return `${key} Statistics`
                });
            if (shownDashboardSections.length + hiddenDashboardSections.length > 0) {
                set_local_storage_item("view.dashboard.sections.show", shownDashboardSections)
                set_local_storage_item("view.dashboard.sections.hide", hiddenDashboardSections)
            }

            add_alert("Layout has been updated and saved to settings in local storage!", "success")
        }

        function setup_edit_mode_icons(hidden) {
            document.querySelectorAll(".bar-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".line-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".timeline-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".radar-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".pie-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".percentage-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".stats-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".boxplot-graph").forEach(btn => btn.hidden = hidden)
            document.querySelectorAll(".fullscreen-graph").forEach(btn => btn.hidden = hidden)
            if (hidden) {
                document.querySelector('.navbar-nav').classList.add('navbar-disabled');
                document.querySelectorAll('.navbar-disabled').forEach(el => {
                    el.classList.add("information")
                    el.setAttribute("data-title", "Save your layout changes first! (Save Icon)");
                });
            } else {
                document.querySelectorAll('.navbar-disabled').forEach(el => {
                    el.classList.remove("information")
                    el.removeAttribute("data-title")
                });
                document.querySelector('.navbar-nav').classList.remove('navbar-disabled');
            }
        }

        // function to add the layout eventlisteners
        function setup_layout() {
            document.getElementById("customizeLayout").addEventListener("click", (e) => {
                gridEditMode = !gridEditMode;
                customize_layout();
                setup_data_and_graphs();
                requestAnimationFrame(() => {
                    setup_edit_mode_icons(true);
                })
            });
            document.getElementById("saveLayout").addEventListener("click", (e) => {
                gridEditMode = !gridEditMode;
                save_layout()
                setup_data_and_graphs();
                requestAnimationFrame(() => {
                    setup_edit_mode_icons(false);
                })
            });
            // disable or enable sections
            document.querySelectorAll(".shown-section").forEach(btn => {
                btn.addEventListener("click", () => {
                    btn.hidden = true;
                    document.getElementById(`${btn.id.replace("Shown", "Hidden")}`).hidden = false;
                })
            });
            document.querySelectorAll(".hidden-section").forEach(btn => {
                btn.addEventListener("click", () => {
                    btn.hidden = true;
                    document.getElementById(`${btn.id.replace("Hidden", "Shown")}`).hidden = false;
                })
            });
            // move sections up or down
            document.querySelectorAll(".move-up-section").forEach(btn => {
                btn.addEventListener("click", () => {
                    const card = btn.closest(".card");
                    const previousCard = card.previousElementSibling;
                    if (previousCard && !previousCard.hidden && previousCard.classList.contains("card")) {
                        card.parentNode.insertBefore(card, previousCard);
                    }
                });
            });
            document.querySelectorAll(".move-down-section").forEach(btn => {
                btn.addEventListener("click", () => {
                    const card = btn.closest(".card");
                    const nextCard = card.nextElementSibling;
                    if (nextCard && !nextCard.hidden && nextCard.classList.contains("card")) {
                        card.parentNode.insertBefore(nextCard, card);
                    }
                });
            });
        }

        // function to add an alert to the page
        function add_alert(message, category, timeout = 5000) {
            const alertHTML = `<div class="row alert alert-${category} alert-dismissible" role="alert">
                <div class="col">${message}</div>
                <div class="col-auto">
                    <span onclick="close_alert()" type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </span>
                </div>
            </div>`
            document.getElementById("alertContainer").innerHTML = alertHTML

            setTimeout(() => {
                close_alert()
            }, timeout);
        }

        // function to close the alerts
        function close_alert() {
            document.getElementById("alertContainer").innerHTML = ""
        }

        // function to setup all collapse buttons and icons
        function setup_collapsables() {
            document.querySelectorAll(".collapse-icon").forEach(icon => {
                const sectionId = icon.id.replace("collapse", "");
                const update_icon = () => {
                    const section = document.getElementById(sectionId);
                    icon.innerHTML = section.hidden ? arrowRight : arrowDown;
                };
                icon.addEventListener("click", () => {
                    const section = document.getElementById(sectionId);
                    section.hidden = !section.hidden;
                    update_icon();
                });
                update_icon();
            });
        }

        // function to update the section (menu) buttons with the correct eventlisteners
        // also sets up the automatic highlighting of the section that is most visible in the top
        // 20-50% percent of the screen
        function setup_section_menu_buttons() {
            const sectionButtons = [
                document.getElementById("runStatisticsSectionNav"),
                document.getElementById("suiteStatisticsSectionNav"),
                document.getElementById("testStatisticsSectionNav"),
                document.getElementById("keywordStatisticsSectionNav"),
            ];
            const sectionMap = {
                runStatisticsSection: sectionButtons[0],
                suiteStatisticsSection: sectionButtons[1],
                testStatisticsSection: sectionButtons[2],
                keywordStatisticsSection: sectionButtons[3],
            };

            if (settings.menu.dashboard) {
                sectionButtons.forEach(btn => btn.hidden = false);
                sectionButtons.forEach(btn => btn.classList.remove('active'));
                settings.view.dashboard.sections.hide.forEach(hiddenSection => sectionMap[`${space_to_camelcase(hiddenSection)}Section`].hidden = true) // hide section menu buttons that should be hidden
            } else {
                sectionButtons.forEach(btn => btn.hidden = true);
            }

            const sections = Object.keys(sectionMap).map(id => document.getElementById(id));
            function update_active_section() {
                const viewportHeight = window.innerHeight;
                const viewportTop = viewportHeight * 0.2;
                const viewportBottom = viewportHeight * 0.5;
                let bestMatch = null;
                let bestMatchAmount = 0;
                sections.forEach(section => {
                    const rect = section.getBoundingClientRect();
                    // Calculate overlap in the 20%-50% viewport vertical range
                    const top = Math.max(rect.top, viewportTop);
                    const bottom = Math.min(rect.bottom, viewportBottom);
                    const overlap = bottom - top;
                    if (overlap > bestMatchAmount) {
                        bestMatch = section;
                        bestMatchAmount = overlap;
                    }
                });

                // Highlight the matching button
                sectionButtons.forEach(btn => btn.classList.remove("active"));
                if (bestMatch && sectionMap[bestMatch.id]) {
                    sectionMap[bestMatch.id].classList.add("active");
                }
            }

            window.addEventListener("scroll", update_active_section);
            // Initial call to set active on load
            update_active_section();

            sectionButtons.forEach(btn => {
                btn.addEventListener("click", () => {
                    const target = document.getElementById(btn.id.slice(0, -3));
                    if (target) {
                        const stickyTop = document.getElementById("navigation");
                        const stickyHeight = stickyTop ? stickyTop.offsetHeight : 0;
                        const targetTop = target.getBoundingClientRect().top + window.pageYOffset;
                        const top = targetTop < 200 ? 0 : targetTop - stickyHeight - 8; // exception for the section at the top, scroll to 0
                        window.scrollTo({
                            top: top - 7,
                            behavior: "auto"
                        });
                    }
                });
            });
        }

        // function to fill the information icons with the correct data
        function setup_information_popups() {
            for (const id in informationMap) {
                const title = informationMap[id];
                const element = document.getElementById(id);
                if (!element) continue;  // safety check if element not found
                element.setAttribute("data-title", title);
            }

            let tooltipEl = null;
            let currentTarget = null;

            function createTooltip(el) {
                if (tooltipEl) removeTooltip();

                const text = el.getAttribute('data-title');
                if (!text) return;

                tooltipEl = document.createElement('div');
                tooltipEl.className = 'tooltip-popup';
                tooltipEl.textContent = text;
                document.body.appendChild(tooltipEl);

                const rect = el.getBoundingClientRect();
                const padding = 8;
                const maxWidth = 440;

                const baseCharWidth = 8;
                const dynamicWidth = Math.min(text.length * baseCharWidth + 26, maxWidth);

                tooltipEl.style.width = dynamicWidth + 'px';
                tooltipEl.style.maxWidth = maxWidth + 'px';

                let left = rect.left + rect.width / 2;
                let top = rect.bottom + 8;

                tooltipEl.style.left = `${left}px`;
                tooltipEl.style.top = `${top}px`;
                tooltipEl.style.transform = 'translateX(-50%)';

                const tooltipRect = tooltipEl.getBoundingClientRect();

                const overflowLeft = tooltipRect.left < padding;
                const overflowRight = tooltipRect.right > window.innerWidth - padding;

                if (overflowLeft) {
                    const shiftAmount = padding - tooltipRect.left;
                    tooltipEl.style.transform = `translateX(calc(-50% + ${shiftAmount}px))`;
                } else if (overflowRight) {
                    const shiftAmount = tooltipRect.right - (window.innerWidth - padding);
                    tooltipEl.style.transform = `translateX(calc(-50% - ${shiftAmount}px))`;
                }
            }

            function removeTooltip() {
                document.querySelectorAll('.tooltip-popup').forEach(el => el.remove());
                tooltipEl = null;
                currentTarget = null;
            }

            function isElementVisible(el) {
                const style = window.getComputedStyle(el);
                return !(style.display === 'none' || style.visibility === 'hidden' || el.offsetParent === null);
            }

            document.querySelectorAll('.information[data-title]').forEach(el => {
                el.onmouseenter = null;
                el.onmouseleave = null;
                el.onclick = null;

                el.addEventListener('mouseenter', () => {
                    if (currentTarget !== el) {
                        currentTarget = el;
                        createTooltip(el);
                    }
                });

                el.addEventListener('mouseleave', () => {
                    if (currentTarget === el) {
                        removeTooltip();
                    }
                });

                el.addEventListener('click', () => {
                    if (!isElementVisible(el) && currentTarget === el) {
                        removeTooltip();
                    }
                });
            });

            document.addEventListener('mouseover', e => {
                const target = e.target.closest('.information[data-title]');
                if (target !== currentTarget) {
                    removeTooltip();
                    if (target) {
                        currentTarget = target;
                        createTooltip(target);
                    }
                }
            });
        }


        // function to add a spinner for slow loads
        function setup_spinner(hide) {
            if (hide) {
                $("#loading").fadeOut(100)
                $("#overview").fadeIn()
                $("#dashboard").fadeIn()
                $("#compare").fadeIn()
                $("#tables").fadeIn()
            } else {
                $("#overview").hide()
                $("#dashboard").hide()
                $("#compare").hide()
                $("#tables").hide()
                $("#loading").show();
            }
        }

        // function to convert to camelcase
        function space_to_camelcase(string) {
            return string.replace(/(?:^\w|[A-Z]|\b\w)/g, function (word, index) {
                return index === 0 ? word.toLowerCase() : word.toUpperCase();
            }).replace(/\s+/g, "");
        }

        // function to convert to camelcase from underscores
        function underscore_to_camelcase(str) {
            return str.replace(/_(.)/g, (match, group) => group.toUpperCase());
        }

        // function to convert camelcose to underscores
        function camelcase_to_underscore(str) {
            return str
                .replace(/([A-Z]+)/g, "_$1")     // Prefix all capital groups with _
                .replace(/^_/, "")               // Remove leading underscore if it appears
                .toLowerCase();                  // Convert everything to lowercase
        }

        // function to convert a date object to the desired string format
        function format_date_to_string(date) {
            const pad = (n) => n.toString().padStart(2, "0");
            const year = date.getFullYear();
            const month = pad(date.getMonth() + 1); // Months are 0-indexed
            const day = pad(date.getDate());
            const hours = pad(date.getHours());
            const minutes = pad(date.getMinutes());
            const seconds = pad(date.getSeconds());
            return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;
        }

        // function to transform an output.xml path to a log.html path
        function transform_file_path(filePath) {
            const normalizedPath = filePath.replace(/\\/g, "/");
            const pathSegments = normalizedPath.split("/");
            const filename = pathSegments.pop();
            const updatedFilename = filename.replace(/output/g, "log").replace(/\.xml$/i, ".html");
            const updatedPath = [...pathSegments, updatedFilename].join("/");
            return filePath.includes("\\") ? updatedPath.replace(/\//g, "\\") : updatedPath;
        }

        // function used to combine paths to open the correct log file, used in combination with a file server
        function combine_paths(baseUrlStr, relativePath) {
            const baseUrl = new URL(baseUrlStr);
            const baseParts = baseUrl.pathname.split("/").filter(Boolean);
            const relParts = relativePath.replaceAll("\\", "/").split("/").filter(Boolean);
            // Find the first matching folder name from the relative path in the base path
            let match = null;
            for (let i = 0; i < relParts.length; i++) {
                const folder = relParts[i];
                const baseMatchIndex = baseParts.lastIndexOf(folder);
                if (baseMatchIndex !== -1) {
                    match = { baseIndex: baseMatchIndex, relIndex: i };
                    break;
                }
            }

            let combinedParts;
            if (match) {
                const baseSlice = baseParts.slice(0, match.baseIndex);
                const relSlice = relParts.slice(match.relIndex);
                combinedParts = [...baseSlice, ...relSlice];
            } else {
                combinedParts = relParts;
            }

            // Resolve "." and ".."
            const resolvedParts = [];
            for (const part of combinedParts) {
                if (part === ".") continue;
                if (part === "..") {
                    if (resolvedParts.length > 0) resolvedParts.pop();
                } else {
                    resolvedParts.push(part);
                }
            }

            return baseUrl.origin + "/" + resolvedParts.join("/");
        }

        // function to update the localstorage and graphs for the suitepath switches
        function update_switch_local_storage(key, state, firstLoad = false) {
            const id = key.split('.').map((part, index) => {
                if (index === 0) return part;
                return part.charAt(0).toUpperCase() + part.slice(1);
            }).join('');
            const currentState = key.split('.').reduce((o, i) => o[i], settings)
            if (firstLoad) {
                if (currentState !== undefined) {
                    set_local_storage_item(key, currentState); // Ensure internal settings var is updated
                    document.getElementById(id).checked = currentState;
                } else {
                    set_local_storage_item(key, state); // If no value exists yet, default to current 'state' and save it
                    document.getElementById(id).checked = state;
                }
            } else {
                set_local_storage_item(key, state);
            }
        }

        // function to get a higher folder path based on the full_path or partial full_path provided
        function get_next_folder_level(currentPath, fullPath) {
            const fullParts = fullPath.split(".");
            const currentParts = currentPath.split(".");
            if (
                currentParts.length < fullParts.length &&
                fullParts.slice(0, currentParts.length).join(".") === currentPath
            ) {
                return fullParts.slice(0, currentParts.length + 1).join(".");
            }
            return currentPath;
        }

        //////////////////////////////
        // CUSTOMIZE VIEW FUNCTIONS //
        //////////////////////////////

        // function to update the localstorage of the graphtypes
        function update_graph_type(graph, type) {
            settings.graphTypes[graph] = type;
            set_local_storage_item('graphTypes', settings.graphTypes);
        }

        /////////////////////////////
        // EVENTLISTENER FUNCTIONS //
        /////////////////////////////

        function setup_filter_modal() {
            // eventlistener to catch the closing of the filter modal
            $("#filtersModal").on("hidden.bs.modal", function () {
                setup_data_and_graphs();
            });
            // eventlistener to reset the filters
            document.getElementById("resetFilters").addEventListener("click", function () {
                document.getElementById("runs").value = "All";
                const tagElements = document.getElementById("runTag").getElementsByTagName("input");
                for (const input of tagElements) {
                    input.checked = false;
                    if (input.id == "All") input.checked = true;
                }
                document.getElementById("amount").value = filteredAmountDefault;
                document.getElementById("metadata").value = "All";
                setup_lowest_highest_dates(runs);
                add_alert("Filters have been set to default values!", "success")
            });
            // eventlistener for all runs button
            document.getElementById("allRuns").addEventListener("click", function () {
                document.getElementById("amount").value = Object.keys(runs).length;
            });
            // eventlistener for the runTags
            function show_checkboxes() {
                const checkboxes = document.getElementById("checkboxes");
                showingRunTags = !showingRunTags;
                checkboxes.style.display = showingRunTags ? "block" : "none";
            }
            const checkboxesElement = document.getElementById("checkboxes");
            const runTagsSelectElement = document.getElementById("selectRunTags");
            // eventlistener for click events on body to hide the run checkboxes when clicking outside of the select/checkboxes elements
            document.getElementById("selectRunTags").addEventListener("click", show_checkboxes);
            document.body.addEventListener("click", function (event) {
                if (showingRunTags == true && !checkboxesElement.contains(event.target) && !runTagsSelectElement.contains(event.target)) {
                    show_checkboxes()
                }
            });
            // amount filter setup
            filteredAmountDefault = filteredAmount
            document.getElementById("amount").value = filteredAmount
            if (server) {
                document.getElementById("openDashboard").hidden = false
            }
            // fill the filters with default values
            setup_run_amount_filter();
            setup_lowest_highest_dates();
            setup_metadata_filter();
            setup_runs_in_select_filter_buttons();
            setup_runtags_in_select_filter_buttons();
        }

        // function to create customized view eventlisteners
        function setup_settings_modal() {
            // function to catch the closing of the settings modal
            $("#settingsModal").on("hidden.bs.modal", function () {
                setup_data_and_graphs();
            });
            // function to create setting toggle handlers
            function create_toggle_handler({ key, elementId, isNumber = false }) {
                return function (load = false) {
                    const element = document.getElementById(elementId);
                    if (load) {
                        const storedValue = key.split(".").reduce((acc, k) => acc?.[k], settings);
                        if (isNumber) {
                            if (typeof storedValue === "number") {
                                element.value = storedValue;
                            }
                        } else {
                            if (typeof storedValue === "boolean") {
                                element.checked = storedValue;
                            }
                        }
                    } else {
                        let newValue;
                        if (isNumber) {
                            newValue = parseInt(element.value);
                        } else {
                            const currentValue = key.split(".").reduce((acc, k) => acc?.[k], settings);
                            newValue = !currentValue;
                            element.checked = newValue;
                        }
                        set_local_storage_item(key, newValue);
                    }
                };
            }

            const toggle_labels = create_toggle_handler({
                key: "show.dateLabels",
                elementId: "toggleLabels"
            });

            const toggle_legends = create_toggle_handler({
                key: "show.legends",
                elementId: "toggleLegends"
            });

            const toggle_aliases = create_toggle_handler({
                key: "show.aliases",
                elementId: "toggleAliases"
            });

            const toggle_milliseconds = create_toggle_handler({
                key: "show.milliseconds",
                elementId: "toggleMilliseconds"
            });

            const toggle_axis_titles = create_toggle_handler({
                key: "show.axisTitles",
                elementId: "toggleAxisTitles"
            });

            const toggle_animations = create_toggle_handler({
                key: "show.animation",
                elementId: "toggleAnimations"
            });

            const toggle_animation_duration = create_toggle_handler({
                key: "show.duration",
                elementId: "toggleAnimationDuration",
                isNumber: true
            });

            const toggle_bar_rounding = create_toggle_handler({
                key: "show.rounding",
                elementId: "toggleBarRounding",
                isNumber: true
            });

            // Initial load
            toggle_labels(true);
            toggle_legends(true);
            toggle_aliases(true);
            toggle_milliseconds(true);
            toggle_axis_titles(true);
            toggle_animations(true);
            toggle_animation_duration(true);
            toggle_bar_rounding(true);

            // Add event listeners
            document.getElementById("toggleLabels").addEventListener("click", () => toggle_labels());
            document.getElementById("toggleLegends").addEventListener("click", () => toggle_legends());
            document.getElementById("toggleAliases").addEventListener("click", () => toggle_aliases());
            document.getElementById("toggleMilliseconds").addEventListener("click", () => toggle_milliseconds());
            document.getElementById("toggleAxisTitles").addEventListener("click", () => toggle_axis_titles());
            document.getElementById("toggleAnimations").addEventListener("click", () => toggle_animations());
            document.getElementById("toggleAnimationDuration").addEventListener("change", () => toggle_animation_duration());
            document.getElementById("toggleBarRounding").addEventListener("change", () => toggle_bar_rounding());
            document.getElementById("themeLight").addEventListener("click", () => toggle_theme());
            document.getElementById("themeDark").addEventListener("click", () => toggle_theme());

            function show_settings_in_textarea() {
                const textArea = document.getElementById("settingsTextArea");
                textArea.value = JSON.stringify(settings, null, 2);
            }

            function copy_settings_to_clipboard() {
                const textArea = document.getElementById("settingsTextArea");
                textArea.select();
                textArea.setSelectionRange(0, 99999);
                navigator.clipboard.writeText(textArea.value);
                add_alert("Copied settings to clipboard!", "success")
            }

            async function reset_settings_to_default() {
                const confirmed = await confirm_action(`Are you sure you want to resset all settings?<br><br>
                    This may override:<br>
                    - Graph settings<br>
                    - Custom layouts (e.g., moved or resized graphs)<br>
                    - Hidden graphs
                    If you only want to update a few small settings it is recommended to update the settings json and re-apply it.
                `);
                if (confirmed) {
                    localStorage.removeItem("settings");
                    location.reload();
                }
            }

            async function apply_settings_from_textarea() {
                const confirmed = await confirm_action(`Are you sure you want to apply the new settings?<br><br>
                    This may override:<br>
                    - Graph settings<br>
                    - Custom layouts (e.g., moved or resized graphs)<br>
                    - Hidden graphs
                `);
                if (confirmed) {
                    try {
                        const input = document.getElementById("settingsTextArea").value;
                        const newSettings = JSON.parse(input);
                        settings = newSettings
                        localStorage.setItem("settings", JSON.stringify(newSettings));
                        location.reload();
                    } catch (e) {
                        add_alert("Failed to update admin json config: " + e, "danger")
                    }
                }
            }
            document.getElementById("copySettings").addEventListener("click", copy_settings_to_clipboard);
            document.getElementById("resetSettings").addEventListener("click", reset_settings_to_default);
            document.getElementById("applySettings").addEventListener("click", apply_settings_from_textarea);
            document.getElementById("settingsModal").addEventListener("shown.bs.modal", show_settings_in_textarea);
        }

        function confirm_action(message = "Are you sure?") {
            return new Promise((resolve) => {
                const settingsModal = document.getElementById("settingsModal");
                const modalEl = document.getElementById("confirmModal");
                const modalBody = document.getElementById("confirmModalMessage");
                const cancelBtn = document.getElementById("confirmCancel");
                const okBtn = document.getElementById("confirmOk");

                settingsModal.classList.add("dimmed");
                modalBody.innerHTML = message;

                const modal = new bootstrap.Modal(modalEl);
                const onCancel = () => {
                    resolve(false);
                    modal.hide();
                };
                const onConfirm = () => {
                    resolve(true);
                    modal.hide();
                };
                const onHidden = () => {
                    cleanup();
                };
                const cleanup = () => {
                    cancelBtn.removeEventListener("click", onCancel);
                    okBtn.removeEventListener("click", onConfirm);
                    modalEl.removeEventListener("hidden.bs.modal", onHidden);
                    settingsModal.classList.remove("dimmed");
                };

                cancelBtn.addEventListener("click", onCancel);
                okBtn.addEventListener("click", onConfirm);
                modalEl.addEventListener("hidden.bs.modal", onHidden);
                modal.show();
            });
        }

        // function to setup eventlisteners for filter buttons
        function setup_sections_filters() {
            update_switch_local_storage("switch.showAllRuns", settings.switch.showAllRuns, true)
            document.getElementById("overviewName").hidden = !settings.switch.showAllRuns; // set the initial state of the overview name select
            document.getElementById("switchShowAllRuns").addEventListener("click", function () {
                settings.switch.showAllRuns = !settings.switch.showAllRuns
                document.getElementById("overviewName").hidden = !settings.switch.showAllRuns;
                update_switch_local_storage("switch.showAllRuns", settings.switch.showAllRuns);
                create_overview_statistics_graphs();
            });
            update_switch_local_storage("switch.runTags", settings.switch.runTags, true);
            setup_names_in_overview_select(); // update the names in the select to make sure the runTags option is taken into account
            document.getElementById("switchRunTags").addEventListener("click", function () {
                settings.switch.runTags = !settings.switch.runTags
                update_switch_local_storage("switch.runTags", settings.switch.runTags);
                setup_names_in_overview_select();
                create_overview_statistics_graphs();
            });
            document.getElementById("overviewSelectName").addEventListener("change", function () {
                create_overview_statistics_graphs();
            });
            document.getElementById("overviewDurationPercentage").addEventListener("change", function () {
                create_overview_statistics_graphs();
            });
            document.getElementById("suiteSelectSuites").addEventListener("change", () => {
                create_suite_duration_graph();
                create_suite_statistics_graph();
            });
            update_switch_local_storage("switch.suitePathsSuiteSection", settings.switch.suitePathsSuiteSection, true);
            document.getElementById("switchSuitePathsSuiteSection").addEventListener("change", (e) => {
                settings.switch.suitePathsSuiteSection = !settings.switch.suitePathsSuiteSection;
                update_switch_local_storage("switch.suitePathsSuiteSection", settings.switch.suitePathsSuiteSection);
                setup_suites_in_suite_select();
                create_suite_statistics_graph();
                create_suite_duration_graph();
                create_suite_most_failed_graph();
            });
            document.getElementById("resetSuiteFolder").addEventListener("click", () => {
                create_suite_folder_donut_graph("");
            });
            document.getElementById("suiteSelectTests").addEventListener("change", () => {
                setup_testtags_in_select();
                setup_tests_in_select();
                create_test_statistics_graph();
                create_test_duration_graph();
                create_test_duration_deviation_graph();
            });
            update_switch_local_storage("switch.suitePathsTestSection", settings.switch.suitePathsTestSection, true);
            document.getElementById("switchSuitePathsTestSection").addEventListener("change", () => {
                settings.switch.suitePathsTestSection = !settings.switch.suitePathsTestSection;
                update_switch_local_storage("switch.suitePathsTestSection", settings.switch.suitePathsTestSection);
                setup_suites_in_test_select();
                create_test_statistics_graph();
                create_test_duration_graph();
                create_test_duration_deviation_graph();
                create_test_messages_graph();
                create_test_most_flaky_graph();
                create_test_recent_most_flaky_graph();
                create_test_most_failed_graph();
                create_test_recent_most_failed_graph();
            });
            document.getElementById("testTagsSelect").addEventListener("change", () => {
                setup_tests_in_select();
                create_test_statistics_graph();
                create_test_duration_graph();
                create_test_duration_deviation_graph();
            });
            document.getElementById("testSelect").addEventListener("change", () => {
                create_test_statistics_graph();
                create_test_duration_graph();
                create_test_duration_deviation_graph();
            });
            document.getElementById("keywordSelect").addEventListener("change", () => {
                create_keyword_statistics_graph();
                create_keyword_times_run_graph();
                create_keyword_total_duration_graph();
                create_keyword_average_duration_graph();
                create_keyword_min_duration_graph();
                create_keyword_max_duration_graph();
            });
            // compare filters
            compareRunIds.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', () => {
                        create_compare_statistics_graph();
                        create_compare_suite_duration_graph();
                        create_compare_tests_graph();
                    });
                }
            });
            update_switch_local_storage("switch.suitePathsCompareSection", settings.switch.suitePathsCompareSection, true);
            document.getElementById("switchSuitePathsCompareSection").addEventListener("change", (e) => {
                settings.switch.suitePathsCompareSection = !settings.switch.suitePathsCompareSection;
                update_switch_local_storage("switch.suitePathsCompareSection", settings.switch.suitePathsCompareSection);
                create_compare_statistics_graph();
                create_compare_suite_duration_graph();
                create_compare_tests_graph();
            });
        }

        // function to setup eventlisteners for changing the graph view buttons
        function setup_graph_view_buttons() {
            // eventlisteners for fullscreen buttons
            for (let fullscreenButton of fullscreenButtons) {
                const fullscreenId = `${fullscreenButton}Fullscreen`;
                const closeId = `${fullscreenButton}Close`;
                const graphFunctionName = `create_${camelcase_to_underscore(fullscreenButton)}_graph`;

                const toggleFullscreen = (entering) => {
                    const fullscreen = document.getElementById(fullscreenId);
                    const close = document.getElementById(closeId);
                    const content = fullscreen.closest(".grid-stack-item-content");

                    inFullscreen = entering;
                    fullscreen.hidden = entering;
                    close.hidden = !entering;
                    content.classList.toggle("fullscreen", entering);
                    document.body.classList.toggle("lock-scroll", entering);
                    document.documentElement.classList.toggle("html-scroll", !entering)

                    if (typeof window[graphFunctionName] === "function") {
                        window[graphFunctionName]();
                    }

                    if (fullscreenButton === "runDonut") {
                        create_run_donut_total_graph();
                    } else if (fullscreenButton === "suiteFolderDonut") {
                        create_suite_folder_fail_donut_graph();
                    }

                    let section = null;
                    if (fullscreenButton.includes("suite")) {
                        section = "suite";
                    } else if (fullscreenButton.includes("test")) {
                        section = "test";
                    } else if (fullscreenButton.includes("keyword")) {
                        section = "keyword";
                    } else if (fullscreenButton.includes("compare")) {
                        section = "compare";
                    }
                    if (section) {
                        const filters = document.getElementById(`${section}SectionFilters`);
                        const originalContainer = document.getElementById(`${section}SectionFiltersContainer`);
                        if (entering) {
                            const fullscreenHeader = document.querySelector('.grid-stack-item-content.fullscreen');
                            fullscreenHeader.insertBefore(filters, fullscreenHeader.firstChild);
                        } else {
                            originalContainer.appendChild(filters);
                        }
                    }
                };

                document.getElementById(fullscreenId).addEventListener("click", () => {
                    inFullscreenGraph = fullscreenId;
                    lastScrollY = window.scrollY;
                    $("#navigation").hide();
                    toggleFullscreen(true);
                });

                document.getElementById(closeId).addEventListener("click", () => {
                    inFullscreenGraph = ""
                    $("#navigation").show();
                    toggleFullscreen(false);
                    window.scrollTo({ top: lastScrollY, behavior: "auto" });
                });
            }
            // has to be added after the creation of the sections and graphs
            document.getElementById("suiteFolderDonutGoUp").addEventListener("click", function () {
                function remove_last_folder(path) {
                    const parts = path.split(".");
                    parts.pop();
                    return parts.length > 0 ? parts.join('.') : "";
                }
                const folder = remove_last_folder(previousFolder)
                if (previousFolder == "" && folder == "") { return }
                create_suite_folder_donut_graph(folder)
            });
            // ignore skip button eventlisteners
            document.getElementById("ignoreSkips").addEventListener("change", () => {
                ignoreSkips = !ignoreSkips;
                create_test_most_flaky_graph();
            });
            document.getElementById("ignoreSkipsRecent").addEventListener("change", () => {
                ignoreSkipsRecent = !ignoreSkipsRecent;
                create_test_recent_most_flaky_graph();
            });
            document.getElementById("onlyFailedFolders").addEventListener("change", () => {
                onlyFailedFolders = !onlyFailedFolders;
                create_suite_folder_donut_graph("");
            });
            document.getElementById("heatMapTestType").addEventListener("change", () => {
                create_run_heatmap_graph();
            });
            document.getElementById("heatMapHour").addEventListener("change", () => {
                heatMapHourAll = document.getElementById("heatMapHour").value == "All" ? true : false;
                create_run_heatmap_graph();
            });
            document.getElementById("testOnlyChanges").addEventListener("change", () => {
                create_test_statistics_graph();
            });
            document.getElementById("compareOnlyChanges").addEventListener("change", () => {
                create_compare_tests_graph();
            });
            // graph layout changes
            document.querySelectorAll(".shown-graph").forEach(btn => {
                btn.addEventListener("click", () => {
                    btn.hidden = true;
                    document.getElementById(`${btn.id.replace("Shown", "Hidden")}`).hidden = false;
                })
            });
            document.querySelectorAll(".hidden-graph").forEach(btn => {
                btn.addEventListener("click", () => {
                    btn.hidden = true;
                    document.getElementById(`${btn.id.replace("Hidden", "Shown")}`).hidden = false;
                })
            });
            // table layout changes
            document.querySelectorAll(".move-up-table").forEach(btn => {
                btn.addEventListener("click", () => {
                    const section = btn.closest(".table-section");
                    const previous = section.previousElementSibling;
                    if (previous && previous.classList.contains("table-section")) {
                        section.parentElement.insertBefore(section, previous);
                    }
                });
            });
            document.querySelectorAll(".move-down-table").forEach(btn => {
                btn.addEventListener("click", () => {
                    const section = btn.closest(".table-section");
                    const next = section.nextElementSibling;
                    if (next && next.classList.contains("table-section")) {
                        section.parentElement.insertBefore(next, section);
                    }
                });
            });

            function handle_graph_change_type_button_click(graphChangeButton, graphType, camelButtonName) {
                update_graph_type(`${camelButtonName}GraphType`, graphType)
                window[`create_${graphChangeButton}_graph`]();
                if (graphChangeButton == 'run_donut') { create_run_donut_total_graph(); }
                if (graphChangeButton == 'suite_folder_donut') { create_suite_folder_fail_donut_graph(); }
            }
            function add_graph_eventlisteners(graphChangeButton, buttonTypes) {
                const camelButtonName = underscore_to_camelcase(graphChangeButton);
                const graphTypes = buttonTypes.split(",");
                graphTypes.forEach((graphType, index) => {
                    const buttonId = `${camelButtonName}Graph${graphType}`;
                    if (document.getElementById(buttonId)) {
                        document.getElementById(buttonId).addEventListener("click", () => {
                            handle_graph_change_type_button_click(graphChangeButton, graphType.toLowerCase(), camelButtonName);
                        });
                    }
                });
            }
            Object.entries(graphChangeButtons).forEach(([graphChangeButton, buttonTypes]) => {
                add_graph_eventlisteners(graphChangeButton, buttonTypes);
            });
        }

        /////////////////////////////////////
        // FILTER BUTTON CONTENT FUNCTIONS //
        /////////////////////////////////////

        // function to setup run amount filter maximum
        function setup_run_amount_filter() {
            document.getElementById("amount").setAttribute("max", runs.length)
        }

        // function that initializes the from date/time and to date/time selection boxes in the filters
        function setup_lowest_highest_dates() {
            var dates = [];
            for (run of runs) {
                dates.push(new Date(run.run_start));
            }
            if (dates.length == 0) {
                document.getElementById("fromDate").value = "1900-01-01";
                document.getElementById("fromTime").value = "00:00";
                document.getElementById("toDate").value = "9999-12-31";
                document.getElementById("toTime").value = "23:59";
                return
            }
            var lowest = new Date(Math.min.apply(null, dates));
            var highest = new Date(Math.max.apply(null, dates));
            var tzoffset = new Date().getTimezoneOffset() * 60000;
            lowest = new Date(new Date(lowest - tzoffset).getTime() + -1 * 60000); // this is to account for seconds in the initial filter value
            highest = new Date(new Date(highest - tzoffset).getTime() + 1 * 60000); // this is to account for seconds in the initial filter value
            lowest.setTime(lowest.getTime() - 1 * 60 * 60 * 1000) // minus 1 hour to account for possible daylight saving time switches of 1 hour!
            highest.setTime(highest.getTime() + 1 * 60 * 60 * 1000) // plus 1 hour to account for possible daylight saving time switches of 1 hour!
            document.getElementById("fromDate").value = lowest.toISOString().split("T")[0];
            document.getElementById("fromTime").value = lowest.toISOString().split("T")[1].substring(0, 5);
            document.getElementById("toDate").value = highest.toISOString().split("T")[0];
            document.getElementById("toTime").value = highest.toISOString().split("T")[1].substring(0, 5);
        }

        // function to setup metadata filter if there is metadata in the data
        function setup_metadata_filter() {
            var metadataItems = new Set();
            for (const run of runs) {
                if (!run.metadata) continue;
                const jsonStr = run.metadata.replace(/'/g, '"');
                const parsed = JSON.parse(jsonStr);
                parsed.forEach(item => metadataItems.add(item));
            }
            metadataItems = Array.from(metadataItems).sort((a, b) => a.localeCompare(b, undefined, { sensitivity: 'base' }));
            const metadataFilter = document.getElementById("metadataFilter");
            if (metadataItems.length > 0) {
                metadataFilter.hidden = false;
                const optionsHtml = metadataItems
                    .map(label => `<option value="${label}">${label}</option>`)
                    .join("");
                const metadataSelect = document.getElementById("metadata");
                metadataSelect.innerHTML = `<option value="All">All</option>` + optionsHtml;
            } else {
                metadataFilter.hidden = true;
            }
        }

        // function to update the available runs to select in the filters
        function setup_runs_in_select_filter_buttons() {
            const runOptions = new Set();
            runs.forEach(run => runOptions.add(run.name));
            const optionsHtml = Array.from(runOptions)
                .map(runName => `<option value="${runName}">${runName}</option>`)
                .join("");
            const runsSelect = document.getElementById("runs");
            runsSelect.innerHTML = `<option value="All">All</option>` + optionsHtml;
        }

        // function to update the available runtags to select in the filters
        function setup_runtags_in_select_filter_buttons() {
            const tags = new Set();
            runs.forEach(run => {
                run.tags.split(",").forEach(tag => {
                    if (tag) { // Avoid adding empty tags
                        tags.add(tag);
                    }
                });
            });
            const andOrTags = `
                <li class="list-group-item d-flex small">
                    <div class="btn-group form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="useOrTags" />
                    </div>
                    <div class="btn-group">
                        <label class="form-check-label" for="useOrTags">Use OR (default AND)</label>
                    </div>
                </li>
            `;
            const listItemTemplate = (value) => `
                <li class="list-group-item list-group-item-action d-flex small">
                    <input class="form-check-input me-1" type="checkbox" value="" id="${value}">
                    <label class="form-check-label ms-2" for="${value}">${value}</label>
                </li>
            `;
            const listItems = [listItemTemplate("All")].concat(
                Array.from(tags).map(tag => listItemTemplate(tag))
            ).join("");
            const tagsSelect = document.getElementById("runTag");
            tagsSelect.innerHTML = andOrTags + listItems;
            document.getElementById("All").checked = true;
            if (tags.size > 0) {
                document.getElementById("runTagFilter").hidden = false
            } else {
                document.getElementById("runTagFilter").hidden = true
            }
        }

        function setup_names_in_overview_select() {
            const overviewSelectName = document.getElementById("overviewSelectName")
            const names = new Set()
            for (const run of runs) {
                var name = '';
                if (settings.switch.runTags) {
                    const tags = run.tags.split(",")
                    var foundTag = false;
                    for (const tag of tags) {
                        if (tag.startsWith('project_')) {
                            name = tag;
                            foundTag = true;
                            break
                        }
                    }
                    if (!foundTag) name = run.name;
                } else {
                    name = run.name;
                }
                names.add(name)
            }
            overviewSelectName.innerHTML = ""
            names.forEach(item => overviewSelectName.options.add(new Option(item, item)));
        }

        // function to update the available runs in the selects
        function setup_runs_in_compare_selects() {
            const selects = compareRunIds.map(id => document.getElementById(id));
            const items = filteredRuns.map(run => settings.show.aliases ? run.run_alias : run.run_start);
            selects.forEach(select => select.innerHTML = "")
            selects.forEach(select => {
                select.options.add(new Option("None", "None"));
                items.forEach(item => select.options.add(new Option(item, item)));
            });
            selects[0].selectedIndex = selects[0].options.length - 1;
            selects[1].selectedIndex = selects[1].options.length - 2;
        }

        // function to update the available suites to select in the suite filters
        function setup_suites_in_suite_select() {
            const suiteSelectSuites = document.getElementById("suiteSelectSuites");
            const suiteFolder = document.getElementById("suiteFolder").innerText;
            suiteSelectSuites.innerHTML = "";
            var suiteNames = new Set()
            for (const suite of filteredSuites) {
                if (suiteFolder != "All" && !(suite.full_name.startsWith(suiteFolder + ".") || suite.full_name == suiteFolder)) {
                    continue
                }
                if (settings.switch.suitePathsSuiteSection) {
                    suiteNames.add(suite.full_name);
                } else {
                    suiteNames.add(suite.name);
                }
            }
            suiteNames = [...suiteNames].sort()
            suiteSelectSuites.options.add(new Option("All Suites Separate", "All Suites Separate"));
            suiteSelectSuites.options.add(new Option("All Suites Combined", "All Suites Combined"));
            suiteNames.forEach(suiteName => {
                suiteSelectSuites.options.add(new Option(suiteName, suiteName));
            });
            suiteSelectSuites.selectedIndex = 1;
        }

        // function to update the available suites to select in the test filters
        function setup_suites_in_test_select() {
            const suiteSelectTests = document.getElementById("suiteSelectTests");
            suiteSelectTests.innerHTML = "";
            const suiteNames = settings.switch.suitePathsTestSection
                ? [...new Set(filteredSuites.map(suite => suite.full_name))].sort()
                : [...new Set(filteredSuites.map(suite => suite.name))].sort();
            suiteSelectTests.options.add(new Option("All", "All"));
            suiteNames.forEach(suiteName => {
                suiteSelectTests.options.add(new Option(suiteName, suiteName));
            });
            suiteSelectTests.selectedIndex = 1;
        }

        // function to update the available tests to select in the filters
        // applies to the test filter on the test statistics level
        function setup_tests_in_select() {
            const suiteSelectTests = document.getElementById("suiteSelectTests").value;
            const testTagsSelect = document.getElementById("testTagsSelect").value;
            const testSelect = document.getElementById("testSelect");
            testSelect.innerHTML = "";
            const testNames = filteredTests.reduce((names, test) => {
                const isInSuite = settings.switch.suitePathsTestSection
                    ? test.full_name.includes(`${suiteSelectTests}.${test.name}`) || suiteSelectTests === "All"
                    : test.full_name.includes(`.${suiteSelectTests}.${test.name}`) || suiteSelectTests === "All"
                const hasTag = testTagsSelect === "All" || test.tags.includes(testTagsSelect);

                if (isInSuite && hasTag && !names.includes(test.name)) {
                    names.push(test.name);
                }

                return names;
            }, []);
            testSelect.options.add(new Option("All", "All"));
            testNames.forEach(testName => testSelect.options.add(new Option(testName, testName)));
        }

        // function to update the available testtags to select in the filters
        // applies to the testtag filter on the test statistics level
        function setup_testtags_in_select() {
            const suiteSelectTests = document.getElementById("suiteSelectTests").value;
            const testTagsSelect = document.getElementById("testTagsSelect");
            testTagsSelect.innerHTML = "";
            const testTags = [...new Set(filteredTests.reduce((tags, test) => {
                if (settings.switch.suitePathsTestSection) {
                    if (test.full_name.includes(`${suiteSelectTests}.${test.name}`) || suiteSelectTests === "All") {
                        test.tags.replace(/\[|\]/g, "").split(",").forEach(tag => tags.push(tag.trim()));
                    }
                } else {
                    if (test.full_name.includes(`.${suiteSelectTests}.${test.name}`) || suiteSelectTests === "All") {
                        test.tags.replace(/\[|\]/g, "").split(",").forEach(tag => tags.push(tag.trim()));
                    }
                }
                return tags;
            }, []))].filter(Boolean);
            testTagsSelect.options.add(new Option("All", "All"));
            testTags.forEach(tag => testTagsSelect.options.add(new Option(tag, tag)));
        }

        // function to update the available keywords to select in the filters
        // applies to the keyword filter on the keyword statistics level
        function setup_keywords_in_select() {
            const keywordSelect = document.getElementById("keywordSelect");
            keywordSelect.innerHTML = "";
            const keywordNames = [...new Set(filteredKeywords.map(keyword => keyword.name))].sort();
            keywordNames.forEach(keywordName => keywordSelect.options.add(new Option(keywordName, keywordName)));
            keywordSelect.selectedIndex = keywordNames.length - 1;
        }

        ///////////////////////////
        // DATA FILTER FUNCTIONS //
        ///////////////////////////

        // function to remove milliseconds if needed
        function remove_milliseconds(data) {
            if (settings.show.milliseconds) { return data; }

            return data.map(obj => ({
                ...obj,
                run_start: obj.run_start.slice(0, 19)
            }));
        }

        // function to filter run data based on the runs (aka run name) filter
        function filter_runs(runs) {
            if (selectedRunSetting != '') {
                document.getElementById("runs").value = selectedRunSetting
                selectedRunSetting = ''
            }
            const selectedRun = document.getElementById("runs").value;
            if (selectedRun === "All") {
                var selectedRuns = runs
            } else {
                var selectedRuns = Object.values(runs).filter(run => run.name === selectedRun)
            }
            return selectedRuns;
        }

        // function to filter run data based on the run tags filter
        function filter_runtags(runs) {
            const tagElements = document.getElementById("runTag").getElementsByTagName("input");
            const useOrTags = document.getElementById("useOrTags").checked;

            if (selectedTagSetting != '') {
                for (const input of tagElements) {
                    input.checked = false;
                    if (input.id === selectedTagSetting) {
                        input.checked = true;
                    }
                }
                useOrTags.checked = false;
                selectedTagSetting = ''
            }

            const selectedTags = Array.from(tagElements)
                .filter(tagElement => tagElement.checked)
                .map(tagElement => tagElement.id);
            if (selectedTags.includes("All")) { // If "All" is selected, return all runs
                return runs;
            }
            if (selectedTags.length === 0) { // If no tags are selected, return an empty list
                return [];
            }
            return runs.filter(run => {
                const runTags = run.tags.split(",");
                if (!useOrTags) { // Use AND logic: the run must contain all selected tags
                    return selectedTags.every(selectedTag => runTags.includes(selectedTag));
                }
                // Use OR logic: the run must contain at least one selected tag
                return selectedTags.some(selectedTag => runTags.includes(selectedTag));
            });
        }

        // function to filter the run data based on the selected date range
        function filter_dates(runs) {
            const fromDate = document.getElementById("fromDate").value;
            const fromTime = document.getElementById("fromTime").value;
            const toDate = document.getElementById("toDate").value;
            const toTime = document.getElementById("toTime").value;
            if (!fromDate || !fromTime || !toDate || !toTime) { // Return all runs if any date/time values are missing
                return runs;
            }
            const fromDateTime = new Date(`${fromDate} ${fromTime}:00`);
            const toDateTime = new Date(`${toDate} ${toTime}:00`);
            if (fromDateTime > toDateTime) { // Check for valid date range
                alert("Filter error: The selected from date + time is later than your selected to date + time. Date filter has not been applied!");
                return runs;  // Return all runs if invalid range
            }
            return runs.filter(run => {
                const runStart = new Date(run.run_start);
                return runStart >= fromDateTime && runStart <= toDateTime;
            });
        }

        // function to filter the amount of runs based on the filter
        function filter_amount(filteredRuns) {
            var selectedAmount = document.getElementById("amount").value;
            // Handle weird selectedAmountValues:
            if (selectedAmount == "") {
                $("#amount").val(10).trigger("change.amount");
                selectedAmount = document.getElementById("amount").value;
            }
            if (selectedAmount > runs.length) {
                $("#amount").val(runs.length).trigger("change.amount");
                selectedAmount = document.getElementById("amount").value;
            }
            if (selectedAmount < 0) {
                $("#amount").val(0).trigger("change.amount");
                selectedAmount = document.getElementById("amount").value;
            }
            if (selectedAmount.includes(",")) {
                $("#amount").val(selectedAmount.split(",")[0]).trigger("change.amount");
                selectedAmount = document.getElementById("amount").value;
            }
            if (selectedAmount.includes(".")) {
                $("#amount").val(selectedAmount.split(".")[0]).trigger("change.amount");
                selectedAmount = document.getElementById("amount").value;
            }
            filteredAmount = filteredRuns.length
            if (selectedAmount == 0) { return [] }
            filteredRuns = filteredRuns.slice(- selectedAmount)
            return filteredRuns
        }

        // function to filter the runs based on the selected metadata key:value pair
        function filter_metadata(filteredRuns) {
            const selectedMetadata = document.getElementById("metadata").value;
            if (selectedMetadata == '' || selectedMetadata == 'All') return filteredRuns;
            var filteredData = []
            for (const run of filteredRuns) {
                if (run.metadata.includes(selectedMetadata)) {
                    filteredData.push(run)
                }
            }
            return filteredData
        }

        // function to filter suites/tests/keywords based on the already filtered runs
        function filter_data(data) {
            var validRunStarts = [];
            for (value of filteredRuns) {
                validRunStarts.push(value.run_start);
            }
            var filteredData = [];
            for (value of data) {
                if (validRunStarts.includes(value.run_start)) {
                    filteredData.push(value);
                }
            }
            return filteredData;
        }

        //////////////////////////////////////
        // GRAPH & TABLE CREATION FUNCTIONS //
        //////////////////////////////////////

        // function to create overview statistics blocks in the overview section
        function create_overview_statistics_graphs() {
            for (const g of overviewGraphs) window[g].destroy();
            overviewGraphs = [];

            const data = {};
            for (const run of runs) {
                var name = '';
                if (settings.switch.runTags) {
                    const tags = run.tags.split(",");
                    var foundTag = false;
                    for (const tag of tags) {
                        if (tag.startsWith('project_')) {
                            name = tag;
                            foundTag = true;
                            break;
                        }
                    }
                    if (!foundTag) name = run.name;
                } else {
                    name = run.name;
                }

                if (!data[name]) {
                    data[name] = { runs: [] };
                }
                data[name].runs.push({
                    stats: [run.passed, run.failed, run.skipped, run.elapsed_s, run.path],
                    duration: run.elapsed_s,
                    passed_run: run.failed === 0 ? 1 : 0
                });
            }

            const avg = arr => arr.reduce((a, b) => a + parseFloat(b), 0) / arr.length;
            const compare_to_average = (duration, avg, percent) => {
                const t = parseFloat(percent) / 100;
                return duration < avg * (1 - t) ? 'text-passed' :
                    duration > avg * (1 + t) ? 'text-failed' : '';
            };

            const overviewCard = (name, stats, duration, status, amount, compares, passed_runs, log_path, log_name, svg, runIndex) => `
        <div class="col-4 overview-card" id="${name}Card${runIndex}">
            <div class="card border-3 border-${status}">
                <div class="card-body">
                    <div class="row">
                        <div class="col text-center"><h5 class="card-title mb-0">${name}</h5></div>
                        <div class="col-auto"><h5>#${amount}</h5></div>
                    </div>
                    <div class="row">
                        <div class="col-4 overview-canvas">
                            <canvas id="${name}Graph${runIndex}"></canvas>
                        </div>
                        <div class="col-3 d-flex align-items-center">
                            <div>
                                <div class="green-text">Passed: ${stats[0]}</div>
                                <div class="red-text">Failed: ${stats[1]}</div>
                                <div class="yellow-text">Skipped: ${stats[2]}</div>
                            </div>
                        </div>
                        <div class="col-5 d-flex align-items-center" style="overflow:auto;">
                            <div>
                                <div class="${compares}">${svg} <i>${Math.round(duration)}s</i></div>
                                <div>Passed Runs: ${passed_runs}%</div>
                                <a href="#" onclick="event.stopPropagation(); open_log_from_path('${log_path}'); return false;" target="_blank">${log_name}</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;

            let overviewHTML = '';
            const overviewDurationPercentage = document.getElementById('overviewDurationPercentage').value;
            const keys = Object.keys(data).sort();
            const svg = document.getElementsByTagName("html")[0].getAttribute("data-bs-theme") == "dark" ? clockDarkSVG : clockLightSVG;
            document.getElementById("overviewTitle").innerHTML = `Overview Statistics <h6>showing ${Object.keys(runs).length} runs in ${keys.length} projects</h6`;

            let cardCounter = 0;

            keys.forEach(key => {
                const runList = [...data[key].runs].reverse(); // newest first
                const runsToShow = settings.switch.showAllRuns ? runList : [runList[0]];

                const selectedName = settings.switch.showAllRuns
                    ? document.getElementById("overviewSelectName").value
                    : null;
                if (settings.switch.showAllRuns && selectedName && selectedName !== key) {
                    return;
                }

                runsToShow.forEach((r, runIndex) => {
                    const [passed, failed, skipped, duration, rawPath] = r.stats;
                    const path = transform_file_path(rawPath).replaceAll('\\', '\\\\');
                    const runNumber = runList.length - runIndex;

                    const durationsForAvg = runList.map(x => x.duration).slice(1);
                    const average = durationsForAvg.length ? avg(durationsForAvg) : duration;

                    const compares = compare_to_average(duration, average, overviewDurationPercentage);
                    const passedRuns = (runList.reduce((a, b) => a + b.passed_run, 0) / runList.length * 100).toFixed(2);
                    const status = failed > 0 ? 'failed' : skipped > 0 ? 'skipped' : 'passed';
                    const log_path = use_logs ? path : '';
                    const log_name = use_logs ? 'log.html' : '';

                    if (cardCounter % 3 === 0) {
                        overviewHTML += '<div class="row">';
                    }

                    overviewHTML += overviewCard(
                        key,
                        r.stats,
                        duration,
                        status,
                        runNumber,
                        compares,
                        passedRuns,
                        log_path,
                        log_name,
                        svg,
                        runIndex
                    );

                    cardCounter++;

                    if (cardCounter % 3 === 0) {
                        overviewHTML += '</div>';
                    }
                });
            });

            if (cardCounter % 3 !== 0) {
                overviewHTML += '</div>';
            }

            document.getElementById("gridOverview").innerHTML = overviewHTML;

            // attach click listeners (from original logic)
            keys.forEach(key => {
                const runList = data[key].runs.slice().reverse();
                const runsToShow = settings.switch.showAllRuns ? runList : [runList[0]];
                const selectedName = settings.switch.showAllRuns
                    ? document.getElementById("overviewSelectName").value
                    : null;

                if (settings.switch.showAllRuns && selectedName && selectedName !== key) {
                    return;
                }

                runsToShow.forEach((r, runIndex) => {
                    const cardEl = document.getElementById(`${key}Card${runIndex}`);
                    if (cardEl) {
                        cardEl.addEventListener("click", () => {
                            document.getElementById("runs").value = "All";
                            const tagElements = document.getElementById("runTag").getElementsByTagName("input");
                            for (const input of tagElements) {
                                input.checked = false;
                                if (input.id == "All") input.checked = true;
                            }
                            if (key.startsWith("project_")) {
                                selectedTagSetting = key;
                            } else {
                                selectedRunSetting = key;
                            }
                            update_menu("menuDashboard");
                        });
                    }
                });
            });

            // build charts
            keys.forEach(key => {
                const runList = data[key].runs.slice().reverse();
                const runsToShow = settings.switch.showAllRuns ? runList : [runList[0]];
                const selectedName = settings.switch.showAllRuns
                    ? document.getElementById("overviewSelectName").value
                    : null;

                if (settings.switch.showAllRuns && selectedName && selectedName !== key) {
                    return;
                }

                runsToShow.forEach((r, runIndex) => {
                    const el = document.getElementById(`${key}Graph${runIndex}`);
                    const [passed, failed, skipped] = r.stats;
                    const chartData = {
                        labels: [],
                        datasets: [{
                            data: [],
                            backgroundColor: [],
                            borderColor: [],
                            hoverOffset: 4
                        }]
                    };
                    const pushIf = (label, value, bg, border) => {
                        if (value > 0) {
                            chartData.labels.push(label);
                            chartData.datasets[0].data.push(value);
                            chartData.datasets[0].backgroundColor.push(bg);
                            chartData.datasets[0].borderColor.push(border);
                        }
                    };
                    pushIf('passed', passed, passedBackgroundColor, passedBackgroundBorderColor);
                    pushIf('failed', failed, failedBackgroundColor, failedBackgroundBorderColor);
                    pushIf('skipped', skipped, skippedBackgroundColor, skippedBackgroundBorderColor);

                    const config = get_graph_config('donut', chartData, 'Run Status');
                    delete config.options.plugins.datalabels;
                    config.options.plugins.legend.display = false;
                    window[`${key}Graph${runIndex}`] = new Chart(el, config);
                    overviewGraphs.push(`${key}Graph${runIndex}`);
                });
            });
        }

        // function to create run statistics graph in the run section
        function create_run_statistics_graph() {
            if (runStatisticsGraph) {
                runStatisticsGraph.destroy();
            }
            const data = get_statistics_graph_data("run", settings.graphTypes.runStatisticsGraphType, filteredRuns);
            const graphData = data[0]
            var config;
            if (settings.graphTypes.runStatisticsGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Amount", false);
            } else if (settings.graphTypes.runStatisticsGraphType == "amount") {
                config = get_graph_config("bar", graphData, "", "Run", "Amount Of Tests");
            } else if (settings.graphTypes.runStatisticsGraphType == "percentages") {
                config = get_graph_config("bar", graphData, "", "Run", "Percentage");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            runStatisticsGraph = new Chart("runStatisticsGraph", config);
            runStatisticsGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(runStatisticsGraph, event)
            });
        }

        // function to create run donut graph in the run section
        function create_run_donut_graph() {
            if (runDonutGraph) {
                runDonutGraph.destroy();
            }
            const data = get_donut_graph_data("run", filteredRuns);
            const graphData = data[0]
            const callbackData = data[1]
            var config = get_graph_config("donut", graphData, `Last Run Status`);
            config.options.onClick = (event, chartElement) => {
                if (chartElement.length) {
                    open_log_file(event, chartElement, callbackData)
                }
            };
            config.options.onHover = function (event, chartElement) {
                const targetCanvas = event.native.target;
                if (chartElement.length > 0) {
                    targetCanvas.style.cursor = 'pointer';
                } else {
                    targetCanvas.style.cursor = 'default';
                }
            };
            runDonutGraph = new Chart("runDonutGraph", config);
        }

        // function to create run donut graph in the run section
        function create_run_donut_total_graph() {
            if (runDonutTotalGraph) {
                runDonutTotalGraph.destroy();
            }
            const data = get_donut_total_graph_data("run", filteredRuns);
            const graphData = data[0]
            const callbackData = data[1]
            var config = get_graph_config("donut", graphData, `Total Status`);
            delete config.options.onClick;
            runDonutTotalGraph = new Chart("runDonutTotalGraph", config);
        }

        // function to create the run stats section in the run section
        function create_run_stats_graph() {
            const data = get_stats_data(filteredRuns, filteredSuites, filteredTests, filteredKeywords);
            document.getElementById('totalRuns').innerText = data.totalRuns
            document.getElementById('totalSuites').innerText = data.totalSuites
            document.getElementById('totalTests').innerText = data.totalTests
            document.getElementById('totalKeywords').innerText = data.totalKeywords
            document.getElementById('totalUniqueTests').innerText = data.totalUniqueTests
            document.getElementById('totalPassed').innerText = data.totalPassed
            document.getElementById('totalFailed').innerText = data.totalFailed
            document.getElementById('totalSkipped').innerText = data.totalSkipped
            document.getElementById('totalRunTime').innerText = data.totalRunTime
            document.getElementById('averageRunTime').innerText = data.averageRunTime
            document.getElementById('averageTestTime').innerText = data.averageTestTime
            document.getElementById('averagePassRate').innerText = data.averagePassRate
        }

        // function to create run duration graph in the run section
        function create_run_duration_graph() {
            if (runDurationGraph) {
                runDurationGraph.destroy();
            }
            var graphData = get_duration_graph_data("run", settings.graphTypes.runDurationGraphType, "elapsed_s", filteredRuns);
            var config;
            if (settings.graphTypes.runDurationGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("runDuration") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.runDurationGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            runDurationGraph = new Chart("runDurationGraph", config);
            runDurationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(runDurationGraph, event)
            });
        }

        // function to create the run heatmap
        function create_run_heatmap_graph() {
            if (runHeatmapGraph) {
                runHeatmapGraph.destroy();
            }
            const data = get_heatmap_graph_data(filteredTests);
            const graphData = data[0]
            const callbackData = data[1]
            var config = get_graph_config("heatmap", graphData, "", "Hour", "Day");
            delete config.options.onClick;
            config.options.plugins.tooltip = {
                callbacks: {
                    title: () => null,
                    label: ctx => {
                        const { x, y, v } = ctx.raw;
                        if (heatMapHourAll) {
                            return `Day: ${callbackData[Math.floor(y - 0.5)]}, Hour: ${Math.floor(x - 0.5)}, Amount: ${v}`;
                        } else {
                            return `Day: ${callbackData[Math.floor(y - 0.5)]}, Minute: ${Math.floor(x - 0.5)}, Amount: ${v}`;
                        }
                    }
                }
            }
            config.options.scales.y.ticks = {
                stepSize: 1,
                callback: val => callbackData[val] || ''
            }
            runHeatmapGraph = new Chart("runHeatmapGraph", config);
        }

        // function to create run table in the run section
        function create_run_table() {
            if (runTable) {
                runTable.destroy();
            }
            data = [];
            for (run of filteredRuns) {
                data.push([
                    run.run_start,
                    run.full_name,
                    run.name,
                    run.total,
                    run.passed,
                    run.failed,
                    run.skipped,
                    run.elapsed_s,
                    run.start_time,
                    run.tags,
                    run.run_alias,
                    run.metadata,
                ]);
            }
            runTable = new DataTable("#runTable", {
                layout: {
                    topStart: "info",
                    bottomStart: null,
                },
                columns: [
                    { title: "run" },
                    { title: "full_name" },
                    { title: "name" },
                    { title: "total" },
                    { title: "passed" },
                    { title: "failed" },
                    { title: "skipped" },
                    { title: "elapsed_s" },
                    { title: "start_time" },
                    { title: "tags" },
                    { title: "alias" },
                    { title: "metadata" },
                ],
                data: data,
            });
        }

        // function to create suite folder donut
        function create_suite_folder_donut_graph(folder) {
            const suiteFolder = document.getElementById("suiteFolder")
            suiteFolder.innerText = folder == "" || folder == undefined ? "All" : folder;
            if (folder || folder == "") { // not first load so update the graphs accordingly as well
                setup_suites_in_suite_select();
                create_suite_folder_fail_donut_graph();
                create_suite_statistics_graph();
                create_suite_duration_graph();
            }
            if (suiteFolderDonutGraph) {
                suiteFolderDonutGraph.destroy();
            }
            const data = get_donut_folder_graph_data("suite", filteredSuites, folder);
            const graphData = data[0]
            const callbackData = data[1]
            const labels = graphData.labels
            var config = get_graph_config("donut", graphData, "All Folders");
            config.options.plugins.tooltip.callbacks = {
                label: function (context) {
                    const label = labels[context.dataIndex]
                    const passed = callbackData[label].passed
                    const failed = callbackData[label].failed
                    const skipped = callbackData[label].skipped
                    return [`Total: ${context.raw}`, `Passed: ${passed}`, `Failed: ${failed}`, `Skipped: ${skipped}`];
                },
                title: function (tooltipItems) {
                    const fullTitle = tooltipItems[0].label;
                    const maxLineLength = 30;
                    const lines = fullTitle.match(new RegExp('.{1,' + maxLineLength + '}', 'g')) || [fullTitle];
                    return lines;
                }
            }
            config.options.onClick = (event) => {
                if (event.chart.tooltip.title) {
                    setTimeout(() => {
                        create_suite_folder_donut_graph(event.chart.tooltip.title.join(''));
                    }, 0);
                }
            };
            config.options.onHover = function (event, chartElement) {
                const targetCanvas = event.native.target;
                if (chartElement.length > 0) {
                    targetCanvas.style.cursor = 'pointer';
                } else {
                    targetCanvas.style.cursor = 'default';
                }
            };
            suiteFolderDonutGraph = new Chart("suiteFolderDonutGraph", config);
        }

        // function to create suite last failed donut
        function create_suite_folder_fail_donut_graph() {
            if (suiteFolderFailDonutGraph) {
                suiteFolderFailDonutGraph.destroy();
            }
            const data = get_donut_folder_fail_graph_data("suite", filteredSuites);
            const graphData = data[0]
            const callbackData = data[1]
            const labels = graphData.labels
            if (graphData.labels.length == 0) {
                graphData.labels = ["No Failed Folders In Last Run"]
                graphData.datasets = [{
                    data: [1],
                    backgroundColor: ["grey"],
                }]
            }
            var config = get_graph_config("donut", graphData, "Last Run");
            config.options.plugins.tooltip.callbacks = {
                label: function (context) {
                    if (context.label == "No Failed Folders In Last Run") { return null }
                    const label = labels[context.dataIndex]
                    const passed = callbackData[label].passed
                    const failed = callbackData[label].failed
                    const skipped = callbackData[label].skipped
                    return [`Passed: ${passed}`, `Failed: ${failed}`, `Skipped: ${skipped}`];
                },
                title: function (tooltipItem) {
                    return tooltipItem.label;
                }
            }
            config.options.plugins.datalabels = {
                ...dataLabelConfig,
                formatter: function (value, context) {
                    if (value === 0) return null;
                    const total = graphData.datasets[0].data.reduce((a, b) => a + b, 0);
                    const percentage = Math.round((value / total) * 100);
                    if (percentage <= 5) return null;
                    const label = graphData.labels[context.dataIndex].split(".").pop();
                    return `${label}: ${value} (${percentage}%)`;
                }
            };
            config.options.onClick = (event) => {
                if (event.chart.tooltip.title) {
                    setTimeout(() => {
                        create_suite_folder_donut_graph(event.chart.tooltip.title.join(''));
                    }, 0);
                }
            };
            config.options.onHover = function (event, chartElement) {
                const targetCanvas = event.native.target;
                if (chartElement.length > 0) {
                    targetCanvas.style.cursor = 'pointer';
                } else {
                    targetCanvas.style.cursor = 'default';
                }
            };
            suiteFolderFailDonutGraph = new Chart("suiteFolderFailDonutGraph", config);
        }

        // function to create suite statistics graph in the suite section
        function create_suite_statistics_graph() {
            if (suiteStatisticsGraph) {
                suiteStatisticsGraph.destroy();
            }
            const data = get_statistics_graph_data("suite", settings.graphTypes.suiteStatisticsGraphType, filteredSuites);
            const graphData = data[0]
            const callbackData = data[1]
            var config;
            if (settings.graphTypes.suiteStatisticsGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "amount", false);
                config.options.plugins.tooltip = {
                    callbacks: {
                        title: function (tooltipItem) {
                            return `${tooltipItem[0].label}: ${callbackData[tooltipItem[0].dataIndex]}`
                        }
                    }
                }
            } else if (settings.graphTypes.suiteStatisticsGraphType == "amount") {
                config = get_graph_config("bar", graphData, "", "Run", "Amount Of Tests");
                const filter = config.options.plugins.tooltip.filter
                config.options.plugins.tooltip = {
                    filter,
                    callbacks: {
                        title: function (tooltipItem) {
                            return `${tooltipItem[0].label}: ${callbackData[tooltipItem[0].dataIndex]}`
                        }
                    }
                }
            } else if (settings.graphTypes.suiteStatisticsGraphType == "percentages") {
                config = get_graph_config("bar", graphData, "", "Run", "Percentage");
                const filter = config.options.plugins.tooltip.filter
                config.options.plugins.tooltip = {
                    filter,
                    callbacks: {
                        title: function (tooltipItem) {
                            return `${tooltipItem[0].label}: ${callbackData[tooltipItem[0].dataIndex]}`
                        }
                    }
                }
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            suiteStatisticsGraph = new Chart("suiteStatisticsGraph", config);
            suiteStatisticsGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(suiteStatisticsGraph, event)
            });
        }

        // function to create suite duration graph in the suite section
        function create_suite_duration_graph() {
            if (suiteDurationGraph) {
                suiteDurationGraph.destroy();
            }
            const graphData = get_duration_graph_data("suite", settings.graphTypes.suiteDurationGraphType, "elapsed_s", filteredSuites);
            var config;
            if (settings.graphTypes.suiteDurationGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("suiteDuration") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.suiteDurationGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            suiteDurationGraph = new Chart("suiteDurationGraph", config);
            suiteDurationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(suiteDurationGraph, event)
            });
        }

        // function to create suite most failed graph in the suite section
        function create_suite_most_failed_graph() {
            if (suiteMostFailedGraph) {
                suiteMostFailedGraph.destroy();
            }
            const data = get_most_failed_data("suite", settings.graphTypes.suiteMostFailedGraphType, filteredSuites, false);
            const graphData = data[0];
            const callbackData = data[1];
            var config;
            const limit = inFullscreen && inFullscreenGraph.includes("suiteMostFailed") ? 50 : 10;
            if (settings.graphTypes.suiteMostFailedGraphType == "bar") {
                config = get_graph_config("bar", graphData, `Top ${limit}`, "Suite", "Fails");
                config.options.plugins.legend = { display: false };
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (tooltipItem) {
                            return callbackData[tooltipItem.label];
                        },
                    },
                };
                delete config.options.onClick
            } else if (settings.graphTypes.suiteMostFailedGraphType == "timeline") {
                config = get_graph_config("timeline", graphData, `Top ${limit}`, "Run", "Suite");
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (context) {
                            return callbackData[context.raw.x[0]];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        stepSize: 1,
                        callback: function (value, index, ticks) {
                            return callbackData[this.getLabelForValue(value)];
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Run",
                    },
                };
                config.options.onClick = (event, chartElement) => {
                    if (chartElement.length) {
                        open_log_file(event, chartElement, callbackData)
                    }
                };
                if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            }
            update_height("suiteMostFailedVertical", config.data.labels.length, settings.graphTypes.suiteMostFailedGraphType);
            suiteMostFailedGraph = new Chart("suiteMostFailedGraph", config);
            suiteMostFailedGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(suiteMostFailedGraph, event)
            });

            // const vertical = document.getElementById("suiteMostFailedVertical");
            // const observer = new ResizeObserver(entries => {
            //     for (let entry of entries) {
            //         update_height("suiteMostFailedVertical", config.data.labels.length, settings.graphTypes.suiteMostFailedGraphType);
            //         suiteMostFailedGraph.resize();
            //     }
            // });

            // observer.observe(vertical.closest(".grid-stack-item"));
        }

        // function to create suite table in the suite section
        function create_suite_table() {
            if (suiteTable) {
                suiteTable.destroy();
            }
            data = [];
            for (suite of filteredSuites) {
                data.push([
                    suite.run_start,
                    suite.full_name,
                    suite.name,
                    suite.total,
                    suite.passed,
                    suite.failed,
                    suite.skipped,
                    suite.elapsed_s,
                    suite.start_time,
                    suite.run_alias,
                    suite.id,
                ]);
            }
            suiteTable = new DataTable("#suiteTable", {
                layout: {
                    topStart: "info",
                    bottomStart: null,
                },
                columns: [
                    { title: "run" },
                    { title: "full_name" },
                    { title: "name" },
                    { title: "total" },
                    { title: "passed" },
                    { title: "failed" },
                    { title: "skipped" },
                    { title: "elapsed_s" },
                    { title: "start_time" },
                    { title: "alias" },
                    { title: "id" },
                ],
                data: data,
            });
        }

        // function to create test statistics graph in the test section
        function create_test_statistics_graph() {
            if (testStatisticsGraph) {
                testStatisticsGraph.destroy();
            }
            const data = get_test_statistics_data(filteredTests);
            const graphData = data[0]
            const runStarts = data[1]
            var config = get_graph_config("timeline", graphData, "", "Run", "Test");
            config.options.plugins.tooltip = {
                callbacks: {
                    label: function (context) {
                        return runStarts[context.raw.x[0]];
                    },
                },
            };
            config.options.scales.x = {
                ticks: {
                    minRotation: 45,
                    maxRotation: 45,
                    stepSize: 1,
                    callback: function (value, index, ticks) {
                        return runStarts[this.getLabelForValue(value)];
                    },
                },
                title: {
                    display: settings.show.axisTitles,
                    text: "Run",
                },
            };
            config.options.onClick = (event, chartElement) => {
                if (chartElement.length) {
                    open_log_file(event, chartElement, runStarts)
                }
            };
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            update_height("testStatisticsVertical", config.data.labels.length, "timeline");
            testStatisticsGraph = new Chart("testStatisticsGraph", config);
            testStatisticsGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testStatisticsGraph, event)
            });
        }

        // function to create test duration graph in the test section
        function create_test_duration_graph() {
            if (testDurationGraph) {
                testDurationGraph.destroy();
            }
            var graphData = get_duration_graph_data("test", settings.graphTypes.testDurationGraphType, "elapsed_s", filteredTests);
            var config;
            if (settings.graphTypes.testDurationGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("testDuration") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.testDurationGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            testDurationGraph = new Chart("testDurationGraph", config);
            testDurationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testDurationGraph, event)
            });
        }

        // function to create test messages graph in the test section
        function create_test_messages_graph() {
            if (testMessagesGraph) {
                testMessagesGraph.destroy();
            }
            const data = get_messages_data("test", settings.graphTypes.testMessagesGraphType, filteredTests);
            const graphData = data[0];
            const callbackData = data[1];
            var config;
            const limit = inFullscreen && inFullscreenGraph.includes("testMessages") ? 50 : 10;
            if (settings.graphTypes.testMessagesGraphType == "bar") {
                config = get_graph_config("bar", graphData, `Top ${limit}`, "Message", "Times");
                config.options.plugins.legend = { display: false };
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (tooltipItem) {
                            return callbackData[tooltipItem.label];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        callback: function (value, index) {
                            return this.getLabelForValue(value).slice(0, 40);
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Message",
                    },
                };
                delete config.options.onClick
            } else if (settings.graphTypes.testMessagesGraphType == "timeline") {
                config = get_graph_config("timeline", graphData, `Top ${limit}`, "Run", "Message");
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (context) {
                            return callbackData[context.raw.x[0]];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        stepSize: 1,
                        callback: function (value, index, ticks) {
                            return callbackData[this.getLabelForValue(value)];
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Run",
                    },
                };
                config.options.onClick = (event, chartElement) => {
                    if (chartElement.length) {
                        open_log_file(event, chartElement, callbackData)
                    }
                };
                config.options.scales.y.ticks = {
                    callback: function (value, index, ticks) {
                        return this.getLabelForValue(value).slice(0, 40);
                    },
                };
                if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            }
            update_height("testMessagesVertical", config.data.labels.length, settings.graphTypes.testMessagesGraphType);
            testMessagesGraph = new Chart("testMessagesGraph", config);
            testMessagesGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testMessagesGraph, event)
            });
        }

        // function to create test duration deviation graph in test section
        function create_test_duration_deviation_graph() {
            if (testDurationDeviationGraph) {
                testDurationDeviationGraph.destroy();
            }
            const graphData = get_duration_deviation_data("test", settings.graphTypes.testDurationDeviationGraphType, filteredTests)
            const config = get_graph_config("boxplot", graphData, "", "Test", "Duration");
            delete config.options.onClick
            testDurationDeviationGraph = new Chart("testDurationDeviationGraph", config);
            testDurationDeviationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testDurationDeviationGraph, event)
            });
        }

        // function to create test most flaky graph in test section
        function create_test_most_flaky_graph() {
            if (testMostFlakyGraph) {
                testMostFlakyGraph.destroy();
            }
            const data = get_most_flaky_data("test", settings.graphTypes.testMostFlakyGraphType, filteredTests, ignoreSkips, false);
            const graphData = data[0]
            const callbackData = data[1];
            var config;
            const limit = inFullscreen && inFullscreenGraph.includes("testMostFlaky") ? 50 : 10;
            if (settings.graphTypes.testMostFlakyGraphType == "bar") {
                config = get_graph_config("bar", graphData, `Top ${limit}`, "Test", "Status Flips");
                config.options.plugins.legend = false
                delete config.options.onClick
            } else if (settings.graphTypes.testMostFlakyGraphType == "timeline") {
                config = get_graph_config("timeline", graphData, `Top ${limit}`, "Run", "Test");
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (context) {
                            return callbackData[context.raw.x[0]];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        stepSize: 1,
                        callback: function (value, index, ticks) {
                            return callbackData[this.getLabelForValue(value)];
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Run",
                    },
                };
                config.options.onClick = (event, chartElement) => {
                    if (chartElement.length) {
                        open_log_file(event, chartElement, callbackData)
                    }
                };
                if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            }
            update_height("testMostFlakyVertical", config.data.labels.length, settings.graphTypes.testMostFlakyGraphType);
            testMostFlakyGraph = new Chart("testMostFlakyGraph", config);
            testMostFlakyGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testMostFlakyGraph, event)
            });
        }

        // function to create test recent most flaky graph in test section
        function create_test_recent_most_flaky_graph() {
            if (testRecentMostFlakyGraph) {
                testRecentMostFlakyGraph.destroy();
            }
            const data = get_most_flaky_data("test", settings.graphTypes.testRecentMostFlakyGraphType, filteredTests, ignoreSkipsRecent, true);
            const graphData = data[0];
            const callbackData = data[1];
            var config;
            const limit = inFullscreen && inFullscreenGraph.includes("testRecentMostFlaky") ? 50 : 10;
            if (settings.graphTypes.testRecentMostFlakyGraphType == "bar") {
                config = get_graph_config("bar", graphData, `Top ${limit}`, "Test", "Status Flips");
                config.options.plugins.legend = false
                delete config.options.onClick
            } else if (settings.graphTypes.testRecentMostFlakyGraphType == "timeline") {
                config = get_graph_config("timeline", graphData, `Top ${limit}`, "Run", "Test");
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (context) {
                            return callbackData[context.raw.x[0]];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        stepSize: 1,
                        callback: function (value, index, ticks) {
                            return callbackData[this.getLabelForValue(value)];
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Run",
                    },
                };
                config.options.onClick = (event, chartElement) => {
                    if (chartElement.length) {
                        open_log_file(event, chartElement, callbackData)
                    }
                };
                if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            }
            update_height("testRecentMostFlakyVertical", config.data.labels.length, settings.graphTypes.testRecentMostFlakyGraphType);
            testRecentMostFlakyGraph = new Chart("testRecentMostFlakyGraph", config);
            testRecentMostFlakyGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testRecentMostFlakyGraph, event)
            });
        }

        // function to create test most failed graph in the test section
        function create_test_most_failed_graph() {
            if (testMostFailedGraph) {
                testMostFailedGraph.destroy();
            }
            const data = get_most_failed_data("test", settings.graphTypes.testMostFailedGraphType, filteredTests, false);
            const graphData = data[0]
            const callbackData = data[1];
            var config;
            const limit = inFullscreen && inFullscreenGraph.includes("testMostFailed") ? 50 : 10;
            if (settings.graphTypes.testMostFailedGraphType == "bar") {
                config = get_graph_config("bar", graphData, `Top ${limit}`, "Test", "Fails");
                config.options.plugins.legend = { display: false };
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (tooltipItem) {
                            return callbackData[tooltipItem.label];
                        },
                    },
                };
                delete config.options.onClick
            } else if (settings.graphTypes.testMostFailedGraphType == "timeline") {
                config = get_graph_config("timeline", graphData, `Top ${limit}`, "Run", "Test");
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (context) {
                            return callbackData[context.raw.x[0]];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        stepSize: 1,
                        callback: function (value, index, ticks) {
                            return callbackData[this.getLabelForValue(value)];
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Run",
                    },
                };
                config.options.onClick = (event, chartElement) => {
                    if (chartElement.length) {
                        open_log_file(event, chartElement, callbackData)
                    }
                };
                if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            }
            update_height("testMostFailedVertical", config.data.labels.length, settings.graphTypes.testMostFailedGraphType);
            testMostFailedGraph = new Chart("testMostFailedGraph", config);
            testMostFailedGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testMostFailedGraph, event)
            });
        }

        // function to create test recent most failed graph in the test section
        function create_test_recent_most_failed_graph() {
            if (testRecentMostFailedGraph) {
                testRecentMostFailedGraph.destroy();
            }
            const data = get_most_failed_data("test", settings.graphTypes.testRecentMostFailedGraphType, filteredTests, true);
            const graphData = data[0]
            const callbackData = data[1];
            var config;
            const limit = inFullscreen && inFullscreenGraph.includes("testRecentMostFailed") ? 50 : 10;
            if (settings.graphTypes.testRecentMostFailedGraphType == "bar") {
                config = get_graph_config("bar", graphData, `Top ${limit}`, "Test", "Fails");
                config.options.plugins.legend = { display: false };
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (tooltipItem) {
                            return callbackData[tooltipItem.label];
                        },
                    },
                };
                delete config.options.onClick
            } else if (settings.graphTypes.testRecentMostFailedGraphType == "timeline") {
                config = get_graph_config("timeline", graphData, `Top ${limit}`, "Run", "Test");
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (context) {
                            return callbackData[context.raw.x[0]];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        stepSize: 1,
                        callback: function (value, index, ticks) {
                            return callbackData[this.getLabelForValue(value)];
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Run",
                    },
                };
                config.options.onClick = (event, chartElement) => {
                    if (chartElement.length) {
                        open_log_file(event, chartElement, callbackData)
                    }
                };
                if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            }
            update_height("testRecentMostFailedVertical", config.data.labels.length, settings.graphTypes.testRecentMostFailedGraphType);
            testRecentMostFailedGraph = new Chart("testRecentMostFailedGraph", config);
            testRecentMostFailedGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(testRecentMostFailedGraph, event)
            });
        }

        // function to create test table in the test section
        function create_test_table() {
            if (testTable) {
                testTable.destroy();
            }
            data = [];
            for (test of filteredTests) {
                data.push([
                    test.run_start,
                    test.full_name,
                    test.name,
                    test.passed,
                    test.failed,
                    test.skipped,
                    test.elapsed_s,
                    test.start_time,
                    test.message,
                    test.tags,
                    test.run_alias,
                    test.id
                ]);
            }
            testTable = new DataTable("#testTable", {
                layout: {
                    topStart: "info",
                    bottomStart: null,
                },
                columns: [
                    { title: "run" },
                    { title: "full_name" },
                    { title: "name" },
                    { title: "passed" },
                    { title: "failed" },
                    { title: "skipped" },
                    { title: "elapsed_s" },
                    { title: "start_time" },
                    { title: "message" },
                    { title: "tags" },
                    { title: "alias" },
                    { title: "id" },
                ],
                data: data,
            });
        }

        // function to keyword statistics graph in the keyword section
        function create_keyword_statistics_graph() {
            if (keywordStatisticsGraph) {
                keywordStatisticsGraph.destroy();
            }
            const data = get_statistics_graph_data("keyword", settings.graphTypes.keywordStatisticsGraphType, filteredKeywords);
            const graphData = data[0]
            var config;
            if (settings.graphTypes.keywordStatisticsGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Amount", false);
            } else if (settings.graphTypes.keywordStatisticsGraphType == "amount") {
                config = get_graph_config("bar", graphData, "", "Run", "Amount");
            } else if (settings.graphTypes.keywordStatisticsGraphType == "percentages") {
                config = get_graph_config("bar", graphData, "", "Run", "Percentage");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            keywordStatisticsGraph = new Chart("keywordStatisticsGraph", config);
            keywordStatisticsGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(keywordStatisticsGraph, event)
            });
        }

        // function to keyword times run graph in the keyword section
        function create_keyword_times_run_graph() {
            if (keywordTimesRunGraph) {
                keywordTimesRunGraph.destroy();
            }
            const graphData = get_duration_graph_data("keyword", settings.graphTypes.keywordTimesRunGraphType, "times_run", filteredKeywords);
            var config;
            if (settings.graphTypes.keywordTimesRunGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("keywordTimesRun") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.keywordTimesRunGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            keywordTimesRunGraph = new Chart("keywordTimesRunGraph", config);
            keywordTimesRunGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(keywordTimesRunGraph, event)
            });
        }

        // function to keyword total time graph in the keyword section
        function create_keyword_total_duration_graph() {
            if (keywordTotalDurationGraph) {
                keywordTotalDurationGraph.destroy();
            }
            const graphData = get_duration_graph_data("keyword", settings.graphTypes.keywordTotalDurationGraphType, "total_time_s", filteredKeywords);
            var config;
            if (settings.graphTypes.keywordTotalDurationGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("keywordTotalDuration") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.keywordTotalDurationGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            keywordTotalDurationGraph = new Chart("keywordTotalDurationGraph", config);
            keywordTotalDurationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(keywordTotalDurationGraph, event)
            });
        }

        // function to keyword average time graph in the keyword section
        function create_keyword_average_duration_graph() {
            if (keywordAverageDurationGraph) {
                keywordAverageDurationGraph.destroy();
            }
            const graphData = get_duration_graph_data("keyword", settings.graphTypes.keywordAverageDurationGraphType, "average_time_s", filteredKeywords);
            var config;
            if (settings.graphTypes.keywordAverageDurationGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("keywordAverageDuration") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.keywordAverageDurationGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            keywordAverageDurationGraph = new Chart("keywordAverageDurationGraph", config);
            keywordAverageDurationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(keywordAverageDurationGraph, event)
            });
        }

        // function to keyword min time graph in the keyword section
        function create_keyword_min_duration_graph() {
            if (keywordMinDurationGraph) {
                keywordMinDurationGraph.destroy();
            }
            const graphData = get_duration_graph_data("keyword", settings.graphTypes.keywordMinDurationGraphType, "min_time_s", filteredKeywords);
            var config;
            if (settings.graphTypes.keywordMinDurationGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("keywordMinDuration") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.keywordMinDurationGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            keywordMinDurationGraph = new Chart("keywordMinDurationGraph", config);
            keywordMinDurationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(keywordMinDurationGraph, event)
            });
        }

        // function to keyword max time graph in the keyword section
        function create_keyword_max_duration_graph() {
            if (keywordMaxDurationGraph) {
                keywordMaxDurationGraph.destroy();
            }
            const graphData = get_duration_graph_data("keyword", settings.graphTypes.keywordMaxDurationGraphType, "max_time_s", filteredKeywords);
            var config;
            if (settings.graphTypes.keywordMaxDurationGraphType == "bar") {
                const limit = inFullscreen && inFullscreenGraph.includes("keywordMaxDuration") ? 100 : 30;
                config = get_graph_config("bar", graphData, `Max ${limit} Bars`, "Run", "Duration");
            } else if (settings.graphTypes.keywordMaxDurationGraphType == "line") {
                config = get_graph_config("line", graphData, "", "Date", "Duration");
            }
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            keywordMaxDurationGraph = new Chart("keywordMaxDurationGraph", config);
            keywordMaxDurationGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(keywordMaxDurationGraph, event)
            });
        }

        // function to create test most failed graph in the test section
        function create_keyword_most_failed_graph() {
            if (keywordMostFailedGraph) {
                keywordMostFailedGraph.destroy();
            }
            const data = get_most_failed_data("keyword", settings.graphTypes.keywordMostFailedGraphType, filteredKeywords, false);
            const graphData = data[0]
            const callbackData = data[1];
            var config;
            const limit = inFullscreen && inFullscreenGraph.includes("keywordMostFailed") ? 50 : 10;
            if (settings.graphTypes.keywordMostFailedGraphType == "bar") {
                config = get_graph_config("bar", graphData, `Top ${limit}`, "Keyword", "Fails");
                config.options.plugins.legend = { display: false };
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (tooltipItem) {
                            return callbackData[tooltipItem.label];
                        },
                    },
                };
                delete config.options.onClick
            } else if (settings.graphTypes.keywordMostFailedGraphType == "timeline") {
                config = get_graph_config("timeline", graphData, `Top ${limit}`, "Run", "Keyword");
                config.options.plugins.tooltip = {
                    callbacks: {
                        label: function (context) {
                            return callbackData[context.raw.x[0]];
                        },
                    },
                };
                config.options.scales.x = {
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        stepSize: 1,
                        callback: function (value, index, ticks) {
                            return callbackData[this.getLabelForValue(value)];
                        },
                    },
                    title: {
                        display: settings.show.axisTitles,
                        text: "Run",
                    },
                };
                config.options.onClick = (event, chartElement) => {
                    if (chartElement.length) {
                        open_log_file(event, chartElement, callbackData)
                    }
                };
                if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            }
            update_height("keywordMostFailedVertical", config.data.labels.length, settings.graphTypes.keywordMostFailedGraphType);
            keywordMostFailedGraph = new Chart("keywordMostFailedGraph", config);
            keywordMostFailedGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(keywordMostFailedGraph, event)
            });
        }

        // function to create keyword table in the keyword section
        function create_keyword_table() {
            if (keywordTable) {
                keywordTable.destroy();
            }
            data = [];
            for (keyword of filteredKeywords) {
                data.push([
                    keyword.run_start,
                    keyword.name,
                    keyword.passed,
                    keyword.failed,
                    keyword.skipped,
                    keyword.times_run,
                    keyword.total_time_s,
                    keyword.average_time_s,
                    keyword.min_time_s,
                    keyword.max_time_s,
                    keyword.run_alias,
                ]);
            }
            keywordTable = new DataTable("#keywordTable", {
                layout: {
                    topStart: "info",
                    bottomStart: null,
                },
                columns: [
                    { title: "run" },
                    { title: "name" },
                    { title: "passed" },
                    { title: "failed" },
                    { title: "skipped" },
                    { title: "times_run" },
                    { title: "total_execution_time" },
                    { title: "average_execution_time" },
                    { title: "min_execution_time" },
                    { title: "max_execution_time" },
                    { title: "alias" },
                ],
                data: data,
            });
        }

        // function to create the compare statistics in the compare section
        function create_compare_statistics_graph() {
            if (compareStatisticsGraph) {
                compareStatisticsGraph.destroy();
            }
            const graphData = get_compare_statistics_graph_data(filteredRuns);
            const config = get_graph_config("bar", graphData, "", "Run", "Amount");
            config.options.scales.y.stacked = false;
            compareStatisticsGraph = new Chart("compareStatisticsGraph", config);
        }

        // function to create the compare statistics in the compare section
        function create_compare_suite_duration_graph() {
            if (compareSuiteDurationGraph) {
                compareSuiteDurationGraph.destroy();
            }
            const graphData = get_compare_suite_duration_data(filteredSuites);
            const config = get_graph_config("radar", graphData, "");
            compareSuiteDurationGraph = new Chart("compareSuiteDurationGraph", config);
        }

        // function to create the compare statistics in the compare section
        function create_compare_tests_graph() {
            if (compareTestsGraph) {
                compareTestsGraph.destroy();
            }
            const data = get_test_statistics_data(filteredTests);
            const graphData = data[0]
            const runStarts = data[1]
            var config = get_graph_config("timeline", graphData, "", "Run", "Test");
            config.options.plugins.tooltip = {
                callbacks: {
                    label: function (context) {
                        return runStarts[context.raw.x[0]];
                    },
                },
            };
            config.options.scales.x = {
                ticks: {
                    minRotation: 45,
                    maxRotation: 45,
                    stepSize: 1,
                    callback: function (value, index, ticks) {
                        return runStarts[this.getLabelForValue(value)];
                    },
                },
                title: {
                    display: settings.show.axisTitles,
                    text: "Run",
                },
            };
            config.options.onClick = (event, chartElement) => {
                if (chartElement.length) {
                    open_log_file(event, chartElement, runStarts)
                }
            };
            if (!settings.show.dateLabels) { config.options.scales.x.ticks.display = false }
            update_height("compareTestsVertical", config.data.labels.length, "timeline");
            compareTestsGraph = new Chart("compareTestsGraph", config);
            compareTestsGraph.canvas.addEventListener("click", (event) => {
                open_log_from_label(compareTestsGraph, event)
            });
        }

        ///////////////////////////////////
        // GRAPH DATA & CONFIG FUNCTIONS //
        ///////////////////////////////////

        // function to open the log when clicking on the labels
        function open_log_from_label(chart, click) {
            if (!use_logs) { return }
            let resetCoordinates = chart.canvas.getBoundingClientRect();
            const xCoor = click.clientX - resetCoordinates.left;
            const yCoor = click.clientY - resetCoordinates.top;
            const { data, scales: { x: { top, bottom, left, height, width, ticks } } } = chart;
            const right = width / ticks.length;

            for (let i = 0; i < ticks.length; i++) {
                if (xCoor >= left + (right * i) && xCoor <= left + right + (right * i) && yCoor >= top && yCoor <= bottom) {
                    var run
                    const identifier = chart.config._config.options.indexAxis === "y" ? Object.values(ticks).map(item => item.label) : data.labels // exception for timelines
                    if (settings.show.aliases) {
                        run = filteredRuns.find(run => run.run_alias === identifier[i])
                    } else {
                        run = filteredRuns.find(run => run.run_start === identifier[i])
                    }
                    if (run) {
                        const path = transform_file_path(run.path)
                        if (path == "") {
                            alert("Log file error: this output didn't have a path in the database so the log file cannot be found!");
                            return
                        }
                        open_log_from_path(path)
                    }
                }
            }
        }

        // function to add the suite or test id to the log path url
        function update_log_path_with_id(path, graphId, chartElement, event) {
            if (graphId.includes("run") || graphId.includes("keyword")) {
                return transform_file_path(path)
            } // can"t select a run or keyword in the suite/log log.html
            const graphType = event.chart.config._config.type
            var name = ""
            var id = ""
            var runStart = runs.find(run => run.path === path).run_start
            if (graphId.includes("suite") || graphId.includes("Suite")) {
                if (graphId == "suiteStatisticsGraph" || graphId == "compareSuiteDurationGraph") {
                    name = event.chart.tooltip.title[0].split(": ").pop()
                } else if (graphId == "suiteDurationGraph") {
                    name = event.chart.tooltip.body[0].lines[0].split(": ")[0]
                } else if (graphId == "suiteMostFailedGraph") {
                    name = chartElement[0].element.$context.raw.y
                }
                id = suites.find(suite => suite.name === name && suite.run_start === runStart)
            } else { // it contains a test
                if (graphId == "testStatisticsGraph" || graphId == "testMostFlakyGraph" || graphId == "testRecentMostFlakyGraph" || graphId == "testMostFailedGraph" || graphId == "testRecentMostFailedGraph" || graphId == "compareTestsGraph") {
                    name = chartElement[0].element.$context.raw.y
                } else if (graphId == "testDurationGraph") {
                    if (graphType == "bar") {
                        name = event.chart.tooltip.dataPoints[0].dataset.label
                    } else {
                        const datasetIndex = chartElement[0].datasetIndex
                        name = event.chart.legend.legendItems[datasetIndex].text
                    }
                } else { // this exception is for the Test Messages graph as you can"t tell which test it relates to (might be more than 1!)
                    return transform_file_path(path)
                }
                id = tests.find(test => test.name === name && test.run_start === runStart)
            }
            if (id == undefined) {
                return transform_file_path(path)
            }
            return `${transform_file_path(path)}#${id.id}`
        }

        // function to open the log files through the graphs
        function open_log_file(event, chartElement, callbackData = undefined) {
            if (!use_logs) { return }
            const graphType = event.chart.config._config.type
            const graphId = event.chart.canvas.id
            var runStart = ""
            if (graphType == "doughnut") {
                runStart = callbackData
            } else if (callbackData) {
                const index = chartElement[0].element.$context.raw.x[0]
                runStart = callbackData[index]
            } else if (graphType == "line" && !graphId.includes("Statistics")) {
                runStart = format_date_to_string(new Date(chartElement[0].element.$context.raw.x))
            } else if (graphId == "compareStatisticsGraph" || graphId == "compareSuiteDurationGraph") {
                const index = chartElement[0].datasetIndex
                runStart = event.chart.data.datasets[index].label
            } else {
                const index = chartElement[0].index
                runStart = event.chart.data.labels[index]
            }
            var output = runs.find(run => run.run_start.slice(0, 19) === runStart.slice(0, 19))
            var path = output ? output.path : runs.find(run => run.run_alias === runStart).path
            if (path == "") {
                alert("Log file error: this output didn't have a path in the database so the log file cannot be found!");
                return
            }
            path = update_log_path_with_id(path, graphId, chartElement, event)
            open_log_from_path(path)
        }

        // function to open the log file
        function open_log_from_path(path) {
            var fileUrl = ""
            if (server) { // server url
                fileUrl = `/log?path=${path}`
            } else if (window.location.href.includes("file:///")) { // local machine url
                fileUrl = `file:///${path}`
            } else { // remote machine file server
                fileUrl = combine_paths(window.location.href, path)
            }
            const win = window.open(fileUrl, "_blank")
        }

        // function to retrieve the required graph config for chartjs, based on the different type of graphs
        // Generate a Chart.js config object based on the graph type and data
        function get_graph_config(graphType, graphData, graphTitle, xTitle, yTitle, dataSets = true) {
            if (dataSets && graphType === "line") {
                graphData = { datasets: graphData };
            }

            const baseConfig = {
                onClick: (event, chartElement) => {
                    if (chartElement.length) open_log_file(event, chartElement);
                },
                normalized: true,
                responsive: true,
                maintainAspectRatio: false,
                animation: settings.show.animation
                    ? {
                        delay: (ctx) => {
                            const dataLength = ctx.chart.data.datasets.reduce(
                                (a, b) => (b.data.length > a.data.length ? b : a)
                            ).data.length;
                            return ctx.dataIndex * (settings.show.duration / dataLength);
                        },
                    }
                    : false,
                plugins: {
                    title: {
                        display: graphTitle == "" ? false : true,
                        text: graphTitle,
                    },
                    datalabels: {
                        display: false,
                    },
                },
            };

            const commonScales = {
                x: {
                    title: { display: true, text: xTitle },
                    ticks: {
                        minRotation: 45,
                        maxRotation: 45,
                        callback(value) {
                            return this.getLabelForValue(value).slice(0, 40);
                        },
                    },
                },
                y: {
                    title: { display: true, text: yTitle },
                    beginAtZero: true,
                    grace: "5%",
                    ticks: {
                        callback(value) {
                            return this.getLabelForValue(value).slice(0, 40);
                        },
                    },
                },
            };

            const configMap = {
                line: () => ({
                    type: "line",
                    data: graphData,
                    options: {
                        ...baseConfig,
                        scales: {
                            ...commonScales,
                            x: {
                                ...commonScales.x,
                                type: "time",
                                time: { tooltipFormat: "dd.MM.yyyy HH:mm:ss" },
                                ticks: {
                                    ...commonScales.x.ticks,
                                    maxTicksLimit: 10,
                                },
                            },
                        },
                    },
                }),
                bar: () => ({
                    type: "bar",
                    data: graphData,
                    options: {
                        ...baseConfig,
                        scales: {
                            ...commonScales,
                            y: { ...commonScales.y, stacked: true },
                        },
                        interaction: { mode: "x" },
                        plugins: {
                            ...baseConfig.plugins,
                            tooltip: {
                                filter: (item) => item.dataset.data[item.dataIndex] > 0,
                            },
                            datalabels: {
                                color: "#000",
                                align: "center",
                                anchor: "center",
                                formatter: (val) => (val > 0 ? val : null),
                            },
                        },
                    },
                }),
                timeline: () => ({
                    type: "bar",
                    data: graphData,
                    options: {
                        ...baseConfig,
                        indexAxis: "y",
                        scales: {
                            ...commonScales,
                            y: { ...commonScales.y, stacked: true },
                        },
                        plugins: {
                            ...baseConfig.plugins,
                            legend: { display: false },
                        },
                    },
                }),
                boxplot: () => ({
                    type: "boxplot",
                    data: graphData,
                    options: {
                        ...baseConfig,
                        scales: {
                            ...commonScales,
                            x: {
                                ...commonScales.x,
                                ticks: commonScales.x.ticks,
                            },
                        },
                        plugins: {
                            ...baseConfig.plugins,
                            tooltip: { enabled: true },
                            legend: { display: false },
                        },
                    },
                }),
                donut: () => ({
                    type: "doughnut",
                    data: graphData,
                    options: {
                        ...baseConfig,
                        animation: settings.show.animation ? { duration: settings.show.duration } : false,
                        radius: "90%",
                        plugins: {
                            ...baseConfig.plugins,
                            tooltip: {
                                callbacks: {
                                    title: function (tooltipItem) {
                                        const label = tooltipItem[0].label;
                                        const value = tooltipItem[0].formattedValue;
                                        const datalabelModel = tooltipItem[0].element?.$datalabels?.[0]?._model;
                                        return datalabelModel?.lines?.[0] || `${label}: ${value}`;
                                    },
                                },
                            },
                            legend: {
                                display: true,
                                labels: {
                                    generateLabels(chart) {
                                        const dataset = chart.data.datasets[0];
                                        const meta = chart.getDatasetMeta(0);
                                        const labels = chart.data.labels;

                                        return labels.map((label, i) => {
                                            const style = meta.controller.getStyle(i);
                                            const hidden = !chart.isDatasetVisible(0) || meta.data[i].hidden;

                                            return {
                                                text: label.split(".").pop(),
                                                fillStyle: style.backgroundColor,
                                                strokeStyle: style.borderColor,
                                                lineWidth: style.borderWidth,
                                                lineCap: style.borderCapStyle || "butt",
                                                lineDash: style.borderDash || [],
                                                lineDashOffset: style.borderDashOffset || 0,
                                                pointStyle: style.pointStyle || "circle",
                                                rotation: style.rotation || 0,
                                                hidden,
                                                index: i,
                                                datasetIndex: 0,
                                                fontColor: Chart.defaults.color,
                                            };
                                        });
                                    },
                                },
                            },
                            datalabels: {
                                ...dataLabelConfig,
                                align: "center",
                                anchor: "center",
                                formatter(value, context) {
                                    if (value === 0) return null;
                                    const total = graphData.datasets[0].data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    if (percentage <= 5) return null;
                                    const label = graphData.labels[context.dataIndex].split(".").pop();
                                    return `${label}: ${value} (${percentage}%)`;
                                },
                            },
                        },
                    },
                }),
                heatmap: () => ({
                    type: "matrix",
                    data: graphData,
                    options: {
                        ...baseConfig,
                        scales: {
                            x: {
                                type: "linear",
                                position: "bottom",
                                min: 0,
                                max: heatMapHourAll ? 24 : 60,
                                offset: false,
                                grid: { display: true, drawTicks: true, tickLength: 8 },
                                ticks: {
                                    minRotation: 45,
                                    maxRotation: 45,
                                    stepSize: 1,
                                    callback: (val) => {
                                        if (heatMapHourAll) return `${val}:00`;
                                        const hour = document.getElementById("heatMapHour").value;
                                        return `${("0" + hour).slice(-2)}:${("0" + val).slice(-2)}`;
                                    },
                                },
                                title: {
                                    display: true,
                                    text: heatMapHourAll ? "Hour" : "Minute",
                                },
                            },
                            y: {
                                type: "linear",
                                reverse: true,
                                min: 0,
                                max: 7,
                                offset: false,
                                grid: { display: true, drawTicks: true, tickLength: 8 },
                                title: { display: true, text: "Day" },
                            },
                        },
                        plugins: {
                            ...baseConfig.plugins,
                            legend: { display: false },
                        },
                    },
                }),
                radar: () => ({
                    type: "radar",
                    data: graphData,
                    options: {
                        ...baseConfig,
                        elements: {
                            line: {
                                borderWidth: 3
                            },
                        },
                        plugins: {
                            ...baseConfig.plugins,
                            tooltip: { enabled: true },
                            legend: { display: true },
                        },
                        scales: {
                            r: {
                                angleLines: {
                                    display: true
                                },
                                grid: {
                                    display: true
                                },
                                pointLabels: {
                                    display: true
                                },
                                ticks: {
                                    display: false
                                }
                            }
                        }
                    },
                }),
            };

            const config = configMap[graphType]?.();
            if (!settings.show.legends) {
                config.options.plugins.legend = config.options.plugins.legend || {};
                config.options.plugins.legend.display = false;
            }
            if (!settings.show.axisTitles) {
                if (config.options.scales && config.options.scales.x && config.options.scales.x.title) {
                    config.options.scales.x.title.display = false;
                }
                if (config.options.scales && config.options.scales.y && config.options.scales.y.title) {
                    config.options.scales.y.title.display = false;
                }
            }
            return config;
        }

        // helper function to more easily use the logic of filtering suite graph data based on the selected filters
        // returns true if the value should be excluded, false if it should be included
        function exclude_from_suite_data(dataType, value) {
            if (dataType !== "suite") return false;
            const suiteSelectSuites = document.getElementById("suiteSelectSuites").value;
            const suiteSelectSuitesOptions = [...document.getElementById("suiteSelectSuites").options].map(o => o.value);
            const suiteFolder = document.getElementById("suiteFolder").innerText;
            const isFolderAll = suiteFolder === "All";
            const isSuiteAll = suiteSelectSuites === "All Suites Separate" || suiteSelectSuites === "All Suites Combined";
            const usingSuitePaths = settings.switch.suitePathsSuiteSection;

            const folderMatches = (val) => val.full_name === suiteFolder || val.full_name.startsWith(`${suiteFolder}.`);
            const suiteNameMatches = (val) => suiteSelectSuitesOptions.includes(val.name);
            const fullNameMatches = (val) => suiteSelectSuitesOptions.includes(val.full_name);

            if (isFolderAll && isSuiteAll) {
                // All folders, all suites: include all
                return false;
            }
            if (isFolderAll && !isSuiteAll) {
                // All folders, specific suite
                return usingSuitePaths
                    ? value.full_name !== suiteSelectSuites
                    : value.name !== suiteSelectSuites;
            }
            if (!isFolderAll && isSuiteAll) {
                // Specific folder, all suites
                if (!folderMatches(value)) return true;

                return usingSuitePaths
                    ? !fullNameMatches(value)
                    : !suiteNameMatches(value);
            }
            // Specific folder, specific suite
            if (!folderMatches(value)) return true;
            return usingSuitePaths
                ? value.full_name !== suiteSelectSuites
                : value.name !== suiteSelectSuites;
        }

        // function to prepare the data in the correct format for statistics graphs
        function get_statistics_graph_data(dataType, graphType, filteredData) {
            const suiteSelectSuitesCombined = document.getElementById("suiteSelectSuites").value === "All Suites Combined";
            const keywordSelect = document.getElementById("keywordSelect").value;
            const rawPassed = [], rawFailed = [], rawSkipped = [], labels = [], aliases = [];
            let names = [];
            const process_value = (value) => {
                rawPassed.push(value.passed);
                rawFailed.push(value.failed);
                rawSkipped.push(value.skipped);
                labels.push(value.run_start);
                aliases.push(value.run_alias);
                names.push(value.name);
            };
            for (const value of filteredData) {
                if (exclude_from_suite_data(dataType, value)) continue;
                if (dataType === "keyword" && value.name !== keywordSelect) continue;
                process_value(value);
            }
            const finalLabels = graphType !== "line" ? (settings.show.aliases ? aliases : labels) : labels;
            const styling = graphType !== "line" ? barConfig : lineConfig;
            let statisticsData = {
                labels: finalLabels,
                datasets: [
                    {
                        label: "Failed",
                        data: rawFailed.slice(),
                        backgroundColor: failedBackgroundColor,
                        borderColor: failedBackgroundBorderColor,
                        ...styling,
                        stack: graphType === "percentages" || graphType === "amount" ? "Stack 0" : undefined,
                    },
                    {
                        label: "Skipped",
                        data: rawSkipped.slice(),
                        backgroundColor: skippedBackgroundColor,
                        borderColor: skippedBackgroundBorderColor,
                        ...styling,
                        stack: graphType === "percentages" || graphType === "amount" ? "Stack 0" : undefined,
                    },
                    {
                        label: "Passed",
                        data: rawPassed.slice(),
                        backgroundColor: passedBackgroundColor,
                        borderColor: passedBackgroundBorderColor,
                        ...styling,
                        stack: graphType === "percentages" || graphType === "amount" ? "Stack 0" : undefined,
                    }
                ]
            };
            if (dataType === "suite" && suiteSelectSuitesCombined) {
                const bundled = {};
                const groupedLabels = [];
                const groupedData = Array(statisticsData.datasets.length).fill().map(() => []);

                statisticsData.labels.forEach((label, i) => {
                    if (!(label in bundled)) {
                        bundled[label] = groupedLabels.length;
                        groupedLabels.push(label);
                        statisticsData.datasets.forEach((_, d) => groupedData[d].push(0));
                    }
                    const idx = bundled[label];
                    statisticsData.datasets.forEach((dataset, d) => {
                        groupedData[d][idx] += dataset.data[i];
                    });
                });
                statisticsData.datasets.forEach((dataset, i) => {
                    dataset.data = groupedData[i];
                });
                statisticsData.labels = groupedLabels;
                names = Array(statisticsData.labels.length).fill("All Suites Combined");
            }
            if (graphType === "percentages") {
                const totalPoints = statisticsData.datasets[0].data.length;
                for (let i = 0; i < totalPoints; i++) {
                    const passed = statisticsData.datasets[2].data[i];
                    const failed = statisticsData.datasets[0].data[i];
                    const skipped = statisticsData.datasets[1].data[i];
                    const total = passed + failed + skipped;
                    statisticsData.datasets[2].data[i] = total ? Math.round((passed / total) * 100) : 0;
                    statisticsData.datasets[0].data[i] = total ? Math.round((failed / total) * 100) : 0;
                    statisticsData.datasets[1].data[i] = total ? Math.round((skipped / total) * 100) : 0;
                }
            }
            return [statisticsData, names];
        }

        function get_test_statistics_data(filteredTests) {
            const suiteSelectTests = document.getElementById("suiteSelectTests").value;
            const testSelect = document.getElementById("testSelect").value;
            const testTagsSelect = document.getElementById("testTagsSelect").value;
            const testOnlyChanges = document.getElementById("testOnlyChanges").checked;
            const compareOnlyChanges = document.getElementById("compareOnlyChanges").checked;
            const selectedRuns = [...new Set(
                compareRunIds
                    .map(id => document.getElementById(id).value)
                    .filter(val => val !== "None")
            )];
            const [runStarts, datasets] = [[], []];
            var labels = [];
            function getTestLabel(test) {
                if (settings.menu.dashboard) {
                    return settings.switch.suitePathsTestSection ? test.full_name : test.name;
                } else if (settings.menu.compare) {
                    return settings.switch.suitePathsCompareSection ? test.full_name : test.name;
                }
                return test.name;
            }
            for (const test of filteredTests) {
                if (settings.menu.dashboard) {
                    const testLabel = getTestLabel(test);
                    const testBaseName = test.name;
                    if (suiteSelectTests !== "All") {
                        const expectedFull = `${suiteSelectTests}.${testBaseName}`;
                        const isMatch = settings.switch.suitePathsTestSection
                            ? test.full_name === expectedFull
                            : test.full_name.includes(`.${suiteSelectTests}.${testBaseName}`) || test.full_name === expectedFull;
                        if (!isMatch) continue;
                    }
                    if (testSelect !== "All" && testBaseName !== testSelect) continue;

                    if (testTagsSelect !== "All") {
                        const tagList = test.tags.replace(/\[|\]/g, "").split(",");
                        if (!tagList.includes(testTagsSelect)) continue;
                    }
                } else if (settings.menu.compare) {
                    if (!(selectedRuns.includes(test.run_start) || selectedRuns.includes(test.run_alias))) continue;
                }
                const testLabel = getTestLabel(test);
                if (!labels.includes(testLabel)) {
                    labels.push(testLabel);
                }
                const runId = settings.show.aliases ? test.run_alias : test.run_start;

                if (!runStarts.includes(runId)) {
                    runStarts.push(runId);
                }
                const runAxis = runStarts.indexOf(runId);
                const config =
                    test.passed == 1 ? passedConfig :
                        test.failed == 1 ? failedConfig :
                            test.skipped == 1 ? skippedConfig : null;
                if (config) {
                    datasets.push({
                        label: testLabel,
                        data: [{ x: [runAxis, runAxis + 1], y: testLabel }],
                        ...config,
                    });
                }
            }
            let finalDatasets = convert_timeline_data(datasets);
            if (testOnlyChanges || compareOnlyChanges) {
                const countMap = {};
                for (const ds of finalDatasets) {
                    countMap[ds.label] = (countMap[ds.label] || 0) + 1;
                }
                const labelsToKeep = new Set(Object.keys(countMap).filter(label => countMap[label] > 1));

                finalDatasets = finalDatasets.filter(ds => labelsToKeep.has(ds.label));
                labels = labels.filter(label => labelsToKeep.has(label));
            }
            const graphData = {
                labels,
                datasets: finalDatasets,
            };
            return [graphData, runStarts];
        }

        // function to prepare the data in the correct format for last run donut graphs
        function get_donut_graph_data(dataType, filteredData) {
            const latest = filteredData[Object.keys(filteredData)[Object.keys(filteredData).length - 1]]
            var labels = [];
            var datasets = [];
            var backgroundColors = [];
            var backgroundBorderColors = [];
            if (latest) {
                if (latest.passed > 0) {
                    labels.push("Passed")
                    datasets.push(latest.passed)
                    backgroundColors.push(passedBackgroundColor)
                    backgroundBorderColors.push(passedBackgroundBorderColor)
                }
                if (latest.failed > 0) {
                    labels.push("Failed")
                    datasets.push(latest.failed)
                    backgroundColors.push(failedBackgroundColor)
                    backgroundBorderColors.push(failedBackgroundBorderColor)
                }
                if (latest.skipped > 0) {
                    labels.push("Skipped")
                    datasets.push(latest.skipped)
                    backgroundColors.push(skippedBackgroundColor)
                    backgroundBorderColors.push(skippedBackgroundBorderColor)
                }
            }
            const graphData = {
                labels: labels,
                datasets: [{
                    data: datasets,
                    backgroundColor: backgroundColors,
                    borderColor: backgroundBorderColors,
                    hoverOffset: 4
                }]
            };
            const callBackData = latest ? settings.show.aliases ? latest.run_alias : latest.run_start : ""
            return [graphData, callBackData]
        }

        // function to prepare the data in the correct format for duration graphs
        function get_donut_total_graph_data(dataType, filteredData) {
            let passed = 0, failed = 0, skipped = 0;
            for (const value of filteredData) {
                if (value.passed > 0) {
                    passed = passed + value.passed;
                }
                if (value.failed > 0) {
                    failed = failed + value.failed;
                }
                if (value.skipped > 0) {
                    skipped = skipped + value.skipped;
                }
            }
            var data = []
            var labels = []
            var backgroundColors = []
            var backgroundBorderColors = []
            if (passed > 0) {
                data.push(passed)
                labels.push("Passed")
                backgroundColors.push(passedBackgroundColor)
                backgroundBorderColors.push(passedBackgroundBorderColor)
            }
            if (failed > 0) {
                data.push(failed)
                labels.push("Failed")
                backgroundColors.push(failedBackgroundColor)
                backgroundBorderColors.push(failedBackgroundBorderColor)
            }
            if (skipped > 0) {
                data.push(skipped)
                labels.push("Skipped")
                backgroundColors.push(skippedBackgroundColor)
                backgroundBorderColors.push(skippedBackgroundBorderColor)
            }
            const graphData = {
                labels: labels,
                datasets: [{
                    data: data,
                    backgroundColor: backgroundColors,
                    borderColor: backgroundBorderColors,
                    hoverOffset: 4
                }]
            };
            const callBackData = labels
            return [graphData, callBackData]
        }

        // function to prepare the data in the correct format for the last failed folders donut
        function get_donut_folder_fail_graph_data(dataType, filteredData) {
            var lastRunStart = filteredData[Object.keys(filteredData)[Object.keys(filteredData).length - 1]]
            if (lastRunStart) {
                lastRunStart = lastRunStart.run_start
            }
            const suiteFolder = document.getElementById("suiteFolder").innerText;
            var labels = new Set()
            const callbackData = {}
            const data = []
            for (const value of filteredData) {
                if (value.run_start != lastRunStart) { continue }
                if (value.failed == 0) { continue }
                if (suiteFolder == "All") {
                    const label = value.full_name.split(".")[0]
                    labels.add(label)
                    if (!callbackData[label]) {
                        callbackData[label] = {
                            total: value.total,
                            passed: value.passed,
                            skipped: value.skipped,
                            failed: value.failed
                        };
                    } else {
                        callbackData[label].total += value.total;
                        callbackData[label].passed += value.passed;
                        callbackData[label].skipped += value.skipped;
                        callbackData[label].failed += value.failed;
                    }
                } else {
                    if (!value.full_name.startsWith(suiteFolder + ".") && value.full_name != suiteFolder) { continue }
                    const label = get_next_folder_level(suiteFolder, value.full_name)
                    labels.add(label)
                    if (!callbackData[label]) {
                        callbackData[label] = {
                            total: value.total,
                            passed: value.passed,
                            skipped: value.skipped,
                            failed: value.failed
                        };
                    } else {
                        callbackData[label].total += value.total;
                        callbackData[label].passed += value.passed;
                        callbackData[label].skipped += value.skipped;
                        callbackData[label].failed += value.failed;
                    }
                }
            }
            labels = [...labels]
            for (const label of labels) {
                data.push(callbackData[label].failed)
            }
            const redShades = [
                "#ce3e01", // base fail color
                "#b13601", // darker burnt orange
                "#992f01", // deep red-orange
                "#7f2600"  // very dark, almost brown-red
            ];
            function assignColors(intoCount) {
                const result = [];
                const colorCount = redShades.length;
                let index = 0;
                for (let i = 0; i < intoCount; i++) {
                    result.push(redShades[index]);
                    index = (index + 1) % colorCount;
                    if (i > 0 && result[i] === result[i - 1]) { // Ensure no same color next to each other
                        index = (index + 1) % colorCount;
                        result[i] = redShades[index];
                    }
                }
                return result;
            }
            const backgroundColor = assignColors(labels.length);
            const graphData = {
                labels: labels,
                datasets: [{
                    data: data,
                    backgroundColor: backgroundColor,
                    hoverOffset: 4
                }]
            };
            return [graphData, callbackData];
        }

        // function to prepare the data in the correct format for folder donuts
        function get_donut_folder_graph_data(dataType, filteredData, folder) {
            var labels = new Set()
            const callbackData = {}
            const data = []
            for (const value of filteredData) {
                if (!folder) {
                    const label = value.full_name.split(".")[0]
                    labels.add(label)
                    if (!callbackData[label]) {
                        callbackData[label] = {
                            total: value.total,
                            passed: value.passed,
                            skipped: value.skipped,
                            failed: value.failed
                        };
                    } else {
                        callbackData[label].total += value.total;
                        callbackData[label].passed += value.passed;
                        callbackData[label].skipped += value.skipped;
                        callbackData[label].failed += value.failed;
                    }
                } else {
                    if (!value.full_name.startsWith(folder + ".") && value.full_name != folder) { continue }
                    const label = get_next_folder_level(folder, value.full_name)
                    labels.add(label)
                    if (!callbackData[label]) {
                        callbackData[label] = {
                            total: value.total,
                            passed: value.passed,
                            skipped: value.skipped,
                            failed: value.failed
                        };
                    } else {
                        callbackData[label].total += value.total;
                        callbackData[label].passed += value.passed;
                        callbackData[label].skipped += value.skipped;
                        callbackData[label].failed += value.failed;
                    }
                }
            }
            previousFolder = folder ? folder : "";
            labels = [...labels]
            finalLabels = []
            for (const label of labels) {
                if (onlyFailedFolders) {
                    if (callbackData[label].failed > 0) {
                        finalLabels.push(label)
                        data.push(callbackData[label].failed)
                    }
                } else {
                    finalLabels.push(label)
                    data.push(callbackData[label].total)
                }
            }
            var graphData
            if (onlyFailedFolders) {
                const redShades = [
                    "#ce3e01", // base fail color
                    "#b13601", // darker burnt orange
                    "#992f01", // deep red-orange
                    "#7f2600"  // very dark, almost brown-red
                ];
                function assignColors(intoCount) {
                    const result = [];
                    const colorCount = redShades.length;
                    let index = 0;
                    for (let i = 0; i < intoCount; i++) {
                        result.push(redShades[index]);
                        index = (index + 1) % colorCount;
                        if (i > 0 && result[i] === result[i - 1]) { // Ensure no same color next to each other
                            index = (index + 1) % colorCount;
                            result[i] = redShades[index];
                        }
                    }
                    return result;
                }
                const backgroundColor = assignColors(finalLabels.length);
                graphData = {
                    labels: finalLabels,
                    datasets: [{
                        data: data,
                        backgroundColor: backgroundColor,
                        hoverOffset: 4
                    }]
                };
            } else {
                graphData = {
                    labels: finalLabels,
                    datasets: [{
                        data: data,
                        hoverOffset: 4
                    }]
                };
            }
            return [graphData, callbackData]
        }

        function get_heatmap_graph_data(filteredData) {
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const type = document.getElementById("heatMapTestType").value; // All, Passed, Failed, Skipped
            const hour = document.getElementById("heatMapHour").value;
            const counts = new Map();
            for (const value of filteredData) {
                if (type !== "All") {
                    const key = type.toLowerCase(); // 'passed', 'failed', 'skipped'
                    if (value[key] != 1) continue;
                }
                const date = new Date(value.start_time);
                if (hour === "All") {
                    const x = date.getHours() + 0.5;
                    const y = date.getDay() + 0.5;
                    const key = `${x},${y}`;
                    counts.set(key, (counts.get(key) || 0) + 1);
                } else {
                    if (date.getHours() != parseInt(hour)) continue;
                    const x = date.getMinutes() + 0.5;
                    const y = date.getDay() + 0.5;
                    const key = `${x},${y}`;
                    counts.set(key, (counts.get(key) || 0) + 1);
                }

            }
            const data = Array.from(counts.entries()).map(([key, count]) => {
                const [x, y] = key.split(',').map(Number);
                return { x, y, v: count };
            });
            const baseColors = {
                All: [0, 123, 255], // Blue
                Passed: [151, 189, 97], // Green
                Skipped: [254, 216, 79], // Yellow
                Failed: [206, 62, 1], // Red
            };
            const colorRGB = baseColors[type] || baseColors['All'];
            if (data.length == 0) { return [[], []] }
            const graphData = {
                datasets: [{
                    label: 'Test Execution Heatmap',
                    data: data,
                    backgroundColor(ctx) {
                        const v = ctx.dataset.data[ctx.dataIndex].v;
                        const maxV = Math.max(...ctx.dataset.data.map(d => d.v));
                        let alpha = v / maxV;
                        alpha = Math.max(alpha, 0.2);
                        return `rgba(${colorRGB[0]}, ${colorRGB[1]}, ${colorRGB[2]}, ${alpha})`;
                    },
                    width: ({ chart }) => (chart.chartArea?.width || 0) / (heatMapHourAll ? 24 : 60) - 1,
                    height: ({ chart }) => (chart.chartArea?.height || 0) / 7 - 1,
                    ...barConfig,
                }]
            };
            return [graphData, days];
        }

        // function to prepare the data in the correct format for duration graphs
        function get_duration_graph_data(dataType, graphType, objectDataAttribute, filteredData) {
            const suiteSelectSuitesCombined = document.getElementById("suiteSelectSuites").value === "All Suites Combined";
            const suiteSelectTests = document.getElementById("suiteSelectTests").value;
            const testSelect = document.getElementById("testSelect").value;
            const testTagsSelect = document.getElementById("testTagsSelect").value;
            const keywordSelect = document.getElementById("keywordSelect").value;
            const limit = inFullscreen && inFullscreenGraph.includes("Duration") ? 100 : 30;

            const should_include = (value) => {
                if (dataType === "keyword" && value.name !== keywordSelect) return false;
                if (exclude_from_suite_data(dataType, value)) return false;
                if (settings.switch.suitePathsTestSection) {
                    if (dataType === "test" && suiteSelectTests !== "All" && value.full_name !== `${suiteSelectTests}.${value.name}`) return false;
                } else {
                    if (dataType === "test" && suiteSelectTests !== "All" && !value.full_name.includes(`.${suiteSelectTests}.${value.name}`) && value.full_name !== `${suiteSelectTests}.${value.name}`) return false;
                }
                if (dataType === "test" && testSelect !== "All" && value.name !== testSelect) return false;
                if (dataType === "test" && testTagsSelect !== "All" && !value.tags.replace(/\[|\]/g, "").split(",").includes(testTagsSelect)) return false;
                return true;
            };

            const collect_raw_entries = () => {
                const entries = [];
                for (const value of filteredData) {
                    if (!should_include(value)) continue;
                    const label = settings.show.aliases ? value.run_alias : value.run_start;
                    const duration = Math.round(value[objectDataAttribute] * 100) / 100;
                    entries.push({ label, name: value.name, duration });
                }
                return entries;
            };

            const combine_entries = (entries) => {
                const map = new Map();
                for (const { label, duration } of entries) {
                    map.set(label, (map.get(label) || 0) + duration);
                }
                return Array.from(map.entries())
                    .sort(([a], [b]) => new Date(a) - new Date(b))
                    .slice(-limit)
                    .map(([label, total]) => [label, Math.round(total * 100) / 100]);
            };

            const generate_grouped_line_data = (sets) => {
                const grouped = new Map();
                for (const points of sets.values()) {
                    for (const { x, y } of points) {
                        const ts = x.getTime();
                        grouped.set(ts, (grouped.get(ts) || 0) + y);
                    }
                }
                return Array.from(grouped.entries()).map(([ts, y]) => ({
                    x: new Date(Number(ts)),
                    y,
                })).sort((a, b) => a.x - b.x);
            };

            if (graphType === "bar") {
                const rawEntries = collect_raw_entries();

                if (dataType === "suite" && suiteSelectSuitesCombined) {
                    const combined = combine_entries(rawEntries);
                    return {
                        labels: combined.map(([label]) => label),
                        datasets: [{
                            label: "All Suites Combined",
                            data: combined.map(([, val]) => val),
                            stack: "Stack 0",
                            ...barConfig,
                        }],
                    };
                } else {
                    const labels = [], data = new Map();
                    for (const entry of rawEntries.slice(0, limit)) {
                        labels.push(entry.label);
                        for (const [key, arr] of data.entries()) {
                            arr.push(key === entry.name ? entry.duration : 0);
                        }
                        if (!data.has(entry.name)) {
                            const arr = Array(labels.length - 1).fill(0);
                            arr.push(entry.duration);
                            data.set(entry.name, arr);
                        }
                    }
                    return {
                        labels,
                        datasets: Array.from(data.entries()).map(([label, dataset]) => ({
                            label: label.slice(0, 40),
                            data: dataset,
                            stack: "Stack 0",
                            ...barConfig,
                        })),
                    };
                }
            } else if (graphType === "line") {
                const sets = new Map();
                for (const value of filteredData) {
                    if (!should_include(value)) continue;
                    const name = suiteSelectSuitesCombined && dataType === "suite" ? "All Suites Combined" : value.name;
                    const run_start = new Date(value.run_start);
                    const val = Math.round(value[objectDataAttribute] * 100) / 100;
                    if (!sets.has(name)) sets.set(name, [{ x: run_start, y: val }]);
                    else sets.get(name).push({ x: run_start, y: val });
                }

                if (dataType === "suite" && suiteSelectSuitesCombined) {
                    return [{
                        label: "All Suites Combined",
                        fill: false,
                        data: generate_grouped_line_data(sets),
                        ...lineConfig,
                    }];
                }

                return Array.from(sets.entries()).map(([label, data]) => ({
                    label: label.slice(0, 40),
                    fill: false,
                    data,
                    ...lineConfig,
                }));
            }
        }

        // function to prepare the data for the run stats canvas
        function get_stats_data(filteredRuns, filteredSuites, filteredTests, filteredKeywords) {
            const data = {
                totalRuns: Object.keys(filteredRuns).length,
                totalSuites: Object.keys(filteredSuites).length,
                totalTests: Object.keys(filteredTests).length,
                totalKeywords: filteredKeywords.reduce((sum, k) => sum + parseInt(k.times_run), 0),
            };
            const testStats = {
                total: 0,
                passed: 0,
                failed: 0,
                skipped: 0,
                duration: 0,
                names: new Set(),
            };
            for (const test of filteredTests) {
                testStats.total++;
                testStats.names.add(test.name);
                if (test.passed == 1) testStats.passed++;
                if (test.failed == 1) testStats.failed++;
                if (test.skipped == 1) testStats.skipped++;
                testStats.duration += parseFloat(test.elapsed_s);
            }
            data.totalUniqueTests = testStats.names.size;
            data.totalPassed = `${testStats.passed} (${Math.round(testStats.passed / testStats.total * 100)}%)`;
            data.totalFailed = `${testStats.failed} (${Math.round(testStats.failed / testStats.total * 100)}%)`;
            data.totalSkipped = `${testStats.skipped} (${Math.round(testStats.skipped / testStats.total * 100)}%)`;
            let totalRunDuration = 0;
            const passRates = filteredRuns.map(run => {
                totalRunDuration += parseFloat(run.elapsed_s);
                return Math.round((run.passed / run.total) * 100);
            });
            data.totalRunTime = `${Math.round(totalRunDuration)} (s)`;
            data.averageRunTime = `${Math.round(totalRunDuration / data.totalRuns)} (s)`;
            data.averageTestTime = `${Math.round(testStats.duration / testStats.total * 100) / 100} (s)`;
            data.averagePassRate = `${Math.round(passRates.reduce((a, b) => a + b, 0) / passRates.length)}%`;
            return data;
        }

        // function to prepare the data in the correct format for the duration deviation graph
        function get_duration_deviation_data(dataType, graphType, filteredData) {
            const suiteSelectTests = document.getElementById("suiteSelectTests").value;
            const testSelect = document.getElementById("testSelect").value;
            const testTagsSelect = document.getElementById("testTagsSelect").value;
            const data = new Map();
            for (const value of filteredData) {
                if (dataType === "test") {
                    if (settings.switch.suitePathsTestSection) {
                        if (suiteSelectTests !== "All" && value.full_name !== `${suiteSelectTests}.${value.name}`) {
                            continue;
                        }
                    } else {
                        if (suiteSelectTests !== "All" && !value.full_name.includes(`.${suiteSelectTests}.${value.name}`) && value.full_name !== `${suiteSelectTests}.${value.name}`) {
                            continue;
                        }
                    }
                    if (testSelect !== "All" && value.name !== testSelect) {
                        continue;
                    }
                    if (testTagsSelect !== "All" && !value.tags.replace(/\[|\]/g, "").split(",").includes(testTagsSelect)) {
                        continue;
                    }
                }
                if (data.has(value.name)) {
                    data.get(value.name).push(value.elapsed_s);
                } else {
                    data.set(value.name, [value.elapsed_s]);
                }
            }
            const labels = [];
            const datasets = [];
            for (const [testName, elapsedTimes] of data.entries()) {
                labels.push(testName);
                datasets.push(elapsedTimes);
            }
            return {
                labels,
                datasets: [{
                    itemRadius: 3,
                    data: datasets
                }],
            };
        }

        // function to prepare the data in the correct format for (recent) most flaky test graph
        function get_most_flaky_data(dataType, graphType, filteredData, ignore, recent) {
            var data = {};
            for (const value of filteredData) {
                const key = settings.switch.suitePathsTestSection ? value.full_name : value.name;
                if (data[key]) {
                    data[key]["run_starts"].push(value.run_start);
                    let current_status;
                    if (value.passed == 1) {
                        current_status = "passed";
                    } else if (value.failed == 1) {
                        current_status = "failed";
                        data[key]["failed_run_starts"].push(value.run_start);
                    } else if (!ignore) {
                        if (value.skipped == 1) {
                            current_status = "skipped";
                            data[key]["failed_run_starts"].push(value.run_start);
                        }
                    }
                    if (current_status !== data[key]["previous_status"]) {
                        data[key]["flips"] += 1;
                        data[key]["previous_status"] = current_status;
                    }
                } else {
                    let previous_status;
                    data[key] = {
                        "run_starts": [value.run_start],
                        "flips": 0,
                        "failed_run_starts": []
                    };
                    if (value.passed == 1) {
                        previous_status = "passed";
                    } else if (value.failed == 1) {
                        previous_status = "failed";
                        data[key]["failed_run_starts"].push(value.run_start);
                    } else if (!ignore) {
                        if (value.skipped == 1) {
                            previous_status = "skipped";
                            data[key]["failed_run_starts"].push(value.run_start);
                        }
                    }
                    data[key]["previous_status"] = previous_status;
                }
            }
            var sortedData = [];
            for (var test in data) {
                if (data[test].flips > 0) {
                    sortedData.push([test, data[test]]);
                }
            }
            sortedData.sort(function (a, b) {
                return b[1].flips - a[1].flips;
            });
            if (recent) { // do extra filtering to get most recent flaky tests at the top
                sortedData.sort(function (a, b) {
                    return new Date(b[1].failed_run_starts[b[1].failed_run_starts.length - 1]).getTime() - new Date(a[1].failed_run_starts[a[1].failed_run_starts.length - 1]).getTime()
                })
            }
            var limit
            if (recent) {
                limit = inFullscreen && inFullscreenGraph.includes("testRecentMostFlaky") ? 50 : 10;
            } else {
                limit = inFullscreen && inFullscreenGraph.includes("testMostFlaky") ? 50 : 10;
            }
            if (graphType == "bar") {
                var [datasets, labels, count] = [[], [], 0];
                for (key in sortedData) {
                    if (count == limit) {
                        break;
                    }
                    labels.push(sortedData[key][0]);
                    datasets.push(sortedData[key][1].flips);
                    count += 1;
                }
                const graphData = {
                    labels,
                    datasets: [{
                        data: datasets,
                        ...failedConfig,
                    }],
                };
                return [graphData, data];
            } else if (graphType == "timeline") {
                var [labels, runStarts, count, run_aliases] = [[], [], 0, []];
                for (key in sortedData) {
                    if (count == limit) {
                        break;
                    }
                    labels.push(sortedData[key][0]);
                    for (runStart of sortedData[key][1].run_starts) {
                        if (!runStarts.includes(runStart)) {
                            runStarts.push(runStart);
                        }
                    }
                    count += 1;
                }
                var datasets = [];
                var runAxis = 0;
                runStarts = runStarts.sort((a, b) => new Date(a).getTime() - new Date(b).getTime())
                for (runStart of runStarts) {
                    for (label of labels) {
                        var foundValues = [];
                        for (value of filteredData) {
                            const compareKey = settings.switch.suitePathsTestSection ? value.full_name : value.name;
                            if (compareKey == label && value.run_start == runStart) {
                                // if (value.name == label && value.run_start == runStart) {
                                foundValues.push(value);
                                if (!run_aliases.includes(value.run_alias)) { run_aliases.push(value.run_alias) }
                            }
                        }
                        if (foundValues.length > 0) {
                            var value = foundValues[0];
                            if (value.passed == 1) {
                                datasets.push({
                                    label: label,
                                    data: [{ x: [runAxis, runAxis + 1], y: label }],
                                    ...passedConfig,
                                });
                            }
                            else if (value.failed == 1) {
                                datasets.push({
                                    label: label,
                                    data: [{ x: [runAxis, runAxis + 1], y: label }],
                                    ...failedConfig,
                                });
                            }
                            else if (value.skipped == 1) {
                                datasets.push({
                                    label: label,
                                    data: [{ x: [runAxis, runAxis + 1], y: label }],
                                    ...skippedConfig,
                                });
                            }
                        }
                    }
                    runAxis += 1;
                }
                if (settings.show.aliases) { runStarts = run_aliases }
                datasets = convert_timeline_data(datasets)
                var graphData = {
                    labels: labels,
                    datasets: datasets,
                };
                return [graphData, runStarts];
            }
        }

        // function to prepare the data in the correct format for most failed graphs
        function get_most_failed_data(dataType, graphType, filteredData, recent) {
            function getTestKey(value, dataType) {
                if (dataType === "suite" && settings.switch.suitePathsSuiteSection) {
                    return value.full_name;
                } else if (dataType === "test" && settings.switch.suitePathsTestSection) {
                    return value.full_name;
                } else {
                    return value.name;
                }
            }
            const data = new Map();
            const aliases = new Map();

            for (const value of filteredData) {
                if (value.failed > 0) {
                    const key = getTestKey(value, dataType);
                    if (!data.has(key)) {
                        data.set(key, []);
                        aliases.set(key, []);
                    }
                    data.get(key).push(value.run_start);
                    aliases.get(key).push(value.run_alias);
                }
            }
            let sortedData = [...data.entries()].sort((a, b) => b[1].length - a[1].length);
            if (recent) {
                sortedData = sortedData.slice().sort((a, b) => {
                    const latestA = a[1][a[1].length - 1];
                    const latestB = b[1][b[1].length - 1];
                    if (latestA > latestB) return -1;
                    if (latestA < latestB) return 1;
                    return 0;
                });
            }
            const limit = inFullscreen && inFullscreenGraph.includes("MostFailed") ? 50 : 10;
            if (graphType === "bar") {
                const datasets = [];
                const labels = [];
                const runStartsLabels = new Map();
                let count = 0;
                for (const [name, runStarts] of sortedData) {
                    if (count == limit) break;
                    labels.push(name);
                    if (settings.show.aliases) {
                        data.set(name, aliases.get(name));
                    }
                    datasets.push(runStarts.length);
                    runStartsLabels.set(name, runStarts);
                    count++;
                }
                const graphData = {
                    labels,
                    datasets: [{
                        data: datasets,
                        ...failedConfig,
                    }],
                };
                const callbackData = settings.show.aliases
                    ? Object.fromEntries(sortedData.map(([name]) => [name, aliases.get(name)]))
                    : Object.fromEntries(sortedData.map(([name]) => [name, runStartsLabels.get(name)]));

                return [graphData, callbackData];
            } else if (graphType === "timeline") {
                const labels = [];
                const runStartsSet = new Set();
                const runAliasesSet = new Set();
                let count = 0;
                for (const [name, runStarts] of sortedData) {
                    if (count == limit) break;
                    labels.push(name);
                    runStarts.forEach(runStart => runStartsSet.add(runStart));
                    count++;
                }
                const runStarts = Array.from(runStartsSet).sort((a, b) => new Date(a).getTime() - new Date(b).getTime());
                let datasets = [];
                let runAxis = 0;
                for (const runStart of runStarts) {
                    for (const label of labels) {
                        const foundValues = filteredData.filter(value =>
                            getTestKey(value, dataType) === label && value.run_start === runStart && value.failed > 0
                        );
                        if (foundValues.length > 0) {
                            const value = foundValues[0];
                            datasets.push({
                                label: label,
                                data: [{ x: [runAxis, runAxis + 1], y: label }],
                                ...failedConfig,
                            });
                            foundValues.forEach(v => runAliasesSet.add(v.run_alias));
                        }
                    }
                    runAxis++;
                }
                datasets = convert_timeline_data(datasets);
                const runStartsArray = settings.show.aliases ? Array.from(runAliasesSet) : runStarts;
                const graphData = {
                    labels,
                    datasets,
                };
                return [graphData, runStartsArray];
            }
        }

        // function to prepare the data in the correct format for messages graphs
        function get_messages_data(dataType, graphType, filteredData) {
            const data = new Map();
            const aliases = new Map();
            for (const value of filteredData) {
                if (value.message && (value.failed === 1 || value.skipped === 1)) {
                    if (!data.has(value.message)) {
                        data.set(value.message, []);
                        aliases.set(value.message, []);
                    }
                    data.get(value.message).push(value.run_start);
                    aliases.get(value.message).push(value.run_alias);
                }
            }
            // If there is a message config use that to merge the data
            if (!message_config.includes("placeholder_message_config")) {
                function matches_message_config(str, rule) {
                    rule = rule.replace(/\$\{.*?\}/g, "*") // match any ${something} string
                    var escapeRegex = (str) => str.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1"); // escape the test messages to prevent regex mismatches
                    return new RegExp("^" + rule.split("*").map(escapeRegex).join(".*") + "$").test(str);
                }
                for (const config of message_config) {
                    for (const [message, runStarts] of data) {
                        if (message == config) { continue }
                        if (matches_message_config(message, config)) {
                            if (!data.has(config)) {
                                data.set(config, []);
                            }
                            data.get(config).push(...runStarts);
                            data.delete(message)
                        }
                    }
                }

                for (const [message, runStarts] of data) {
                    arrayWithDuplicates = data.get(message)
                    data.set(message, [...new Set(arrayWithDuplicates)])
                }
            }
            const limit = inFullscreen && inFullscreenGraph.includes("Messages") ? 50 : 10;
            const sortedData = [...data.entries()].sort((a, b) => b[1].length - a[1].length); // Sort messages by failure count
            if (graphType === "bar") {
                const [datasets, labels] = [[], []];
                let count = 0;

                for (const [message, runStarts] of sortedData) {
                    if (count == limit) break;
                    labels.push(message);
                    datasets.push(runStarts.length);
                    if (settings.show.aliases) {
                        data.set(message, aliases.get(message));
                    }
                    count++;
                }
                const graphData = {
                    labels,
                    datasets: [{
                        data: datasets,
                        ...failedConfig,
                    }],
                };
                const callbackData = Object.fromEntries(sortedData.map(([message, runs]) => [message, aliases.get(message)]));
                return [graphData, callbackData];
            } else if (graphType === "timeline") {
                const labels = [];
                const runStartsSet = new Set();
                const runAliasesSet = new Set();
                let count = 0;
                for (const [message, runStarts] of sortedData) { // Collect unique run starts and labels
                    if (count == limit) break;
                    labels.push(message);
                    runStarts.forEach(runStart => runStartsSet.add(runStart));
                    count++;
                }
                const runStarts = Array.from(runStartsSet).sort((a, b) => new Date(a).getTime() - new Date(b).getTime());
                var datasets = [];
                let runAxis = 0;
                function check_label(message, label) {
                    return !message_config.includes("placeholder_message_config")
                        ? matches_message_config(message, label)
                        : message === label;
                }
                for (const runStart of runStarts) {
                    for (const label of labels) {
                        const foundValues = filteredData.filter(value => check_label(value.message, label) && value.run_start === runStart);
                        if (foundValues.length > 0) {
                            const value = foundValues[0];
                            datasets.push({
                                label: label,
                                data: [{ x: [runAxis, runAxis + 1], y: label }],
                                ...failedConfig,
                            });
                            foundValues.forEach(value => runAliasesSet.add(value.run_alias));
                        }
                    }
                    runAxis++;
                }
                datasets = convert_timeline_data(datasets)
                const runStartsArray = settings.show.aliases ? Array.from(runAliasesSet) : runStarts;
                const graphData = {
                    labels,
                    datasets,
                };
                return [graphData, runStartsArray];
            }
        }

        // function to get the compare statistics data
        function get_compare_statistics_graph_data(filteredData) {
            const selectedRuns = [...new Set(
                compareRunIds
                    .map(id => document.getElementById(id).value)
                    .filter(val => val !== "None")
            )];
            const datasets = selectedRuns.map(runId => {
                const match = filteredData.find(d =>
                    d.run_start === runId || d.run_alias === runId
                );
                return match ? {
                    label: settings.show.aliases ? match.run_alias : match.run_start,
                    data: [match.passed, match.failed, match.skipped],
                    ...barConfig
                } : null;
            }).filter(Boolean);
            return {
                labels: ['Passed', 'Failed', 'Skipped'],
                datasets
            };
        }

        function get_compare_suite_duration_data(filteredData) {
            const labelSet = new Set();
            const dataMap = new Map();
            const datasets = [];
            const selectedRuns = [...new Set(
                compareRunIds
                    .map(id => document.getElementById(id)?.value)
                    .filter(val => val && val !== "None")
            )];

            for (const value of filteredData) {
                for (const run of selectedRuns) {
                    if (value.run_start === run || value.run_alias === run) {
                        if (settings.switch.suitePathsCompareSection) {
                            labelSet.add(value.full_name)
                        } else {
                            labelSet.add(value.name);
                        }
                        if (!dataMap.has(run)) dataMap.set(run, []);
                        dataMap.get(run).push(value.elapsed_s);
                    }
                }
            }
            for (const run of selectedRuns) {
                datasets.push({
                    label: run,
                    data: dataMap.get(run) || [],
                    fill: true
                });
            }
            return {
                labels: [...labelSet],
                datasets
            };
        }

        // function to update the height of the test statistics graph and enable scrolling
        function update_height(verticalId, labels, graphType, internal = false) {
            const vertical = document.getElementById(verticalId);
            if (!internal) {
                if (vertical.closest(".grid-stack-item")) { // if item is not hidden add resize observer
                    const observer = new ResizeObserver(entries => {
                        for (let entry of entries) {
                            update_height(verticalId, labels, graphType, true);
                            window[verticalId.replace("Vertical", "Graph")].resize();
                        }
                    });
                    observer.observe(vertical.closest(".grid-stack-item"));
                }
            }
            const fullscreen = vertical.closest(".grid-stack-item-content")
            if (!fullscreen) return; // return if item is hidden
            var baseHeight = parseFloat(getComputedStyle(fullscreen).height);
            if (inFullscreen) {
                baseHeight = baseHeight - 103;
            } else { // fix for not in fullscreen take off the svg row and padding
                baseHeight = baseHeight - 72;
            }
            vertical.style.height = `${baseHeight}px`;
            if (labels > 10 && graphType != "bar") {
                const newHeight = baseHeight + (labels - 10) * 35;
                if (inFullscreen && newHeight < baseHeight) {
                    vertical.style.height = `${baseHeight}px`;
                } else {
                    vertical.style.height = `${newHeight}px`;
                }
            } else {
                vertical.style.height = `${baseHeight}px`;
            }
        }

        // function to convert timeline data to improve performance
        function convert_timeline_data(oldDatasets) {
            const grouped = {};
            for (const dataset of oldDatasets) {
                const segment = dataset.data[0]; // assumes 1 item per dataset
                const status = `${dataset.label}:*:&:.:${dataset.backgroundColor}:*:&:.:${dataset.borderColor}`;
                if (!grouped[status]) {
                    grouped[status] = [];
                }
                grouped[status].push({
                    x: segment.x,
                    y: segment.y,
                });
            }
            const data = Object.entries(grouped)
                .filter(([_, data]) => data.length > 0)
                .map(([status, data]) => ({
                    label: status.split(":*:&:.:")[0],
                    data,
                    backgroundColor: status.split(":*:&:.:")[1],
                    borderColor: status.split(":*:&:.:")[2],
                    ...barConfig,
                    parsing: true
                }));
            return data
        }

        ///////////////////////////////////
        // RENDER DATA & GRAPH FUNCTIONS //
        ///////////////////////////////////

        function update_menu(item) {
            ["overview", "dashboard", "compare", "tables"].forEach(menuItem => {
                set_local_storage_item(`menu.${menuItem}`, (item === `menu${menuItem.charAt(0).toUpperCase() + menuItem.slice(1)}`));
            });
            ["menuOverview", "menuDashboard", "menuCompare", "menuTables"].forEach(id => {
                document.getElementById(id).classList.toggle("active", id === item);
                document.getElementById("customizeLayout").hidden = item == "menuOverview";
            });
            setup_data_and_graphs(true);
        }

        // function to setup the menu eventlisteners
        function setup_menu() {
            document.getElementById("menuOverview").addEventListener("click", () => update_menu("menuOverview"));
            document.getElementById("menuDashboard").addEventListener("click", () => update_menu("menuDashboard"));
            document.getElementById("menuCompare").addEventListener("click", () => update_menu("menuCompare"));
            document.getElementById("menuTables").addEventListener("click", () => update_menu("menuTables"));

            const params = new URLSearchParams(window.location.search);
            const pageParam = params.get("page");
            let selectedMenu;

            if (pageParam) {
                switch (pageParam.toLowerCase()) {
                    case "overview":
                        selectedMenu = "menuOverview";
                        break;
                    case "dashboard":
                        selectedMenu = "menuDashboard";
                        break;
                    case "compare":
                        selectedMenu = "menuCompare";
                        break;
                    case "tables":
                        selectedMenu = "menuTables";
                        break;
                }
                if (selectedMenu) {
                    settings.menu = {
                        overview: selectedMenu === "menuOverview",
                        dashboard: selectedMenu === "menuDashboard",
                        compare: selectedMenu === "menuCompare",
                        tables: selectedMenu === "menuTables",
                    };
                }
            }

            // Priority 2: fall back to settings if no valid URL param
            if (!selectedMenu) {
                const menuSettings = settings.menu;
                if (menuSettings.overview) selectedMenu = "menuOverview";
                else if (menuSettings.dashboard) selectedMenu = "menuDashboard";
                else if (menuSettings.compare) selectedMenu = "menuCompare";
                else if (menuSettings.tables) selectedMenu = "menuTables";
            }
            update_menu(selectedMenu);
        }

        function get_most_visible_section() {
            const SECTION_IDS = [
                "overviewStatisticsSection",
                "runStatisticsSection",
                "suiteStatisticsSection",
                "testStatisticsSection",
                "keywordStatisticsSection",
                "compareStatisticsSection",
                "runTableCanvas",
                "suiteTableCanvas",
                "testTableCanvas",
                "keywordTableCanvas"
            ];
            const viewportTop = window.scrollY;
            const viewportBottom = viewportTop + window.innerHeight;
            const focusTop = viewportTop + window.innerHeight * 0.2;
            const focusBottom = viewportTop + window.innerHeight * 0.5;

            let bestMatchId = null;
            let maxVisibleArea = 0;

            SECTION_IDS.forEach(id => {
                const el = document.getElementById(id);
                if (!el || el.offsetParent === null) return; // skip hidden elements

                const rect = el.getBoundingClientRect();
                const elTop = rect.top + window.scrollY;
                const elBottom = elTop + rect.height;

                const visibleTop = Math.max(elTop, focusTop);
                const visibleBottom = Math.min(elBottom, focusBottom);

                const visibleHeight = visibleBottom - visibleTop;
                if (visibleHeight > maxVisibleArea) {
                    maxVisibleArea = visibleHeight;
                    bestMatchId = id;
                }
            });

            return bestMatchId;
        }

        // function to update all graph data, function is called when updating filters and when the page loads
        function setup_data_and_graphs(menuUpdate = false) {
            // lastScrollY = window.scrollY;
            const mostVisibleSectionId = get_most_visible_section();
            setup_spinner(false);

            // Let the spinner render before starting heavy setup
            requestAnimationFrame(() => {
                setup_filtered_data_and_filters();
                setup_section_order();
                setup_graph_order();
                setup_information_popups();
                setup_graph_view_buttons();
                setup_theme();

                // let the page sections and events be setup before removing the spinner
                // then load the graphs
                requestAnimationFrame(() => {
                    setup_spinner(true);
                    setup_section_menu_buttons(); // sections have to be visible to update highlighting correctly
                    setup_dasbhoard_graphs();

                    if (!menuUpdate) {
                        setTimeout(() => {
                            if (mostVisibleSectionId) {
                                const offsetTop = document.getElementById(mostVisibleSectionId).getBoundingClientRect().top;
                                window.scrollTo({
                                    top: offsetTop - 67, // navbar offset
                                    behavior: "auto"
                                });
                            }
                        }, 100);
                    }
                });
            });
        }

        // function updates the data in the graphs whenever filters are updated
        function setup_filtered_data_and_filters() {
            filteredRuns = remove_milliseconds(runs)
            filteredSuites = remove_milliseconds(suites)
            filteredTests = remove_milliseconds(tests)
            filteredKeywords = remove_milliseconds(keywords)
            // filter run data
            filteredRuns = filter_runs(filteredRuns);
            filteredRuns = filter_runtags(filteredRuns);
            filteredRuns = filter_dates(filteredRuns);
            filteredRuns = filter_amount(filteredRuns);
            filteredRuns = filter_metadata(filteredRuns);
            // filter suites and tests based on filtered runs
            filteredSuites = filter_data(filteredSuites);
            filteredTests = filter_data(filteredTests);
            filteredKeywords = filter_data(filteredKeywords);
            // set titles with amount of filtered items
            const runAmount = Object.keys(filteredRuns).length
            const message = `<h6>showing ${runAmount} of ${filteredAmount} runs</h6>`
            document.getElementById("runTitle").innerHTML = `Run Statistics (${runAmount}) ${message}`;
            document.getElementById("suiteTitle").innerHTML = `Suite Statistics (${Object.keys(filteredSuites).length}) ${message}`;
            document.getElementById("testTitle").innerHTML = `Test Statistics (${Object.keys(filteredTests).length}) ${message}`;
            document.getElementById("keywordTitle").innerHTML = `Keyword Statistics (${Object.keys(filteredKeywords).length}) ${message}`;
            document.getElementById("compareTitle").innerHTML = `Compare Statistics ${message}`;
            document.getElementById("tablesTitle").innerHTML = `Table Statistics (${runAmount}) ${message}`;
            // update filters based on data
            setup_names_in_overview_select();
            setup_runs_in_compare_selects();
            setup_suites_in_suite_select();
            setup_suites_in_test_select();
            setup_testtags_in_select();
            setup_tests_in_select();
            setup_keywords_in_select();
        }

        // function that updates all graphs based on the new filtered data and hidden choices
        function setup_dasbhoard_graphs() {
            if (settings.menu.overview) {
                create_overview_statistics_graphs();
            } else if (settings.menu.dashboard) {
                create_run_statistics_graph();
                create_run_donut_graph();
                create_run_donut_total_graph();
                create_run_stats_graph();
                create_run_duration_graph();
                create_run_heatmap_graph();
                create_suite_statistics_graph();
                create_suite_folder_donut_graph();
                create_suite_folder_fail_donut_graph();
                create_suite_duration_graph();
                create_suite_most_failed_graph();
                create_test_statistics_graph();
                create_test_duration_graph();
                create_test_duration_deviation_graph();
                create_test_messages_graph();
                create_test_most_flaky_graph();
                create_test_recent_most_flaky_graph();
                create_test_most_failed_graph();
                create_test_recent_most_failed_graph();
                create_keyword_statistics_graph();
                create_keyword_times_run_graph();
                create_keyword_total_duration_graph();
                create_keyword_average_duration_graph();
                create_keyword_min_duration_graph();
                create_keyword_max_duration_graph();
                create_keyword_most_failed_graph();
            } else if (settings.menu.compare) {
                create_compare_statistics_graph();
                create_compare_suite_duration_graph();
                create_compare_tests_graph();
            } else if (settings.menu.tables) {
                create_run_table();
                create_suite_table();
                create_test_table();
                create_keyword_table();
            }
        }

        // function to order the sections according to the config
        function setup_section_order() {
            document.getElementById("overview").hidden = !settings.menu.overview;
            document.getElementById("dashboard").hidden = !settings.menu.dashboard;
            document.getElementById("compare").hidden = !settings.menu.compare;
            document.getElementById("tables").hidden = !settings.menu.tables;
            let prevId = "#topSection";

            for (const section of settings.view.dashboard.sections.show) {
                const sectionId = space_to_camelcase(section + "Section");
                const sectionEl = document.getElementById(sectionId);
                sectionEl.hidden = false;
                $(`#${sectionId}`).insertAfter(prevId);
                prevId = `#${sectionId}`;
            }
            for (const section of settings.view.dashboard.sections.hide) {
                const sectionId = space_to_camelcase(section + "Section");
                const sectionEl = document.getElementById(sectionId);
                if (gridEditMode) {
                    sectionEl.hidden = false;
                    $(`#${sectionId}`).insertAfter(prevId);
                    prevId = `#${sectionId}`;
                } else {
                    sectionEl.hidden = true;
                }
            }

            if (gridEditMode) {
                document.querySelectorAll(".move-up-section").forEach(btn => { btn.hidden = false })
                document.querySelectorAll(".move-down-section").forEach(btn => { btn.hidden = false })
                document.querySelectorAll(".shown-section, .hidden-section").forEach(btn => {
                    const prefix = btn.id.slice(0, 3);
                    const label = prefix.charAt(0).toUpperCase()
                    var shouldShow = false;
                    for (const section of settings.view.dashboard.sections.show) {
                        if (section.startsWith(label)) {
                            shouldShow = true;
                            break
                        }
                    }
                    if (btn.classList.contains("shown-section")) {
                        btn.hidden = !shouldShow;
                    } else if (btn.classList.contains("hidden-section")) {
                        btn.hidden = shouldShow;
                    }
                });
            } else {
                document.querySelectorAll(".move-up-section").forEach(btn => { btn.hidden = true })
                document.querySelectorAll(".move-down-section").forEach(btn => { btn.hidden = true })
                document.querySelectorAll(".shown-section").forEach(btn => { btn.hidden = true })
                document.querySelectorAll(".hidden-section").forEach(btn => { btn.hidden = true })
            }
        }

        // function to order the grphs according to the localstorage config
        function setup_graph_order() {
            setup_grid_graphs("Run")
            setup_grid_graphs("Suite")
            setup_grid_graphs("Test")
            setup_grid_graphs("Keyword")
            setup_grid_graphs("Compare")
            setup_tables()
        }

        function setup_grid_graphs(section) {
            const grid = `grid${section}`
            const gridElement = document.getElementById(grid)

            if (!window[grid]) {
                const gridElement = document.getElementById(grid)
                window[grid] = GridStack.init({
                    cellHeight: 100,
                    float: false,
                    resizable: { handles: 'all' }
                }, gridElement);
            } else {
                window[grid].destroy();
                const parentElement = document.getElementById(`${section.toLowerCase()}StatisticsSection`);
                const htmlToInsert = `<div class="card-body grid-stack" id="grid${section}"></div>`;
                parentElement.insertAdjacentHTML('beforeend', htmlToInsert);
                const gridElement = document.getElementById(grid)
                window[grid] = GridStack.init({
                    cellHeight: 100,
                    float: false,
                    resizable: { handles: 'all' }
                }, gridElement);
            }
            if (!gridEditMode) window[grid].disable();

            const lowerCaseSection = section.toLowerCase();
            const sectionDataHidden = document.getElementById(lowerCaseSection + "DataHidden");
            if (sectionDataHidden.children.length > 0) {
                sectionDataHidden.innerHTML = "";
            }

            const graphShow = [...settings.view.dashboard.graphs.show, ...settings.view.compare.graphs.show]
            const graphHide = [...settings.view.dashboard.graphs.hide, ...settings.view.compare.graphs.hide]

            if (settings.layouts && settings.layouts[`${grid}`]) {
                const savedLayout = JSON.parse(settings.layouts[`${grid}`]);
                if (gridEditMode) {
                    for (const graph of graphShow) {
                        if (graph.startsWith(section)) {
                            const layout = savedLayout.find(g => g.id === graph);
                            if (layout) {
                                add_graph(layout.id, layout.x, layout.y, layout.w, layout.h, true);
                            } else {
                                add_graph(graph, undefined, undefined, 4, 4, true);
                            }
                        }
                    }
                    for (const graph of graphHide) {
                        if (graph.startsWith(section)) {
                            const layout = savedLayout.find(g => g.id === graph);
                            if (layout) {
                                add_graph(layout.id, layout.x, layout.y, layout.w, layout.h, false);
                            } else {
                                add_graph(graph, undefined, undefined, 4, 4, false);
                            }
                        }
                    }
                } else {
                    for (const graph of graphShow) {
                        if (graph.startsWith(section)) {
                            const layout = savedLayout.find(g => g.id === graph);
                            if (layout) {
                                add_graph(layout.id, layout.x, layout.y, layout.w, layout.h);
                            } else {
                                add_graph(graph, undefined, undefined, 4, 4);
                            }
                        }
                    }

                    for (const graph of graphHide) {
                        if (graph.startsWith(section)) {
                            add_hidden_graph(graph);
                        }
                    }
                }
            } else {
                const defaultWidth = 4;
                const defaultHeight = 4;
                const maxColumns = 12;
                let currentX = 0;
                let currentY = 0;

                if (gridEditMode) {
                    for (const graph of graphShow) {
                        if (graph.startsWith(section)) {
                            add_graph(graph, currentX, currentY, defaultWidth, defaultHeight, true);
                            currentX += defaultWidth;
                            if (currentX >= maxColumns) {
                                currentX = 0;
                                currentY += defaultHeight;
                            }
                        }
                    }
                    for (const graph of graphHide) {
                        if (graph.startsWith(section)) {
                            add_graph(graph, currentX, currentY, defaultWidth, defaultHeight, false);
                            currentX += defaultWidth;
                            if (currentX >= maxColumns) {
                                currentX = 0;
                                currentY += defaultHeight;
                            }
                        }
                    }
                } else {
                    for (let graph of graphShow) {
                        if (graph.startsWith(section)) {
                            add_graph(graph, currentX, currentY, defaultWidth, defaultHeight);
                            currentX += defaultWidth;
                            if (currentX >= maxColumns) {
                                currentX = 0;
                                currentY += defaultHeight;
                            }
                        }
                    }
                    for (let graph of graphHide) {
                        if (graph.startsWith(section) || graph.endsWith(section)) {
                            add_hidden_graph(graph);
                        }
                    }
                }
            }

            function add_graph(id, x, y, w, h, shown = true) {
                const item = document.createElement("div");
                item.classList.add("grid-stack-item");
                item.setAttribute("gs-x", x);
                item.setAttribute("gs-y", y);
                item.setAttribute("gs-w", w);
                item.setAttribute("gs-min-w", 3);
                item.setAttribute("gs-max-w", 12);
                item.setAttribute("gs-h", h);
                item.setAttribute("gs-min-h", 3);
                item.setAttribute("gs-max-h", 12);
                item.setAttribute("data-gs-id", id);

                // showGraphHidden, hideGraphHidden
                const graphConfig = graphMetadata.find(g => g.label == id);
                var html = `<div class="grid-stack-item-content">${graphConfig.html}</div>`;
                if (gridEditMode) {
                    if (shown) {
                        html = html.replace("showGraphHidden", "")
                        html = html.replace("hideGraphHidden", "hidden")
                    } else {
                        html = html.replace("showGraphHidden", "hidden")
                        html = html.replace("hideGraphHidden", "")
                    }
                } else {
                    html = html.replace("showGraphHidden", "hidden")
                    html = html.replace("hideGraphHidden", "hidden")
                }
                item.innerHTML = html
                window[grid].makeWidget(item);
            }

            function add_hidden_graph(id) {
                sectionDataHidden.insertAdjacentHTML("beforeend", graphMetadata.find(g => g.label == id).html);
            }
        }

        function setup_tables() {
            const tableGrid = document.getElementById("gridTable")
            const tableHidden = document.getElementById("tableDataHidden")
            tableGrid.innerHTML = ''
            tableHidden.innerHTML = ''
            settings.view.tables.graphs.show.forEach(table => {
                var html = graphMetadata.find(g => g.label == table).html
                if (gridEditMode) {
                    html = html
                        .replace("showGraphHidden", "")
                        .replace("hideGraphHidden", "hidden")
                        .replace("moveUpHidden", "")
                        .replace("moveDownHidden", "")
                } else {
                    html = html
                        .replace("showGraphHidden", "hidden")
                        .replace("hideGraphHidden", "hidden")
                        .replace("moveUpHidden", "hidden")
                        .replace("moveDownHidden", "hidden")
                }
                tableGrid.insertAdjacentHTML('beforeend', html);
            });
            settings.view.tables.graphs.hide.forEach(table => {
                var html = graphMetadata.find(g => g.label == table).html
                if (gridEditMode) {
                    html = html.replace("showGraphHidden", "hidden")
                    html = html.replace("hideGraphHidden", "")
                    html = html.replace("moveUpHidden", "")
                    html = html.replace("moveDownHidden", "")
                    tableGrid.insertAdjacentHTML('beforeend', html);
                } else {
                    html = html.replace("showGraphHidden", "hidden")
                    html = html.replace("hideGraphHidden", "hidden")
                    html = html.replace("moveUpHidden", "hidden")
                    html = html.replace("moveDownHidden", "hidden")
                    tableHidden.insertAdjacentHTML('beforeend', html);
                }
            })
        }

        ////////////////////////////
        // LOCALSTORAGE FUNCTIONS //
        ////////////////////////////

        function setup_local_storage() {
            const storedSettings = localStorage.getItem('settings');
            if (storedSettings) {
                try {
                    const parsedSettings = JSON.parse(storedSettings);
                    settings = merge_deep(settings, parsedSettings);
                } catch (e) {
                    add_alert(`Failed to parse settings from localStorage: ${e}`, "danger");
                }
            } else if (typeof json_config != "string") {
                settings = json_config
                localStorage.setItem('settings', JSON.stringify(json_config));
            } else if (typeof admin_json_config != "string" && Object.keys(admin_json_config).length != 0) {
                settings = admin_json_config
                localStorage.setItem('settings', JSON.stringify(settings));
            } else {
                localStorage.setItem('settings', JSON.stringify(settings));
            }
        }

        function set_local_storage_item(path, value) {
            set_nested_setting(settings, path, value);
            localStorage.setItem('settings', JSON.stringify(settings));
        }

        function set_nested_setting(obj, path, value) {
            const keys = path.split('.');
            const lastKey = keys.pop();
            let deep = obj;
            keys.forEach(k => {
                if (!deep.hasOwnProperty(k) || typeof deep[k] !== 'object') {
                    deep[k] = {};
                }
                deep = deep[k];
            });
            deep[lastKey] = value;
        }

        function merge_deep(target, source) {
            for (const key in source) {
                if (source.hasOwnProperty(key)) {
                    if (typeof source[key] === 'object' && source[key] !== null && !Array.isArray(source[key])) {
                        if (!target[key]) target[key] = {};
                        merge_deep(target[key], source[key]);
                    } else {
                        target[key] = source[key];
                    }
                }
            }
            return target;
        }

        ///////////////////////////
        // MAIN FUNCTION ON LOAD //
        ///////////////////////////

        // function that triggers all functions that should be executed when the dashboard is loaded first
        // in the correct order!
        function main() {
            setup_local_storage();
            setup_database_stats();
            setup_layout();
            setup_sections_filters();
            setup_collapsables();
            setup_filter_modal();
            setup_settings_modal();
            setup_menu();
        }

        main() // trigger on first load
    </script>
</body>

</html>