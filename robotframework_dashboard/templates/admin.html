<html data-bs-theme="dark">

<head>
    <title>Admin Page</title>
    <!-- Bootstrap imports -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css"
        rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <!-- Datatables import for JQuery -->
    <script src="https://cdn.datatables.net/v/bs5/jq-3.7.0/dt-2.1.8/datatables.min.js"></script>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon"
        href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKcAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAAqAAAAAAAAAAAAAAAAAAAALIAAAD/AAAA4AAAANwAAADcAAAA3AAAANwAAADcAAAA3AAAANwAAADcAAAA4AAAAP8AAACxAAAAAAAAAKYAAAD/AAAAuwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/AAAA/wAAAKkAAAD6AAAAzAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN8AAAD/AAAA+gAAAMMAAAAAAAAAAgAAAGsAAABrAAAAawAAAGsAAABrAAAAawAAAGsAAABrAAAADAAAAAAAAADaAAAA/wAAAPoAAADDAAAAAAAAAIsAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAANEAAAAAAAAA2gAAAP8AAAD6AAAAwwAAAAAAAAAAAAAAMgAAADIAAAAyAAAAMgAAADIAAAAyAAAAMgAAADIAAAAFAAAAAAAAANoAAAD/AAAA+gAAAMMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADaAAAA/wAAAPoAAADDAAAAAAAAADwAAAB8AAAAAAAAAGAAAABcAAAAAAAAAH8AAABKAAAAAAAAAAAAAAAAAAAA2gAAAP8AAAD6AAAAwwAAAAAAAADCAAAA/wAAACkAAADqAAAA4QAAAAAAAAD7AAAA/wAAALAAAAAGAAAAAAAAANoAAAD/AAAA+gAAAMMAAAAAAAAAIwAAAP4AAAD/AAAA/wAAAGAAAAAAAAAAAAAAAMkAAAD/AAAAigAAAAAAAADaAAAA/wAAAPoAAADDAAAAAAAAAAAAAAAIAAAAcAAAABkAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAAAAAAA2gAAAP8AAAD7AAAAywAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAN4AAAD/AAAAqwAAAP8AAACvAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALIAAAD/AAAAsgAAAAAAAAC5AAAA/wAAAMoAAADAAAAAwAAAAMAAAADAAAAAwAAAAMAAAADAAAAAwAAAAMkAAAD/AAAAvAAAAAAAAAAAAAAAAAAAAKwAAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAA/wAAAP8AAAD/AAAArQAAAAAAAAAAwAMAAIABAAAf+AAAP/wAAD/8AAAgBAAAP/wAAD/8AAA//AAAJIwAADHEAAA//AAAP/wAAB/4AACAAQAAwAMAAA==" />
    <style>
        /* LIGHT MODE STYLING */
        body {
            background-color: #eee;
        }

        .border-bottom {
            border-color: rgba(0, 0, 0, 0.175) !important;
        }

        .fullscreen,
        .sticky-top,
        body {
            background-color: #eee;
        }

        .form-switch .form-check-input:not(:checked) {
            background-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='-4 -4 8 8'%3e%3ccircle r='3' fill='black'/></svg>");
            border-color: black;
        }

        /* DARK MODE STYLING */
        .dark-mode :root {
            color-scheme: dark;
        }

        .dark-mode .canvas {
            background: rgba(30, 41, 59, 0.9);
        }

        .dark-mode .modal-content {
            background: #0f172a;
        }

        .dark-mode .border-bottom {
            border-color: rgba(255, 255, 255, 0.15) !important;
        }

        .dark-mode .fullscreen,
        .dark-mode .sticky-top,
        .dark-mode .card,
        .dark-mode body,
        .dark-mode .modal-dialog {
            background: #0f172a;
            color: #eee;
        }

        .dark-mode .list-group-item:not(.disabled),
        .dark-mode .form-label,
        .dark-mode .form-control {
            color: #eee;
        }

        .dark-mode .list-group-item .disabled {
            color: rgba(173, 181, 189, 0.75);
        }

        .dark-mode .table>:not(caption)>*>* {
            color: #eee;
        }

        .dark-mode svg {
            color: #eee;
        }

        /* GENERAL STYLING */
        :root {
            font-family: Helvetica, sans-serif;
        }

        .stats {
            float: right;
            text-align: right;
            font-size: 0.9em;
            white-space: nowrap;
        }

        .card {
            margin-top: 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .tooltip-popup {
            position: fixed;
            max-width: 360px;
            padding: 8px 12px;
            border-radius: 8px;
            background-color: white;
            color: black;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            font-size: 0.95rem;
            white-space: pre-line;
            pointer-events: none;
            z-index: 9999;
            box-sizing: border-box;
        }

        .dark-mode .tooltip-popup {
            background-color: #0f172a;
            color: #eee;
        }

        .nav-item {
            cursor: pointer;
        }

        #alertContainer {
            z-index: 1100;
            top: 7rem;
            max-width: 80%
        }

        .alert-dismissible {
            padding-right: 16px !important;
        }

        .modal.dimmed {
            pointer-events: none;
            filter: brightness(0.5);
        }
    </style>
</head>

<body>
    <div class="position-relative alert-container">
        <div class="position-fixed top-20 start-50 translate-middle" id="alertContainer"></div>
    </div>
    <nav class="navbar navbar-expand-sm sticky-top navbar-dark ps-4 pe-4 border-bottom pb-1" id="navigation">
        <div class="navbar-nav ms-4">
            <a class="nav-link p-2 information" id="rflogo" href="https://robotframework.org/" target="_blank"></a>
            <a class="nav-item nav-link" id="openDocs" href="/docs">API Docs</a>
            <a class="nav-item nav-link" id="openDashboard" href="/dashboard">Dashboard</a>
        </div>
        <ul class="navbar-nav flex-row flex-wrap ms-md-auto me-4">
            <li class="nav-item">
                <a class="nav-link p-2 information" id="settings" data-bs-toggle="modal"
                    data-bs-target="#settingsModal"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="themeDark"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="themeLight" hidden></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" id="versionInformation"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" target="_blank" id="bug"
                    href="https://github.com/timdegroot1996/robotframework-dashboard/issues"></a>
            </li>
            <li class="nav-item">
                <a class="nav-link p-2 information" target="_blank" id="github"
                    href="https://github.com/timdegroot1996/robotframework-dashboard"></a>
            </li>
        </ul>
    </nav>

    <div class="container-fluid">
        <div class="card">
            <div class="card-header">
                <h3>Add output.xml To Database</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">output.xml</p>
                    </div>
                    <div class="col-5">
                        <label class="form-label form-label-sm" for="outputPath">Absolute Path (E.g.
                            "C:/users/your_user/output.xml")</label>
                        <input class="form-control form-control-sm" id="outputPath"></input>
                    </div>
                    <div class="col-3">
                        <label class="form-label form-label-sm" for="outputTags">Run Tags (separate with ":")</label>
                        <input class="form-control form-control-sm" id="outputTags"></input>
                    </div>
                    <div class="col-2 d-flex">
                        <button class="btn btn-outline-light btn-sm mt-auto" id="addOutputPath">Add&nbsp;
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                                id="addPathSpinner" hidden></span>
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">output.xml</p>
                    </div>
                    <div class="col-5">
                        <label class="form-label form-label-sm mt-1" for="outputData">XML Data (copy paste the
                            output.xml
                            here)</label>
                        <textarea class="form-control form-control-sm" id="outputData" rows="10"></textarea>
                    </div>
                    <div class="col-3">
                        <label class="form-label form-label-sm mt-1" for="outputDataTags">Run Tags (separate with
                            ":")</label>
                        <input class="form-control form-control-sm" id="outputDataTags"></input>
                        <label class="form-label form-label-sm mt-1" for="outputDataAlias">Run Alias</label>
                        <input class="form-control form-control-sm" id="outputDataAlias"></input>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-outline-light btn-sm" style="margin-top:36px"
                            id="addOutputData">Add&nbsp;
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                                id="addDataSpinner" hidden></span>
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">output folder</p>
                    </div>
                    <div class="col-5">
                        <label class="form-label form-label-sm mt-1" for="outputFolderPath">Absolute Path (E.g.
                            "C:/some_folder/your_output_folder")</label>
                        <input class="form-control form-control-sm" id="outputFolderPath"></input>
                    </div>
                    <div class="col-3">
                        <label class="form-label form-label-sm mt-1" for="outputFolderTags">Run Tags (separate with
                            ":")</label>
                        <input class="form-control form-control-sm" id="outputFolderTags"></input>
                    </div>
                    <div class="col-2 d-flex">
                        <button class="btn btn-outline-light btn-sm mt-auto" id="addOutputFolderPath">Add&nbsp;
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                                id="addFolderSpinner" hidden></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <h3>Remove output.xml(s) From Database</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">outputs to remove by run_start</p>
                    </div>
                    <div class="col-8">
                        <label class="form-label form-label-sm" for="removeRunStarts">E.g. "2025-03-13
                            00:29:15.926420,2025-03-23 20:31:03.541062" (, separated)</label>
                        <input class="form-control form-control-sm" id="removeRunStarts"></input>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">outputs to remove by index</p>
                    </div>
                    <div class="col-8">
                        <label class="form-label form-label-sm mt-1" for="removeIndexes">E.g. "1:3;9;13", will remove
                            1,2,3,9,13 (: or ; separated)</label>
                        <input class="form-control form-control-sm" id="removeIndexes"></input>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">outputs to remove by alias</p>
                    </div>
                    <div class="col-8">
                        <label class="form-label form-label-sm mt-1" for="removeAliases">E.g. "alias1,cool_alias_2" (,
                            separated)</label>
                        <input class="form-control form-control-sm" id="removeAliases"></input>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">outputs to remove by tag</p>
                    </div>
                    <div class="col-8">
                        <label class="form-label form-label-sm mt-1" for="removeTags">E.g. "prod,dev,nightly,tag1" (,
                            separated)</label>
                        <input class="form-control form-control-sm" id="removeTags"></input>
                    </div>
                    <div class="col-2 d-flex">
                        <button class="btn btn-outline-light btn-sm mt-auto" id="removeOutputs">Remove&nbsp;
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                                id="removeSpinner" hidden></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <h3>Add/Remove log.html In The Server</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <p>IMPORTANT! The log_name that is provided should be similar to the output.xml that has been
                        uploaded
                        If you added "output-123.xml" then the log should be "log-123.html", otherwise the database
                        won"t update correctly!</p>
                </div>
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-4">log.html</p>
                    </div>
                    <div class="col-5">
                        <label class="form-label form-label-sm mt-1" for="logData">HTML Data (copy paste the
                            log.html
                            here)</label>
                        <textarea class="form-control form-control-sm" id="logData" rows="10"></textarea>
                    </div>
                    <div class="col-3">
                        <label class="form-label form-label-sm mt-1" for="logName">Log Name</label>
                        <input class="form-control form-control-sm" id="logName"></input>
                    </div>
                    <div class="col-2">
                        <button class="btn btn-outline-light btn-sm" style="margin-top:36px" id="addLogData">Add&nbsp;
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                                id="addLogDataSpinner" hidden></span>
                        </button>
                    </div>
                </div>
                <div class="row">
                    <div class="col-2 d-flex">
                        <p class="mt-auto">log.html to remove by name</p>
                    </div>
                    <div class="col-8">
                        <label class="form-label form-label-sm mt-1" for="removeLog">E.g. "log-20250219-172535.html" or
                            "all" for everything</label>
                        <input class="form-control form-control-sm" id="removeLog"></input>
                    </div>
                    <div class="col-2 d-flex">
                        <button class="btn btn-outline-light btn-sm mt-auto" id="removeLogData">Remove&nbsp;
                            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"
                                id="removeLogDataSpinner" hidden></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">
                <h3>Runs In The Database</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <p>Use "Run ID" or "Run Start" to remove runs from the database.</p>
                </div>
                <div class="row">
                    <div class="col">
                        <table class="table table-striped table-bordered" id="runTable"></table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal fade" id="settingsModal" tabindex="-1" aria-labelledby="settingsModalLabel">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title" id="settingsModalLabel">Admin Settings</h1>
                        <div>
                            <button type="button" class="btn btn-outline-light btn-sm mt-auto ms-5"
                                data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    <div class="modal-body">
                        <h4>Instructions</h4>
                        <div class="row ms-2 mb-3">
                            <ul>
                                <li>You can copy the "json config" from a dashboard and input it here.</li>
                                <li>This setting will be applied to every dashboard on other machines IF:
                                    <ul>
                                        <li>It is the first load of the dashboard on that browser/machine.</li>
                                        <li>There is no --jsonconfig that is provided through the CLI.</li>
                                        <li>You don't have any of the above and enforce it in Settings > Reset Settings
                                            in the dashboard.</li>
                                    </ul>
                                </li>
                                <li>If the server is turned off it loses the "admin json config".</li>
                                <li>If you start the server and open the admin page the browser local storage in the
                                    admin page should automatically restore the "admin json config" on the server side.
                                </li>
                                <li>Above point assumes you are using a machine/browser you have previously used to set
                                    the settings!</li>
                            </ul>
                        </div>
                        <div class="row mb-3">
                            <div class="col-auto">
                                <button class="btn btn-outline-light btn-sm mt-auto" id="copySettings">Copy
                                    Settings
                                </button>
                            </div>
                            <div class="col-auto">
                                <button class="btn btn-outline-light btn-sm mt-auto" id="applySettings">Apply
                                    Settings<span class="spinner-border spinner-border-sm" role="status"
                                        aria-hidden="true" id="applySettingsSpinner" hidden></span></button>
                            </div>
                        </div>
                        <div class="row mb-2">
                            <div class="col">
                                <label for="settingsTextArea" class="form-label">Current Settings JSON</label>
                                <textarea id="settingsTextArea" class="form-control" rows="14"></textarea>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Modal -->
        <div class="modal fade" id="confirmModal" tabindex="-1" aria-labelledby="confirmModalLabel">
            <div class="modal-dialog">
                <div class="modal-content mt-5">
                    <div class="modal-header">
                        <h5 class="modal-title" id="confirmModalLabel">Please Confirm</h5>
                        <div>
                            <button type="button" class="btn btn-outline-light btn-sm mt-auto ms-5"
                                data-bs-dismiss="modal">Close</button>
                        </div>
                    </div>
                    <div class="modal-body" id="confirmModalMessage">
                        Are you sure you want to proceed?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-outline-light btn-sm" id="confirmCancel">Cancel</button>
                        <button type="button" class="btn btn-outline-light btn-sm" id="confirmOk">Confirm</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        /////////////////////////////
        // GLOBAL VARIABLE SECTION //
        /////////////////////////////

        var adminSettings = {}

        // svgs
        const settingsDarkSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-1.5 0a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path><path fill="white" d="M12 1c.266 0 .532.009.797.028.763.055 1.345.617 1.512 1.304l.352 1.45c.019.078.09.171.225.221.247.089.49.19.728.302.13.061.246.044.315.002l1.275-.776c.603-.368 1.411-.353 1.99.147.402.349.78.726 1.128 1.129.501.578.515 1.386.147 1.99l-.776 1.274c-.042.069-.058.185.002.315.112.238.213.481.303.728.048.135.142.205.22.225l1.45.352c.687.167 1.249.749 1.303 1.512.038.531.038 1.063 0 1.594-.054.763-.616 1.345-1.303 1.512l-1.45.352c-.078.019-.171.09-.221.225-.089.248-.19.491-.302.728-.061.13-.044.246-.002.315l.776 1.275c.368.603.353 1.411-.147 1.99-.349.402-.726.78-1.129 1.128-.578.501-1.386.515-1.99.147l-1.274-.776c-.069-.042-.185-.058-.314.002a8.606 8.606 0 0 1-.729.303c-.135.048-.205.142-.225.22l-.352 1.45c-.167.687-.749 1.249-1.512 1.303-.531.038-1.063.038-1.594 0-.763-.054-1.345-.616-1.512-1.303l-.352-1.45c-.019-.078-.09-.171-.225-.221a8.138 8.138 0 0 1-.728-.302c-.13-.061-.246-.044-.315-.002l-1.275.776c-.603.368-1.411.353-1.99-.147-.402-.349-.78-.726-1.128-1.129-.501-.578-.515-1.386-.147-1.99l.776-1.274c.042-.069.058-.185-.002-.314a8.606 8.606 0 0 1-.303-.729c-.048-.135-.142-.205-.22-.225l-1.45-.352c-.687-.167-1.249-.749-1.304-1.512a11.158 11.158 0 0 1 0-1.594c.055-.763.617-1.345 1.304-1.512l1.45-.352c.078-.019.171-.09.221-.225.089-.248.19-.491.302-.728.061-.13.044-.246.002-.315l-.776-1.275c-.368-.603-.353-1.411.147-1.99.349-.402.726-.78 1.129-1.128.578-.501 1.386-.515 1.99-.147l1.274.776c.069.042.185.058.315-.002.238-.112.481-.213.728-.303.135-.048.205-.142.225-.22l.352-1.45c.167-.687.749-1.249 1.512-1.304C11.466 1.01 11.732 1 12 1Zm-.69 1.525c-.055.004-.135.05-.161.161l-.353 1.45a1.832 1.832 0 0 1-1.172 1.277 7.147 7.147 0 0 0-.6.249 1.833 1.833 0 0 1-1.734-.074l-1.274-.776c-.098-.06-.186-.036-.228 0a9.774 9.774 0 0 0-.976.976c-.036.042-.06.131 0 .228l.776 1.274c.314.529.342 1.18.074 1.734a7.147 7.147 0 0 0-.249.6 1.831 1.831 0 0 1-1.278 1.173l-1.45.351c-.11.027-.156.107-.16.162a9.63 9.63 0 0 0 0 1.38c.004.055.05.135.161.161l1.45.353a1.832 1.832 0 0 1 1.277 1.172c.074.204.157.404.249.6.268.553.24 1.204-.074 1.733l-.776 1.275c-.06.098-.036.186 0 .228.301.348.628.675.976.976.042.036.131.06.228 0l1.274-.776a1.83 1.83 0 0 1 1.734-.075c.196.093.396.176.6.25a1.831 1.831 0 0 1 1.173 1.278l.351 1.45c.027.11.107.156.162.16a9.63 9.63 0 0 0 1.38 0c.055-.004.135-.05.161-.161l.353-1.45a1.834 1.834 0 0 1 1.172-1.278 6.82 6.82 0 0 0 .6-.248 1.831 1.831 0 0 1 1.733.074l1.275.776c.098.06.186.036.228 0 .348-.301.675-.628.976-.976.036-.042.06-.131 0-.228l-.776-1.275a1.834 1.834 0 0 1-.075-1.733c.093-.196.176-.396.25-.6a1.831 1.831 0 0 1 1.278-1.173l1.45-.351c.11-.027.156-.107.16-.162a9.63 9.63 0 0 0 0-1.38c-.004-.055-.05-.135-.161-.161l-1.45-.353c-.626-.152-1.08-.625-1.278-1.172a6.576 6.576 0 0 0-.248-.6 1.833 1.833 0 0 1 .074-1.734l.776-1.274c.06-.098.036-.186 0-.228a9.774 9.774 0 0 0-.976-.976c-.042-.036-.131-.06-.228 0l-1.275.776a1.831 1.831 0 0 1-1.733.074 6.88 6.88 0 0 0-.6-.249 1.835 1.835 0 0 1-1.173-1.278l-.351-1.45c-.027-.11-.107-.156-.162-.16a9.63 9.63 0 0 0-1.38 0Z"></path></svg>'
        const settingsLightSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M16 12a4 4 0 1 1-8 0 4 4 0 0 1 8 0Zm-1.5 0a2.5 2.5 0 1 0-5 0 2.5 2.5 0 0 0 5 0Z"></path><path d="M12 1c.266 0 .532.009.797.028.763.055 1.345.617 1.512 1.304l.352 1.45c.019.078.09.171.225.221.247.089.49.19.728.302.13.061.246.044.315.002l1.275-.776c.603-.368 1.411-.353 1.99.147.402.349.78.726 1.128 1.129.501.578.515 1.386.147 1.99l-.776 1.274c-.042.069-.058.185.002.315.112.238.213.481.303.728.048.135.142.205.22.225l1.45.352c.687.167 1.249.749 1.303 1.512.038.531.038 1.063 0 1.594-.054.763-.616 1.345-1.303 1.512l-1.45.352c-.078.019-.171.09-.221.225-.089.248-.19.491-.302.728-.061.13-.044.246-.002.315l.776 1.275c.368.603.353 1.411-.147 1.99-.349.402-.726.78-1.129 1.128-.578.501-1.386.515-1.99.147l-1.274-.776c-.069-.042-.185-.058-.314.002a8.606 8.606 0 0 1-.729.303c-.135.048-.205.142-.225.22l-.352 1.45c-.167.687-.749 1.249-1.512 1.303-.531.038-1.063.038-1.594 0-.763-.054-1.345-.616-1.512-1.303l-.352-1.45c-.019-.078-.09-.171-.225-.221a8.138 8.138 0 0 1-.728-.302c-.13-.061-.246-.044-.315-.002l-1.275.776c-.603.368-1.411.353-1.99-.147-.402-.349-.78-.726-1.128-1.129-.501-.578-.515-1.386-.147-1.99l.776-1.274c.042-.069.058-.185-.002-.314a8.606 8.606 0 0 1-.303-.729c-.048-.135-.142-.205-.22-.225l-1.45-.352c-.687-.167-1.249-.749-1.304-1.512a11.158 11.158 0 0 1 0-1.594c.055-.763.617-1.345 1.304-1.512l1.45-.352c.078-.019.171-.09.221-.225.089-.248.19-.491.302-.728.061-.13.044-.246.002-.315l-.776-1.275c-.368-.603-.353-1.411.147-1.99.349-.402.726-.78 1.129-1.128.578-.501 1.386-.515 1.99-.147l1.274.776c.069.042.185.058.315-.002.238-.112.481-.213.728-.303.135-.048.205-.142.225-.22l.352-1.45c.167-.687.749-1.249 1.512-1.304C11.466 1.01 11.732 1 12 1Zm-.69 1.525c-.055.004-.135.05-.161.161l-.353 1.45a1.832 1.832 0 0 1-1.172 1.277 7.147 7.147 0 0 0-.6.249 1.833 1.833 0 0 1-1.734-.074l-1.274-.776c-.098-.06-.186-.036-.228 0a9.774 9.774 0 0 0-.976.976c-.036.042-.06.131 0 .228l.776 1.274c.314.529.342 1.18.074 1.734a7.147 7.147 0 0 0-.249.6 1.831 1.831 0 0 1-1.278 1.173l-1.45.351c-.11.027-.156.107-.16.162a9.63 9.63 0 0 0 0 1.38c.004.055.05.135.161.161l1.45.353a1.832 1.832 0 0 1 1.277 1.172c.074.204.157.404.249.6.268.553.24 1.204-.074 1.733l-.776 1.275c-.06.098-.036.186 0 .228.301.348.628.675.976.976.042.036.131.06.228 0l1.274-.776a1.83 1.83 0 0 1 1.734-.075c.196.093.396.176.6.25a1.831 1.831 0 0 1 1.173 1.278l.351 1.45c.027.11.107.156.162.16a9.63 9.63 0 0 0 1.38 0c.055-.004.135-.05.161-.161l.353-1.45a1.834 1.834 0 0 1 1.172-1.278 6.82 6.82 0 0 0 .6-.248 1.831 1.831 0 0 1 1.733.074l1.275.776c.098.06.186.036.228 0 .348-.301.675-.628.976-.976.036-.042.06-.131 0-.228l-.776-1.275a1.834 1.834 0 0 1-.075-1.733c.093-.196.176-.396.25-.6a1.831 1.831 0 0 1 1.278-1.173l1.45-.351c.11-.027.156-.107.16-.162a9.63 9.63 0 0 0 0-1.38c-.004-.055-.05-.135-.161-.161l-1.45-.353c-.626-.152-1.08-.625-1.278-1.172a6.576 6.576 0 0 0-.248-.6 1.833 1.833 0 0 1 .074-1.734l.776-1.274c.06-.098.036-.186 0-.228a9.774 9.774 0 0 0-.976-.976c-.042-.036-.131-.06-.228 0l-1.275.776a1.831 1.831 0 0 1-1.733.074 6.88 6.88 0 0 0-.6-.249 1.835 1.835 0 0 1-1.173-1.278l-.351-1.45c-.027-.11-.107-.156-.162-.16a9.63 9.63 0 0 0-1.38 0Z"></path></svg>'
        const githubDarkSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg>';
        const githubLightSVG = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg>';
        const rflogoDarkSVG = '<svg data-v-266d6681="" data-v-7dd69bf4="" version="1.1" id="face" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="fill-white"><path fill="white" data-v-266d6681="" id="path" d="M5,10.2c0-1.9,1.5-3.4,3.4-3.4c1.9,0,3.4,1.5,3.4,3.4c0,0.7-0.6,1.2-1.2,1.2c-0.7,0-1.2-0.6-1.2-1.2 c0-0.5-0.4-0.9-0.9-0.9c-0.5,0-0.9,0.4-0.9,0.9c0,0.7-0.6,1.2-1.2,1.2S5,10.9,5,10.2 M19,15.9c0,0.7-0.6,1.2-1.2,1.2H6.4 c-0.7,0-1.2-0.6-1.2-1.2c0-0.7,0.6-1.2,1.2-1.2h11.5C18.5,14.7,19,15.3,19,15.9 M13.7,10.9c-0.4-0.6-0.2-1.3,0.3-1.7l2.9-1.9 c0.6-0.4,1.3-0.2,1.7,0.3c0.4,0.6,0.2,1.3-0.3,1.7l-2.9,1.9c-0.2,0.1-0.5,0.2-0.7,0.2C14.3,11.5,13.9,11.3,13.7,10.9 M21.5,18.5 c0,0.2-0.1,0.5-0.3,0.6l-2.1,2.1c-0.2,0.2-0.4,0.3-0.6,0.3h-13c-0.2,0-0.5-0.1-0.6-0.3l-2.1-2.1c-0.2-0.2-0.3-0.4-0.3-0.6v-13 c0-0.2,0.1-0.5,0.3-0.6l2.1-2.1C5,2.6,5.2,2.5,5.5,2.5h13c0.2,0,0.5,0.1,0.6,0.3l2.1,2.1c0.2,0.2,0.3,0.4,0.3,0.6V18.5z M23.3,3.4 l-2.8-2.8C20.1,0.2,19.6,0,19,0H5C4.4,0,3.9,0.2,3.4,0.7L0.7,3.4C0.2,3.9,0,4.4,0,5v14c0,0.6,0.2,1.2,0.7,1.6l2.8,2.8 C3.9,23.8,4.4,24,5,24h14c0.6,0,1.2-0.2,1.6-0.7l2.8-2.8c0.4-0.4,0.7-1,0.7-1.6V5C24,4.4,23.8,3.9,23.3,3.4"></path></svg>'
        const rflogoLightSVG = '<svg data-v-266d6681="" data-v-7dd69bf4="" version="1.1" id="face" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" class="fill-white"><path data-v-266d6681="" id="path" d="M5,10.2c0-1.9,1.5-3.4,3.4-3.4c1.9,0,3.4,1.5,3.4,3.4c0,0.7-0.6,1.2-1.2,1.2c-0.7,0-1.2-0.6-1.2-1.2 c0-0.5-0.4-0.9-0.9-0.9c-0.5,0-0.9,0.4-0.9,0.9c0,0.7-0.6,1.2-1.2,1.2S5,10.9,5,10.2 M19,15.9c0,0.7-0.6,1.2-1.2,1.2H6.4 c-0.7,0-1.2-0.6-1.2-1.2c0-0.7,0.6-1.2,1.2-1.2h11.5C18.5,14.7,19,15.3,19,15.9 M13.7,10.9c-0.4-0.6-0.2-1.3,0.3-1.7l2.9-1.9 c0.6-0.4,1.3-0.2,1.7,0.3c0.4,0.6,0.2,1.3-0.3,1.7l-2.9,1.9c-0.2,0.1-0.5,0.2-0.7,0.2C14.3,11.5,13.9,11.3,13.7,10.9 M21.5,18.5 c0,0.2-0.1,0.5-0.3,0.6l-2.1,2.1c-0.2,0.2-0.4,0.3-0.6,0.3h-13c-0.2,0-0.5-0.1-0.6-0.3l-2.1-2.1c-0.2-0.2-0.3-0.4-0.3-0.6v-13 c0-0.2,0.1-0.5,0.3-0.6l2.1-2.1C5,2.6,5.2,2.5,5.5,2.5h13c0.2,0,0.5,0.1,0.6,0.3l2.1,2.1c0.2,0.2,0.3,0.4,0.3,0.6V18.5z M23.3,3.4 l-2.8-2.8C20.1,0.2,19.6,0,19,0H5C4.4,0,3.9,0.2,3.4,0.7L0.7,3.4C0.2,3.9,0,4.4,0,5v14c0,0.6,0.2,1.2,0.7,1.6l2.8,2.8 C3.9,23.8,4.4,24,5,24h14c0.6,0,1.2-0.2,1.6-0.7l2.8-2.8c0.4-0.4,0.7-1,0.7-1.6V5C24,4.4,23.8,3.9,23.3,3.4"></path></svg>'
        const sunSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M12 19a7 7 0 1 1 0-14 7 7 0 0 1 0 14Zm0-1.5a5.5 5.5 0 1 0 0-11 5.5 5.5 0 1 0 0 11Zm-5.657.157a.75.75 0 0 1 0 1.06l-1.768 1.768a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734l1.767-1.768a.75.75 0 0 1 1.061 0ZM3.515 3.515a.75.75 0 0 1 1.06 0l1.768 1.768a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L3.515 4.575a.75.75 0 0 1 0-1.06ZM12 0a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0V.75A.75.75 0 0 1 12 0ZM4 12a.75.75 0 0 1-.75.75H.75a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 4 12Zm8 8a.75.75 0 0 1 .75.75v2.5a.75.75 0 0 1-1.5 0v-2.5A.75.75 0 0 1 12 20Zm12-8a.75.75 0 0 1-.75.75h-2.5a.75.75 0 0 1 0-1.5h2.5A.75.75 0 0 1 24 12Zm-6.343 5.657a.75.75 0 0 1 1.06 0l1.768 1.768a.751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018l-1.768-1.767a.75.75 0 0 1 0-1.061Zm2.828-14.142a.75.75 0 0 1 0 1.06l-1.768 1.768a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l1.767-1.768a.75.75 0 0 1 1.061 0Z"></path></svg>`
        const moonSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M14.768 3.96v.001l-.002-.005a9.08 9.08 0 0 0-.218-.779c-.13-.394.21-.8.602-.67.29.096.575.205.855.328l.01.005A10.002 10.002 0 0 1 12 22a10.002 10.002 0 0 1-9.162-5.985l-.004-.01a9.722 9.722 0 0 1-.329-.855c-.13-.392.277-.732.67-.602.257.084.517.157.78.218l.004.002A9 9 0 0 0 14.999 6a9.09 9.09 0 0 0-.231-2.04ZM16.5 6c0 5.799-4.701 10.5-10.5 10.5-.426 0-.847-.026-1.26-.075A8.5 8.5 0 1 0 16.425 4.74c.05.413.075.833.075 1.259Z"></path></svg>`
        const bugDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M7.72.22a.75.75 0 0 1 1.06 0l1.204 1.203A4.98 4.98 0 0 1 12 1c.717 0 1.4.151 2.016.423L15.22.22a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-.971.972A4.991 4.991 0 0 1 17 6v1.104a2.755 2.755 0 0 1 1.917 1.974l1.998-.999a.75.75 0 0 1 .67 1.342L19 10.714V13.5l3.25.003a.75.75 0 0 1 0 1.5L19 15.001V16c0 .568-.068 1.134-.204 1.686l.04.018 2.75 1.375a.75.75 0 1 1-.671 1.342l-2.638-1.319A6.998 6.998 0 0 1 12 23a6.998 6.998 0 0 1-6.197-3.742l-2.758 1.181a.752.752 0 0 1-1.064-.776.752.752 0 0 1 .474-.602l2.795-1.199A6.976 6.976 0 0 1 5 16v-.996H1.75a.75.75 0 0 1 0-1.5H5v-2.79L2.415 9.42a.75.75 0 0 1 .67-1.342l1.998.999A2.756 2.756 0 0 1 7 7.104V6a4.99 4.99 0 0 1 1.69-3.748l-.97-.972a.75.75 0 0 1 0-1.06ZM6.5 9.75V16a5.5 5.5 0 1 0 11 0V9.75c0-.69-.56-1.25-1.25-1.25h-8.5c-.69 0-1.25.56-1.25 1.25ZM8.5 7h7V6a3.5 3.5 0 1 0-7 0Z"></path></svg>`
        const bugLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M7.72.22a.75.75 0 0 1 1.06 0l1.204 1.203A4.98 4.98 0 0 1 12 1c.717 0 1.4.151 2.016.423L15.22.22a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-.971.972A4.991 4.991 0 0 1 17 6v1.104a2.755 2.755 0 0 1 1.917 1.974l1.998-.999a.75.75 0 0 1 .67 1.342L19 10.714V13.5l3.25.003a.75.75 0 0 1 0 1.5L19 15.001V16c0 .568-.068 1.134-.204 1.686l.04.018 2.75 1.375a.75.75 0 1 1-.671 1.342l-2.638-1.319A6.998 6.998 0 0 1 12 23a6.998 6.998 0 0 1-6.197-3.742l-2.758 1.181a.752.752 0 0 1-1.064-.776.752.752 0 0 1 .474-.602l2.795-1.199A6.976 6.976 0 0 1 5 16v-.996H1.75a.75.75 0 0 1 0-1.5H5v-2.79L2.415 9.42a.75.75 0 0 1 .67-1.342l1.998.999A2.756 2.756 0 0 1 7 7.104V6a4.99 4.99 0 0 1 1.69-3.748l-.97-.972a.75.75 0 0 1 0-1.06ZM6.5 9.75V16a5.5 5.5 0 1 0 11 0V9.75c0-.69-.56-1.25-1.25-1.25h-8.5c-.69 0-1.25.56-1.25 1.25ZM8.5 7h7V6a3.5 3.5 0 1 0-7 0Z"></path></svg>`
        const versionDarkSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="white" d="M13 7.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-3 3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v4.25h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75V12h-.75a.75.75 0 0 1-.75-.75Z"></path><path fill="white" d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"></path></svg>`
        const versionLightSVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path d="M13 7.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Zm-3 3.75a.75.75 0 0 1 .75-.75h1.5a.75.75 0 0 1 .75.75v4.25h.75a.75.75 0 0 1 0 1.5h-3a.75.75 0 0 1 0-1.5h.75V12h-.75a.75.75 0 0 1-.75-.75Z"></path><path d="M12 1c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1ZM2.5 12a9.5 9.5 0 0 0 9.5 9.5 9.5 9.5 0 0 0 9.5-9.5A9.5 9.5 0 0 0 12 2.5 9.5 9.5 0 0 0 2.5 12Z"></path></svg>`

        const informationMap = {
            "rflogo": "Robot Framework",
            "settings": "Settings",
            "themeLight": "Theme",
            "themeDark": "Theme",
            "versionInformation": '"placeholder_version"',
            "bug": "Report a bug or request a feature",
            "github": "Github",
        }

        /////////////////////////////
        // GENERIC SETUP FUNCTIONS //
        /////////////////////////////

        // function to update the theme when the button is clicked
        function toggle_theme() {
            if (document.documentElement.classList.contains("dark-mode")) {
                localStorage.setItem("theme", "light");
            } else {
                localStorage.setItem("theme", "dark");
            }
            setup_theme()
        }

        // theme function based on browser/machine color scheme
        function setup_theme() {
            function set_light_mode() {
                // menu theme
                document.getElementById('navigation').classList.remove('navbar-dark')
                document.getElementById('navigation').classList.add('navbar-light')
                document.getElementById("themeLight").hidden = true;
                document.getElementById("themeDark").hidden = false;
                // bootstrap related settings
                document.getElementsByTagName("html")[0].setAttribute("data-bs-theme", "light");
                document.documentElement.style.setProperty("--bs-body-bg", "#fff");
                const buttonsOutlineLight = document.querySelectorAll(".btn-outline-light")
                const buttonsLight = document.querySelectorAll(".btn-light")
                for (const button of buttonsOutlineLight) {
                    button.classList.remove("btn-outline-light");
                    button.classList.add("btn-outline-dark");
                }
                for (const button of buttonsLight) {
                    button.classList.remove("btn-light");
                    button.classList.add("btn-dark");
                }
                // set the table correctly
                document.getElementById("runTable").classList.remove("table-dark")
                document.getElementById("runTable").classList.add("table-light")
                // set the SVG's correctly
                const svgMap = {
                    "github": githubLightSVG,
                    "settings": settingsLightSVG,
                    "rflogo": rflogoLightSVG,
                    "themeDark": moonSVG,
                    "bug": bugLightSVG,
                    "versionInformation": versionLightSVG,
                };
                for (const [id, svg] of Object.entries(svgMap)) {
                    const el = document.getElementById(id);
                    if (el) el.innerHTML = svg;
                }
            }

            function set_dark_mode() {
                // menu theme
                document.getElementById('navigation').classList.remove('navbar-light')
                document.getElementById('navigation').classList.add('navbar-dark')
                document.getElementById("themeLight").hidden = false;
                document.getElementById("themeDark").hidden = true;
                // bootstrap related settings
                document.getElementsByTagName("html")[0].setAttribute("data-bs-theme", "dark");
                document.documentElement.style.setProperty("--bs-body-bg", "rgba(30, 41, 59, 0.9)");
                const buttonsOutlineLight = document.querySelectorAll(".btn-outline-dark")
                const buttonsLight = document.querySelectorAll(".btn-dark")
                for (const button of buttonsOutlineLight) {
                    button.classList.remove("btn-outline-dark");
                    button.classList.add("btn-outline-light");
                }
                for (const button of buttonsLight) {
                    button.classList.remove("btn-dark");
                    button.classList.add("btn-light");
                }
                // set the table correctly
                document.getElementById("runTable").classList.remove("table-light")
                document.getElementById("runTable").classList.add("table-dark")
                // set the SVG's correclty
                const svgMap = {
                    "github": githubDarkSVG,
                    "settings": settingsDarkSVG,
                    "rflogo": rflogoDarkSVG,
                    "themeLight": sunSVG,
                    "bug": bugDarkSVG,
                    "versionInformation": versionDarkSVG,
                };
                for (const [id, svg] of Object.entries(svgMap)) {
                    const el = document.getElementById(id);
                    if (el) el.innerHTML = svg;
                }
            }

            const theme = localStorage.getItem("theme");
            const root = document.documentElement;
            const isDark = root.classList.contains("dark-mode");
            if (theme === "light") {
                if (isDark) root.classList.remove("dark-mode");
                set_light_mode();
            } else if (theme === "dark") {
                if (!isDark) root.classList.add("dark-mode");
                set_dark_mode();
            } else {
                // No theme in localStorage, fall back to system preference
                if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                    root.classList.add("dark-mode");
                    set_dark_mode();
                } else {
                    root.classList.remove("dark-mode");
                    set_light_mode();
                }
            }
        }

        function setup_output_button_eventlisteners() {
            // add eventlisteners to all buttons
            document.getElementById("addOutputPath").addEventListener("click", add_output_path);
            document.getElementById("addOutputData").addEventListener("click", add_output_data);
            document.getElementById("addOutputFolderPath").addEventListener("click", add_output_folder_path);
            document.getElementById("removeOutputs").addEventListener("click", remove_outputs);
            document.getElementById("addLogData").addEventListener("click", add_log);
            document.getElementById("removeLogData").addEventListener("click", remove_log);
        }

        // function to add an alert to the admin page
        function add_alert(message, category, timeout = 10000) {
            const alertHTML = `<div class="row alert alert-${category} alert-dismissible" role="alert">
                <div class="col">${message}</div>
                <div class="col-auto">
                    <span onclick="close_alert()" type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </span>
                </div>
            </div>`
            document.getElementById("alertContainer").innerHTML = alertHTML

            setTimeout(() => {
                close_alert()
            }, timeout);
        }

        // function to close the alerts
        function close_alert() {
            document.getElementById("alertContainer").innerHTML = ""
        }

        // function to fill the information icons with the correct data
        function setup_information_popups() {
            for (const id in informationMap) {
                const title = informationMap[id];
                const element = document.getElementById(id);
                if (!element) continue;  // safety check if element not found
                element.setAttribute("data-title", title);
            }

            let tooltipEl = null;
            let currentTarget = null;

            function createTooltip(el) {
                if (tooltipEl) removeTooltip();

                const text = el.getAttribute('data-title');
                if (!text) return;

                tooltipEl = document.createElement('div');
                tooltipEl.className = 'tooltip-popup';
                tooltipEl.textContent = text;
                document.body.appendChild(tooltipEl);

                const rect = el.getBoundingClientRect();
                const padding = 8;
                const maxWidth = 440;

                const baseCharWidth = 8;
                let dynamicMinWidth = Math.min(Math.max(text.length * baseCharWidth + 24, 80), 200);

                tooltipEl.style.width = 'auto';
                tooltipEl.style.maxWidth = maxWidth + 'px';
                tooltipEl.style.minWidth = dynamicMinWidth + 'px';

                let left = rect.left + rect.width / 2;
                let top = rect.bottom + 8;

                tooltipEl.style.left = `${left}px`;
                tooltipEl.style.top = `${top}px`;
                tooltipEl.style.transform = 'translateX(-50%)';

                let tooltipRect = tooltipEl.getBoundingClientRect();

                if (tooltipRect.left < padding) {
                    let availableWidthRight = window.innerWidth - padding - left;
                    let newWidth = Math.min(availableWidthRight * 2, maxWidth);
                    newWidth = dynamicMinWidth < 150 ? dynamicMinWidth : newWidth;
                    tooltipEl.style.width = newWidth + 'px';

                    tooltipRect = tooltipEl.getBoundingClientRect();
                    let adjustedLeft = padding + tooltipRect.width / 2;
                    tooltipEl.style.left = `${adjustedLeft}px`;
                    tooltipEl.style.transform = 'translateX(-50%)';
                } else if (tooltipRect.right > window.innerWidth - padding) {
                    let availableWidthLeft = left - padding;
                    let newWidth = Math.min(availableWidthLeft * 2, maxWidth);
                    newWidth = dynamicMinWidth < 150 ? dynamicMinWidth : newWidth;
                    tooltipEl.style.width = newWidth + 'px';

                    tooltipRect = tooltipEl.getBoundingClientRect();
                    let adjustedLeft = window.innerWidth - padding - tooltipRect.width / 2;
                    tooltipEl.style.left = `${adjustedLeft}px`;
                    tooltipEl.style.transform = 'translateX(-50%)';
                }
            }

            function removeTooltip() {
                document.querySelectorAll('.tooltip-popup').forEach(el => el.remove());
                tooltipEl = null;
                currentTarget = null;
            }

            function isElementVisible(el) {
                const style = window.getComputedStyle(el);
                return !(style.display === 'none' || style.visibility === 'hidden' || el.offsetParent === null);
            }

            document.querySelectorAll('.information[data-title]').forEach(el => {
                el.onmouseenter = null;
                el.onmouseleave = null;
                el.onclick = null;

                el.addEventListener('mouseenter', () => {
                    if (currentTarget !== el) {
                        currentTarget = el;
                        createTooltip(el);
                    }
                });

                el.addEventListener('mouseleave', () => {
                    if (currentTarget === el) {
                        removeTooltip();
                    }
                });

                el.addEventListener('click', () => {
                    if (!isElementVisible(el) && currentTarget === el) {
                        removeTooltip();
                    }
                });
            });

            document.addEventListener('mouseover', e => {
                const target = e.target.closest('.information[data-title]');
                if (target !== currentTarget) {
                    removeTooltip();
                    if (target) {
                        currentTarget = target;
                        createTooltip(target);
                    }
                }
            });
        }

        //////////////////////////////////
        // SERVER INTERACTION FUNCTIONS //
        //////////////////////////////////

        // function to add an output to the database based on a path
        function add_output_path() {
            document.getElementById("addPathSpinner").hidden = false
            const outputPath = document.getElementById("outputPath").value
            const outputTags = document.getElementById("outputTags").value.split(":")
            document.getElementById("outputPath").value = ""
            document.getElementById("outputTags").value = ""

            const body = JSON.stringify({
                output_path: outputPath,
                output_tags: outputTags,
            });
            send_request("POST", "/add-outputs", body, "addPathSpinner")
        }

        // function to add an output to the database based on raw data
        function add_output_data() {
            document.getElementById("addDataSpinner").hidden = false
            const outputData = document.getElementById("outputData").value
            const outputDataTags = document.getElementById("outputDataTags").value.split(":")
            const outputAlias = document.getElementById("outputDataAlias").value
            document.getElementById("outputData").value = ""
            document.getElementById("outputDataTags").value = ""
            document.getElementById("outputDataAlias").value = ""

            const body = JSON.stringify({
                output_data: outputData,
                output_tags: outputDataTags,
                output_alias: outputAlias,
            });
            send_request("POST", "/add-outputs", body, "addDataSpinner")
        }

        // function to add output(s) to the database based on a folder path
        function add_output_folder_path() {
            document.getElementById("addFolderSpinner").hidden = false
            const outputFolderPath = document.getElementById("outputFolderPath").value
            const outputFolderTags = document.getElementById("outputFolderTags").value.split(":")
            document.getElementById("outputFolderPath").value = ""
            document.getElementById("outputFolderTags").value = ""

            const body = JSON.stringify({
                output_folder_path: outputFolderPath,
                output_tags: outputFolderTags,
            });
            send_request("POST", "/add-outputs", body, "addFolderSpinner")
        }

        // function to remove outputs from the database
        function remove_outputs() {
            document.getElementById("removeSpinner").hidden = false
            var [data, run_starts, indexes, aliases, tags] = [{}, [], [], [], []]
            const removeRunStarts = document.getElementById("removeRunStarts").value.split(",")
            for (const runStart of removeRunStarts) {
                if (runStart == "") { continue }
                run_starts.push(runStart)
            }
            if (run_starts.length > 0) { data["run_starts"] = run_starts }
            const removeIndexes = document.getElementById("removeIndexes").value.split(";")
            for (const index of removeIndexes) {
                if (index == "") { continue }
                indexes.push(index)
            }
            if (indexes.length > 0) { data["indexes"] = indexes }
            const removeAliases = document.getElementById("removeAliases").value.split(",")
            for (const removeAlias of removeAliases) {
                if (removeAlias == "") { continue }
                aliases.push(removeAlias)
            }
            if (aliases.length > 0) { data["aliases"] = aliases }
            const removeTags = document.getElementById("removeTags").value.split(",")
            for (const removeTag of removeTags) {
                if (removeTag == "") { continue }
                tags.push(removeTag)
            }
            if (tags.length > 0) { data["tags"] = tags }
            document.getElementById("removeRunStarts").value = ""
            document.getElementById("removeIndexes").value = ""
            document.getElementById("removeAliases").value = ""
            document.getElementById("removeTags").value = ""
            const body = JSON.stringify(data)
            send_request("DELETE", "/remove-outputs", body, "removeSpinner")
        }

        // function to retrieve all outputs currently in the database
        function get_outputs() {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "/get-outputs");
            xhr.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
            xhr.onload = () => {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    const runs = JSON.parse(xhr.responseText)
                    let table = "<tr><th>Run Index</th><th>Run Start</th><th>Run Name</th><th>Run Alias</th><th>Run Tags</th></tr>"
                    for (const [index, run] of runs.entries()) {
                        table += `<tr><td>${index}</td><td>${run.run_start}</td><td>${run.name}</td><td>${run.alias}</td><td>${run.tags}</td></tr>`
                    }
                    document.getElementById("runTable").innerHTML = table
                } else {
                    add_alert(`Error: ${xhr.status}, ${xhr.responseText}`, "danger")
                }
            };
            xhr.send();
        }

        // function to set the customized view config
        function set_admin_json_config(notifications = true) {
            const storedSettings = JSON.parse(localStorage.getItem('adminSettings'));
            document.getElementById("applySettingsSpinner").hidden = false
            const body = JSON.stringify({
                admin_json_config: JSON.stringify(storedSettings),
            });
            send_request("POST", "set-admin-json-config", body, "applySettingsSpinner", notifications)
        }

        // function to get the customized view config
        function get_admin_json_config() {
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "/get-admin-json-config");
            xhr.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
            xhr.onload = () => {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    const config = JSON.parse(xhr.responseText)
                    const serverSettings = config.admin_json_config;
                    const storageSettings = JSON.parse(localStorage.getItem("adminSettings"));
                    if (serverSettings != '{}') {
                        // if there IS a serversetting use that
                        adminSettings = JSON.parse(serverSettings);
                        if (!storageSettings) {
                            // if there IS no local storage yet apply the serversetting to it
                            localStorage.setItem("adminSettings", JSON.stringify(adminSettings));
                        }
                    } else {
                        // there is NO serversetting yet
                        if (storageSettings) {
                            // there IS a local storage setting use that
                            adminSettings = storageSettings;
                            set_admin_json_config(false);
                        }
                    }
                } else {
                    add_alert(`Error: ${xhr.status}, ${xhr.responseText}`, "danger")
                }
            };
            xhr.send();
        }

        // function to send requests (helper function for other functions that do similar server requests)
        function send_request(method, endpoint, body, spinner, notifications = true) {
            const xhr = new XMLHttpRequest();
            xhr.open(method, endpoint);
            xhr.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
            xhr.onload = () => {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    document.getElementById(spinner).hidden = true
                    response = JSON.parse(xhr.responseText);
                    if (response.success == "1") {
                        console.log(response.console)
                        if (notifications) {
                            if (response.console.includes("ERROR")) {
                                add_alert("SUCCESS: The processing was handled but some errors occurred, see the browser console for more details!", "warning")
                            } else {
                                add_alert(response.message, "success")
                            }
                        }
                    } else {
                        add_alert(response.message, "danger")
                        console.log(response.console)
                    }
                    get_outputs()
                } else {
                    document.getElementById(spinner).hidden = true
                    add_alert(`Error: ${xhr.status}, ${xhr.responseText}`, "danger")
                }
            };
            xhr.send(body);
        }

        // function to add a logs raw data to the server and update the database
        function add_log() {
            document.getElementById("addLogDataSpinner").hidden = false
            const logData = document.getElementById("logData").value
            const logName = document.getElementById("logName").value
            document.getElementById("logData").value = ""
            document.getElementById("logName").value = ""

            const body = JSON.stringify({
                log_data: logData,
                log_name: logName,
            });
            send_request("POST", "/add-log", body, "addLogDataSpinner")
        }

        // function to remove outputs from the database
        function remove_log() {
            document.getElementById("removeLogDataSpinner").hidden = false
            const removeLog = document.getElementById("removeLog").value
            document.getElementById("removeLog").value = ""
            const body = JSON.stringify({
                log_name: removeLog,
            });
            send_request("DELETE", "/remove-log", body, "removeLogDataSpinner")
        }

        //////////////////////////////
        // CUSTOMIZE VIEW FUNCTIONS //
        //////////////////////////////

        function setup_settings_modal() {
            document.getElementById("themeLight").addEventListener("click", () => toggle_theme());
            document.getElementById("themeDark").addEventListener("click", () => toggle_theme());

            function show_settings_in_textarea() {
                const textArea = document.getElementById("settingsTextArea");
                textArea.value = JSON.stringify(adminSettings, null, 2);
            }

            function copy_settings_to_clipboard() {
                const textArea = document.getElementById("settingsTextArea");
                textArea.select();
                textArea.setSelectionRange(0, 99999);
                navigator.clipboard.writeText(textArea.value);
                add_alert("Copied settings to clipboard!", "success")
            }

            async function apply_settings_from_textarea() {
                const confirmed = await confirm_action(`Are you sure you want to apply the new settings?<br><br>
                    This may override:<br>
                    - Graph settings<br>
                    - Custom layouts (e.g., moved or resized graphs)<br>
                    - Hidden graphs
                `);
                if (confirmed) {
                    try {
                        const input = document.getElementById("settingsTextArea").value;
                        const newSettings = JSON.parse(input);
                        adminSettings = newSettings
                        localStorage.setItem("adminSettings", JSON.stringify(adminSettings));
                        set_admin_json_config();
                    } catch (e) {
                        add_alert("Failed to update admin json config: " + e, "danger")
                    }
                }
            }
            document.getElementById("copySettings").addEventListener("click", copy_settings_to_clipboard);
            document.getElementById("applySettings").addEventListener("click", apply_settings_from_textarea);
            document.getElementById("settingsModal").addEventListener("shown.bs.modal", show_settings_in_textarea);

            function confirm_action(message = "Are you sure?") {
                return new Promise((resolve) => {
                    const settingsModal = document.getElementById("settingsModal");
                    const modalEl = document.getElementById("confirmModal");
                    const modalBody = document.getElementById("confirmModalMessage");
                    const cancelBtn = document.getElementById("confirmCancel");
                    const okBtn = document.getElementById("confirmOk");

                    settingsModal.classList.add("dimmed");
                    modalBody.innerHTML = message;

                    const modal = new bootstrap.Modal(modalEl);
                    const onCancel = () => {
                        resolve(false);
                        modal.hide();
                    };
                    const onConfirm = () => {
                        resolve(true);
                        modal.hide();
                    };
                    const onHidden = () => {
                        cleanup();
                    };
                    const cleanup = () => {
                        cancelBtn.removeEventListener("click", onCancel);
                        okBtn.removeEventListener("click", onConfirm);
                        modalEl.removeEventListener("hidden.bs.modal", onHidden);
                        settingsModal.classList.remove("dimmed");
                    };

                    cancelBtn.addEventListener("click", onCancel);
                    okBtn.addEventListener("click", onConfirm);
                    modalEl.addEventListener("hidden.bs.modal", onHidden);
                    modal.show();
                });
            }
        }

        ///////////////////////////
        // MAIN FUNCTION ON LOAD //
        ///////////////////////////

        // function that triggers all functions that should be executed when the dashboard is loaded first
        // in the correct order!
        function main() {
            setup_theme();
            setup_output_button_eventlisteners();
            setup_information_popups();
            setup_settings_modal();
            get_admin_json_config(); // get server side config if it exists and update local storage (if it is not already filled) and the modal
            get_outputs();
        }

        // trigger of first load
        main()
    </script>

</body>

</html>